<!DOCTYPE HTML>
<html lang="en" >
    <!-- Start book Onedata Documentation -->
<!-- Start book Onedata Documentation -->
    <head>
        <!-- head:start -->
<!-- head:start -->
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>18.02.0-rc12 - 18.02.* | Onedata Documentation</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../../../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../../../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../../../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../../../gitbook/plugins/gitbook-plugin-onedata-theme/nanoscroller.css">
        
    
        
        <link rel="stylesheet" href="../../../gitbook/plugins/gitbook-plugin-onedata-theme/onedata.css">
        
    
        
        <link rel="stylesheet" href="../../../gitbook/plugins/gitbook-plugin-onedata-theme/rest.css">
        
    
        
        <link rel="stylesheet" href="../../../gitbook/plugins/gitbook-plugin-image-captions/image-captions.css">
        
    
        
        <link rel="stylesheet" href="../../../gitbook/plugins/gitbook-plugin-toggle-chapters/toggle.css">
        
    
        
        <link rel="stylesheet" href="../../../gitbook/plugins/gitbook-plugin-responsive-iframes/plugin.css">
        
    
        
        <link rel="stylesheet" href="../../../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../../../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    
        <link rel="stylesheet" href="../../../website-1686572662585.css">
    

        
    
    
    <link rel="next" href="../../../doc/administering_onedata/openid_saml_configuration/openid_saml_configuration_19_02.html" />
    
    
    <link rel="prev" href="../../../doc/administering_onedata/openid_saml_configuration/openid_configuration_legacy.html" />
    

        <!-- head:end -->
<!-- head:end -->
    </head>
    <body>
        <!-- body:start -->
<!-- body:start -->
        
    <div class="book"
        data-level="3.6.3.2"
        data-chapter-title="18.02.0-rc12 - 18.02.*"
        data-filepath="doc/administering_onedata/openid_saml_configuration/openid_saml_configuration_18_02.md"
        data-basepath="../../.."
        data-revision="Mon Jun 12 2023 12:24:21 GMT+0000 (UTC)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../../../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Onedata Documentation
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" >
            
            <span><b>1.</b> Getting Started</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="doc/getting_started/what_is_onedata.html">
            
                
                    <a href="../../../doc/getting_started/what_is_onedata.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        What is Onedata?
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="doc/getting_started/downloading_onedata.html">
            
                
                    <a href="../../../doc/getting_started/downloading_onedata.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        Downloading Onedata
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="doc/getting_started/user_onedata_101.html">
            
                
                    <a href="../../../doc/getting_started/user_onedata_101.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                        User Quickstart
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="doc/getting_started/admin_onedata_101.html">
            
                
                    <a href="../../../doc/getting_started/admin_onedata_101.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.</b>
                        
                        Admin Quickstart
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="doc/administering_onedata/onezone_quick_tutorial.html">
            
                
                    <a href="../../../doc/administering_onedata/onezone_quick_tutorial.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.1.</b>
                        
                        Onezone deploy
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="doc/administering_onedata/oneprovider_quick_tutorial.html">
            
                
                    <a href="../../../doc/administering_onedata/oneprovider_quick_tutorial.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.2.</b>
                        
                        Oneprovider deploy
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" >
            
            <span><b>2.</b> Onedata for users</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="doc/user_guide.html">
            
                
                    <a href="../../../doc/user_guide.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        Overview
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="doc/using_onedata/account_management.html">
            
                
                    <a href="../../../doc/using_onedata/account_management.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        Account Management
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="doc/using_onedata/space_management.html">
            
                
                    <a href="../../../doc/using_onedata/space_management.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                        Space Management
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="doc/using_onedata/space_collaboration.html">
            
                
                    <a href="../../../doc/using_onedata/space_collaboration.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.</b>
                        
                        Space Collaboration
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="doc/using_onedata/group_management.html">
            
                
                    <a href="../../../doc/using_onedata/group_management.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.</b>
                        
                        Group Management
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="doc/using_onedata/privilege_management.html">
            
                
                    <a href="../../../doc/using_onedata/privilege_management.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.6.</b>
                        
                        Privilege Management
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.7" data-path="doc/using_onedata/file_management.html">
            
                
                    <a href="../../../doc/using_onedata/file_management.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.7.</b>
                        
                        File Management
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.8" data-path="doc/using_onedata/replication_management.html">
            
                
                    <a href="../../../doc/using_onedata/replication_management.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.8.</b>
                        
                        Replication and Transfer Management
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.9" data-path="doc/using_onedata/metadata.html">
            
                
                    <a href="../../../doc/using_onedata/metadata.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.9.</b>
                        
                        Metadata
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.10" data-path="doc/using_onedata/views.html">
            
                
                    <a href="../../../doc/using_onedata/views.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.10.</b>
                        
                        Views
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.11" data-path="doc/using_onedata/tokens.html">
            
                
                    <a href="../../../doc/using_onedata/tokens.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.11.</b>
                        
                        Tokens
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.12" data-path="doc/using_onedata/oneclient.html">
            
                
                    <a href="../../../doc/using_onedata/oneclient.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.12.</b>
                        
                        Oneclient CLI
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.13" data-path="doc/using_onedata/docker_volume_plugin.html">
            
                
                    <a href="../../../doc/using_onedata/docker_volume_plugin.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.13.</b>
                        
                        Docker volume plugin
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.14" data-path="doc/using_onedata/shares.html">
            
                
                    <a href="../../../doc/using_onedata/shares.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.14.</b>
                        
                        Shares
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.15" data-path="doc/using_onedata/file_registration.html">
            
                
                    <a href="../../../doc/using_onedata/file_registration.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.15.</b>
                        
                        File registration
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.16" data-path="doc/using_onedata/handle_services.html">
            
                
                    <a href="../../../doc/using_onedata/handle_services.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.16.</b>
                        
                        Handle Services
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.17" data-path="doc/using_onedata/using_onedata_from_cli.html">
            
                
                    <a href="../../../doc/using_onedata/using_onedata_from_cli.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.17.</b>
                        
                        Using REST API
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.18" data-path="doc/using_onedata/onedatafs.html">
            
                
                    <a href="../../../doc/using_onedata/onedatafs.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.18.</b>
                        
                        OnedataFS Python interface
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.19" data-path="doc/using_onedata/jupyter_integration.html">
            
                
                    <a href="../../../doc/using_onedata/jupyter_integration.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.19.</b>
                        
                        Jupyter integration
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.20" data-path="doc/using_onedata/qos.html">
            
                
                    <a href="../../../doc/using_onedata/qos.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.20.</b>
                        
                        Quality of Service
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" >
            
            <span><b>3.</b> Onedata for administrators</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="doc/admin_guide.html">
            
                
                    <a href="../../../doc/admin_guide.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        Overview
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="doc/system_requirements.html">
            
                
                    <a href="../../../doc/system_requirements.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        System requirements
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="doc/compatibility_reference.html">
            
                
                    <a href="../../../doc/compatibility_reference.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.</b>
                        
                        Compatibility reference
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="Services overview.html">
            
            <span><b>3.4.</b> Services overview</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.4.1" data-path="doc/administering_onedata/onezone_overview.html">
            
                
                    <a href="../../../doc/administering_onedata/onezone_overview.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.1.</b>
                        
                        Onezone overview
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.4.2" data-path="doc/administering_onedata/provider_overview.html">
            
                
                    <a href="../../../doc/administering_onedata/provider_overview.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.2.</b>
                        
                        Oneprovider overview
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.4.3" data-path="doc/administering_onedata/onepanel_overview.html">
            
                
                    <a href="../../../doc/administering_onedata/onepanel_overview.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.3.</b>
                        
                        Onepanel overview
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="doc/administering_onedata/deployment_tutorial.html">
            
                
                    <a href="../../../doc/administering_onedata/deployment_tutorial.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.5.</b>
                        
                        Installation tutorial
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.5.1" data-path="doc/administering_onedata/onedatify_deploy.html">
            
                
                    <a href="../../../doc/administering_onedata/onedatify_deploy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.5.1.</b>
                        
                        Oneprovider deploy
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.5.2" data-path="doc/administering_onedata/onedatify_deploy_with_import.html">
            
                
                    <a href="../../../doc/administering_onedata/onedatify_deploy_with_import.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.5.2.</b>
                        
                        Oneprovider deploy and expose data
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.5.3" data-path="doc/administering_onedata/onezone_tutorial.html">
            
                
                    <a href="../../../doc/administering_onedata/onezone_tutorial.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.5.3.</b>
                        
                        Onezone setup
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="Administrator manual.html">
            
            <span><b>3.6.</b> Administrator manual</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.6.1" data-path="doc/administering_onedata/oneprovider_tutorial.html">
            
                
                    <a href="../../../doc/administering_onedata/oneprovider_tutorial.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.1.</b>
                        
                        Oneprovider setup
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.6.2" data-path="doc/administering_onedata/creating_user_accounts.html">
            
                
                    <a href="../../../doc/administering_onedata/creating_user_accounts.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.2.</b>
                        
                        Creating User accounts
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.6.3" data-path="doc/administering_onedata/openid_saml_configuration.html">
            
                
                    <a href="../../../doc/administering_onedata/openid_saml_configuration.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.3.</b>
                        
                        OpenID &amp; SAML Configuration
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.6.3.1" data-path="doc/administering_onedata/openid_saml_configuration/openid_configuration_legacy.html">
            
                
                    <a href="../../../doc/administering_onedata/openid_saml_configuration/openid_configuration_legacy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.3.1.</b>
                        
                        18.02.0-rc11 or older
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="3.6.3.2" data-path="doc/administering_onedata/openid_saml_configuration/openid_saml_configuration_18_02.html">
            
                
                    <a href="../../../doc/administering_onedata/openid_saml_configuration/openid_saml_configuration_18_02.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.3.2.</b>
                        
                        18.02.0-rc12 - 18.02.*
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.6.3.3" data-path="doc/administering_onedata/openid_saml_configuration/openid_saml_configuration_19_02.html">
            
                
                    <a href="../../../doc/administering_onedata/openid_saml_configuration/openid_saml_configuration_19_02.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.3.3.</b>
                        
                        19.02.* or newer
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.6.3.4" data-path="doc/administering_onedata/openid_saml_configuration/google_idp_tutorial.html">
            
                
                    <a href="../../../doc/administering_onedata/openid_saml_configuration/google_idp_tutorial.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.3.4.</b>
                        
                        Google IdP tutorial
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.6.4" data-path="doc/administering_onedata/provider_space_support.html">
            
                
                    <a href="../../../doc/administering_onedata/provider_space_support.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.4.</b>
                        
                        Space Support
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.6.5" data-path="doc/administering_onedata/storage_configuration.html">
            
                
                    <a href="../../../doc/administering_onedata/storage_configuration.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.5.</b>
                        
                        Storage Configuration
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.6.6" data-path="doc/administering_onedata/storage_import.html">
            
                
                    <a href="../../../doc/administering_onedata/storage_import.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.6.</b>
                        
                        Storage import
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.6.7" data-path="doc/administering_onedata/ceph_cluster_deployment.html">
            
                
                    <a href="../../../doc/administering_onedata/ceph_cluster_deployment.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.7.</b>
                        
                        Ceph cluster deployment
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.6.8" data-path="doc/administering_onedata/ssl_certificate_management.html">
            
                
                    <a href="../../../doc/administering_onedata/ssl_certificate_management.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.8.</b>
                        
                        SSL Certificate Management
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.6.9" data-path="doc/administering_onedata/firewall_setup.html">
            
                
                    <a href="../../../doc/administering_onedata/firewall_setup.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.9.</b>
                        
                        Firewall Setup
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.6.10" data-path="doc/administering_onedata/luma.html">
            
                
                    <a href="../../../doc/administering_onedata/luma.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.10.</b>
                        
                        Local User Mapping - LUMA
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.6.11" data-path="doc/administering_onedata/file_popularity.html">
            
                
                    <a href="../../../doc/administering_onedata/file_popularity.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.11.</b>
                        
                        File-popularity
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.6.12" data-path="doc/administering_onedata/auto_cleaning.html">
            
                
                    <a href="../../../doc/administering_onedata/auto_cleaning.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.12.</b>
                        
                        Auto-cleaning
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.6.13" data-path="doc/administering_onedata/administering_onedata_from_cli.html">
            
                
                    <a href="../../../doc/administering_onedata/administering_onedata_from_cli.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.13.</b>
                        
                        Admin REST API
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="doc/advanced/index.html">
            
                
                    <a href="../../../doc/advanced/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Advanced topics
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="doc/advanced/cdmi.html">
            
                
                    <a href="../../../doc/advanced/cdmi.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        CDMI API
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../../" >Onedata Documentation</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="openid--saml-configuration">OpenID &amp; SAML Configuration</h1>
<p><strong>Config version 2</strong></p>
<p>This documentation is valid for Onezone versions from <code>18.02.0-rc12</code> to <code>18.02.*</code>. 
Other versions can be found <a href="../openid_saml_configuration.html">here</a>.</p>
<!-- toc -->
<ul>
<li><a href="#changes-since-previous-version">Changes since previous version</a></li>
<li><a href="#prerequisites">Prerequisites</a><ul>
<li><a href="#openid-connect">OpenID Connect</a></li>
<li><a href="#saml">SAML</a></li>
<li><a href="#the-login-page">The login page</a></li>
</ul>
</li>
<li><a href="#config-file-structure">Config file structure</a><ul>
<li><a href="#general-remarks">General remarks</a></li>
<li><a href="#main-sections">Main sections</a></li>
<li><a href="#onepanelauth-config">onepanelAuth Config</a></li>
<li><a href="#openid-config">OpenID config</a></li>
<li><a href="#saml-config">SAML config</a></li>
<li><a href="#supported-idps">Supported IdPs</a><ul>
<li><a href="#onepanelauth-example">onepanelAuth example</a></li>
<li><a href="#openid-example">OpenID example</a></li>
<li><a href="#saml-example">SAML example</a></li>
<li><a href="#openid-saml-similarities">OpenID &amp; SAML similarities</a></li>
</ul>
</li>
<li><a href="#authority-delegation">Authority Delegation</a></li>
<li><a href="#offline-access">Offline access</a></li>
<li><a href="#attribute-mapping">Attribute Mapping</a><ul>
<li><a href="#merging-linked-accounts-into-onedata-user">Merging linked accounts into Onedata user</a></li>
<li><a href="#attribute-mapping-rules">Attribute mapping rules</a></li>
<li><a href="#attribute-mapping-inheritance">Attribute mapping inheritance</a></li>
<li><a href="#exemplary-idp-attributes">Exemplary IdP attributes</a></li>
</ul>
</li>
<li><a href="#entitlement-mapping">Entitlement Mapping</a><ul>
<li><a href="#entitlement-parsers">Entitlement parsers</a></li>
<li><a href="#group-types">Group types</a></li>
<li><a href="#privileges-in-entitlements">Privileges in entitlements</a></li>
<li><a href="#custom-entitlement-parsers-advanced">Custom entitlement parsers (advanced)</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#auth-plugins">Auth plugins</a><ul>
<li><a href="#attribute-mapper">Attribute mapper</a></li>
<li><a href="#entitlement-parser">Entitlement parser</a></li>
<li><a href="#openid-plugin">OpenID plugin</a></li>
</ul>
</li>
<li><a href="#troubleshooting">Troubleshooting</a></li>
<li><a href="#luma-integration">LUMA Integration</a></li>
<li><a href="#custom-icon-guidelines">Custom icon guidelines</a></li>
<li><a href="#test-login-page">Test login page</a></li>
<li><a href="#complete-example">Complete example</a></li>
<li><a href="#exemplary-entries-for-selected-idps">Exemplary entries for selected IdPs</a><ul>
<li><a href="#onepanel-config-onepanelauth">Onepanel config (onepanelAuth)</a></li>
<li><a href="#keycloak-config-openid-connect">KeyCloak config (OpenID Connect)</a></li>
<li><a href="#google-config-openid-connect">Google+ config (OpenID Connect)</a></li>
<li><a href="#facebook-config-openid-connect">Facebook config (OpenID Connect)</a></li>
<li><a href="#github-config-openid-connect">GitHub config (OpenID Connect)</a></li>
<li><a href="#indigo-config-openid-connect">Indigo config (OpenID Connect)</a></li>
<li><a href="#egi-config-openid-connect">EGI config (OpenID Connect)</a></li>
<li><a href="#plgrid-config-openid-20">PLGrid config (OpenID 2.0)</a></li>
<li><a href="#cern-config-saml">CERN config (SAML)</a></li>
<li><a href="#cnrs-config-saml">CNRS config (SAML)</a></li>
<li><a href="#desy-config-saml">DESY config (SAML)</a></li>
<li><a href="#elixir-config-saml">Elixir config (SAML)</a></li>
<li><a href="#embl-config-saml">EMBL config (SAML)</a></li>
<li><a href="#esrf-config-saml">ESRF config (SAML)</a></li>
<li><a href="#ifae-config-saml">IFAE config (SAML)</a></li>
<li><a href="#infn-config-saml">INFN config (SAML)</a></li>
<li><a href="#kit-config-saml">KIT config (SAML)</a></li>
<li><a href="#stfc-config-saml">STFC config (SAML)</a></li>
<li><a href="#surfsara-config-saml">SurfSara config (SAML)</a></li>
<li><a href="#unitedid-config-saml">UnitedID config (SAML)</a></li>
</ul>
</li>
</ul>
<!-- toc stop -->
<p>OpenID and SAML are the main authentication methods used in Onedata. 
They allow users to reuse their accounts from other websites such as social 
networks or infrastructure portals.</p>
<p>When configuring Onedata, it is necessary to decide which Identity Providers
should be supported by the Onezone service. This can be achieved by editing 
the <code>/etc/oz_worker/auth.config</code> file on the Onezone node. In docker-compose 
based deployments, the most straightforward method is to mount the <code>auth.config</code>
file in the volumes section. </p>
<blockquote>
<p>NOTE: the <code>auth.config</code> file must be present on all cluster nodes hosting the
Onezone worker service, and must be identical.</p>
</blockquote>
<h2 id="changes-since-previous-version">Changes since previous version</h2>
<p>The <code>auth.config</code> file has been reworked completely. During the first startup
after upgrading to <code>18.02.0-rc12</code> or newer, Onezone will perform 
<a href="../openid_saml_configuration.html#automatic-config-upgrade">automatic config upgrade</a>.
However, you may want to manually adjust the config afterwards.</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>To integrate with an OpenID or SAML Identity Provider, you need to have 
a basic knowledge of those protocols and interact with the Identity Providers to 
obtain all required information, register your services etc. In general, the
necessary steps are:</p>
<h3 id="openid-connect">OpenID Connect</h3>
<ol>
<li><p>Make sure your Onezone service is up and running on your domain, let it be
<code>onezone.example.com</code> for the sake of this example.</p>
</li>
<li><p>Go to the Identity Provider you want to integrate with and find out the 
process of integration, which can be a bit different for each one. The process
might be automatic (an online form or control panel), or require contact with
the administrators.</p>
</li>
<li><p>You will have to register your OpenID Connect client (Onezone), providing 
information such as domain, service name etc. When asked for 
<em>Redirection Endpoint (URL)</em>, specify the following:</p>
<pre><code class="lang-Erlang">https://onezone.example.com/validate_login
</code></pre>
</li>
<li><p>After finishing the registration process, you will be issued a Client Id and 
Client Secret.</p>
</li>
<li><p>Create a new element in the <a href="#supported-idps">supported IdPs list</a>, choosing 
a unique identifier (e.g. <code>google</code>), and fill out all the information, including
the Client Id and Secret. The <code>protocol</code> attribute must be set to <code>openid</code>.</p>
</li>
<li><p>Depending on the IdP, there might be more configuration options regarding the
OpenID flow - some of them are reflected in the <a href="#openid-example">pluginConfig</a>.</p>
</li>
<li><p>Put the <code>auth.config</code> on the Onezone host under <code>/etc/oz_worker/auth.config</code> 
and wait for up to a minute (default config caching time), or restart the 
Onezone service for immediate effect.</p>
</li>
<li><p>You should see your IdP on the <a href="#the-login-page">login page</a>, verify that it 
works correctly by clicking on its icon to go through the login process. In case 
of any errors, examine <a href="../onezone_tutorial.html#logs">Onezone logs</a>.</p>
</li>
<li><p>At any time, you can use the <a href="#test-login-page">test login page</a> to test your 
auth.config without interrupting the Onezone service.</p>
</li>
</ol>
<h3 id="saml">SAML</h3>
<ol>
<li><p>Make sure your Onezone service is up and running on your domain, let it be
<code>onezone.example.com</code> for the sake of this example.</p>
</li>
<li><p>Generate a strong RSA x509 key pair (can be self signed) and put them on your
Onezone host - a tutorial can be found 
<a href="https://www.switch.ch/aai/support/certificates/embeddedcerts-requirements-appendix-a/" target="_blank">here</a></p>
</li>
<li><p>Decide on your SAML Entity Id - typically the domain is used to build it,
and it does not have to point to an existing resource, e.g. 
<code>https://onezone.example.com/sp</code>.</p>
</li>
<li><p>Fill out the <a href="#saml-config">SAML Config</a> section of the <code>auth.config</code>, 
putting down all the required information, including the Entity Id and paths
to the key and cert.</p>
</li>
<li><p>Put the <code>auth.config</code> on the Onezone host under <code>/etc/oz_worker/auth.config</code> 
and wait for up to a minute (default config caching time), or restart the 
Onezone service for immediate effect.</p>
</li>
<li><p>Visit <code>https://onezone.example.com/saml/sp.xml</code> and verify that the advertised
metadata is correct. In case of any errors, examine 
<a href="../onezone_tutorial.html#logs">Onezone logs</a>.</p>
</li>
<li><p>Go to the Identity Provider or organization (e.g. eduGAIN) and find out the 
process of integration, which might be automatic (an online form or control 
panel), or require contact with the administrators.</p>
</li>
<li><p>Register your SAML Service Provider (Onezone). During the process, you will 
most probably be required to provide the URL to the SAML SP Metadata (pt. 6), or 
provide a static XML with the metadata (which can be simply downloaded from this 
endpoint).</p>
</li>
<li><p>Create a new element in the <a href="#supported-idps">supported IdPs list</a>, choosing 
a unique identifier (e.g. <code>elixir</code>), and fill out all the information. The 
<code>protocol</code> attribute must be set to <code>saml</code>.</p>
</li>
<li><p>Reload the <code>auth.config</code> again (pt. 5).</p>
</li>
<li><p>You should see your IdP on the <a href="#the-login-page">login page</a>, verify that it 
works correctly by clicking on its icon to go through the login process. In case 
of any errors, examine <a href="../onezone_tutorial.html#logs">Onezone logs</a>.</p>
</li>
<li><p>At any time, you can use the <a href="#test-login-page">test login page</a> to test your 
auth.config without interrupting the Onezone service.</p>
</li>
</ol>
<h3 id="the-login-page">The login page</h3>
<p>After adding your IdPs to the config file, you should see corresponding icons on
the login page (<code>https://onezone.example.com</code>). If there are more than 7 IdPs,
the first 6 will be shown and the rest hidden in the <code>...</code> button.</p>
<p><img style="display:block;margin:0 auto;" src="../img/login-page.png"></p>
<h2 id="config-file-structure">Config file structure</h2>
<p>This section presents and discusses an exemplary <code>auth.config</code>, section by 
section. The whole file is presented at the end. A template ready to fill out 
can be found in <code>/etc/oz_worker/template.auth.config</code> or 
<a href="#complete-example">at the end of this section</a>.</p>
<h3 id="general-remarks">General remarks</h3>
<p>The <code>auth.config</code> file is written in Erlang format, quite similar to JSON:</p>
<ul>
<li><code>#{Key1 =&gt; Value1, Key2 =&gt; Value2}</code> is a key-value map (can be nested)</li>
<li><code>[ ... ]</code> is a list </li>
<li><code>{A, B}</code> is a two value tuple</li>
<li><code>undefined</code> is a special <code>atom</code> indicating that given parameter is not 
specified (<code>null</code>)</li>
<li><code>&quot;some text&quot;</code> is a string</li>
<li><code>% ...</code> is a comment</li>
<li><code>true</code> or <code>false</code> is a boolean</li>
</ul>
<h3 id="main-sections">Main sections</h3>
<p>The config file has the following sections:</p>
<pre><code class="lang-Erlang">#<span class="hljs-tuple">{
    version =&gt; <span class="hljs-number">2</span>,

    <span class="hljs-comment">% Allows to log in to Onezone using the account from Onepanel (user &amp; password).</span>
    onepanel<span class="hljs-variable">AuthConfig</span> =&gt; #<span class="hljs-tuple">{
        enabled =&gt; true
    }</span>,

    openid<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
        ...
    }</span>,

    saml<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
        ...
    }</span>,

    supported<span class="hljs-variable">Idps</span> =&gt; [
        ...
    ]
}</span>
</code></pre>
<p><code>version</code> - obligatory field that defines the version of the config file, 
currently the newest is <code>2</code>. If no version field is found, version <code>1</code> is 
assumed. Used by Onezone to determine if an upgrade is required.</p>
<h3 id="onepanelauth-config">onepanelAuth Config</h3>
<p><code>onepanelAuthConfig</code> - this section enables or disables onepanelAuth - the 
possibility to log in to Onezone using basic auth credentials (user &amp; password)
from Onezone&apos;s Onepanel. This also controls the possibility to authorize Onezone
REST API operations using basic credentials.</p>
<blockquote>
<p>Note that to allow for login via Onezone GUI, <code>onepanelAuth</code> must be enabled,
and present on the list of supported IdPs (<a href="#supported-idps">see below</a>).</p>
<p>Onepanel admin is always created during installation process. Additional users
can be created <a href="../creating_user_accounts.html">using the API</a>.</p>
</blockquote>
<h3 id="openid-config">OpenID config</h3>
<p><code>openidConfig</code> - this section contains common OpenID configuration and defaults
that will be inherited by all OpenID IdPs. Please examine this snippet from the
<code>/etc/oz_worker/template.auth.config</code> to learn the meaning of certain attributes:</p>
<pre><code class="lang-Erlang">    openid<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
        <span class="hljs-comment">% Enable OpenID login protocol - if disabled, all OpenID IdPs will be</span>
        <span class="hljs-comment">% hidden from the login page.</span>
        enabled =&gt; true,
        <span class="hljs-comment">% Default config for every OpenID IdP, can be overridden in IdP config</span>
        default<span class="hljs-variable">ProtocolConfig</span> =&gt; #<span class="hljs-tuple">{
            <span class="hljs-comment">% Internal plugin that will be used for handling the login process -</span>
            <span class="hljs-comment">% if the IdP uses standard OpenID Connect protocol,</span>
            <span class="hljs-comment">% default_oidc_plugin is the way to go. If not, IdP specific plugin</span>
            <span class="hljs-comment">% can be implemented and specified here.</span>
            plugin =&gt; default_oidc_plugin,
            <span class="hljs-comment">% Config specific for default_oidc_plugin</span>
            plugin<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
                <span class="hljs-comment">% Scope requested from OpenID Connect IdP</span>
                scope =&gt; <span class="hljs-string">&quot;openid email profile&quot;</span>,
                <span class="hljs-comment">% HTTP method used to exchange auth code for an access token: post | get</span>
                access<span class="hljs-variable">TokenAcquireMethod</span> =&gt; post,
                <span class="hljs-comment">% How the client secret should be sent to the IdP: urlencoded | inAuthHeader</span>
                client<span class="hljs-variable">SecretPassMethod</span> =&gt; urlencoded,
                <span class="hljs-comment">% How user&apos;s access token should be sent to the IdP: urlencoded | inAuthHeader</span>
                access<span class="hljs-variable">TokenPassMethod</span> =&gt; in<span class="hljs-variable">AuthHeader</span>,
                <span class="hljs-comment">% Allows to augment requests with additional data</span>
                custom<span class="hljs-variable">Data</span> =&gt; #<span class="hljs-tuple">{
                    <span class="hljs-comment">% Additional data for access_token endpoint request</span>
                    access<span class="hljs-variable">Token</span> =&gt; #<span class="hljs-tuple">{
                        <span class="hljs-comment">% query string or post body parameters (key-value)</span>
                        parameters =&gt; undefined,
                        <span class="hljs-comment">% headers (key-value)</span>
                        headers =&gt; undefined
                    }</span>,
                    <span class="hljs-comment">% Additional data for userinfo endpoint request</span>
                    user<span class="hljs-variable">Info</span> =&gt; #<span class="hljs-tuple">{
                        parameters =&gt; undefined,
                        headers =&gt; undefined
                    }</span>
                }</span>
            }</span>,
            <span class="hljs-comment">% Enables/disables authorization using access tokens from the IdP</span>
            <span class="hljs-comment">% Supported only in OpenID protocol</span>
            authority<span class="hljs-variable">Delegation</span> =&gt; #<span class="hljs-tuple">{
                <span class="hljs-comment">% Enabled for this IdP</span>
                enabled =&gt; true
                <span class="hljs-comment">% The tokenPrefix attribute defines a prefix used to distinguish</span>
                <span class="hljs-comment">% tokens from given IdP. It defaults to &quot;&lt;idp&gt;:&quot;, where &lt;idp&gt; is</span>
                <span class="hljs-comment">% the identifier used in config. Can be overriden in IdP config,</span>
                <span class="hljs-comment">% like the following:</span>
                <span class="hljs-comment">%       tokenPrefix =&gt; &quot;my-idp/&quot;</span>
                <span class="hljs-comment">% Exemplary token usage with with such config:</span>
                <span class="hljs-comment">% curl -H &quot;X-Auth-Token: my-idp/lkj9s87rf1234SDfh6721hqd7991&quot; ...</span>
            }</span>,
            <span class="hljs-comment">% If enabled, Onezone will ask for refresh tokens and store them so</span>
            <span class="hljs-comment">% that it is later possible to acquire user&apos;s access token issued by </span>
            <span class="hljs-comment">% given IdP without him being logged in. Only OIDC IdPs are supported.</span>
            offline<span class="hljs-variable">Access</span> =&gt; true,
            <span class="hljs-comment">% Defines how the attributes from OpenID user info should be mapped</span>
            <span class="hljs-comment">% to Onedata user attributes. Attributes must correspond to existing</span>
            <span class="hljs-comment">% OpenID attributes.</span>
            attribute<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
                subject<span class="hljs-variable">Id</span> =&gt; <span class="hljs-tuple">{required, <span class="hljs-string">&quot;sub&quot;</span>}</span>,
                alias =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;username&quot;</span>}</span>,
                name =&gt; <span class="hljs-tuple">{required, <span class="hljs-tuple">{any, [<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;fullName&quot;</span>]}</span>}</span>,
                emails =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;email&quot;</span>}</span>,
                entitlements =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;groups&quot;</span>}</span>,
                custom =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;name&quot;</span>}</span>
            }</span>,
            <span class="hljs-comment">% Rules for mapping entitlements in the IdP into entitlements in Onedata.</span>
            entitlement<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
                enabled =&gt; false
            }</span>
        }</span>
    }</span>,
</code></pre>
<p>More details:</p>
<ul>
<li><p><code>plugin</code> - specifies the Erlang module that handles the login process. If not 
specified, it defaults to <code>default_oidc_plugin</code>, which can handle most of
standard OpenID Connect IdPs. It is possible to implement your own, specialized 
plugin - see more in <a href="#auth-plugins">Auth plugins</a>. Currently, Onezone supports
one OpenID 1.0 IdP - the PLGrid organization that uses <code>plgrid_openid_plugin</code> - 
see <a href="#plgrid-config-openid-20">this example</a>. </p>
</li>
<li><p><code>pluginConfig</code> - config specific for the <code>default_oidc_plugin</code>, 
<a href="#openid-example">see below</a></p>
</li>
<li><p><code>authorityDelegation</code> - <a href="#authority-delegation">see below</a></p>
</li>
<li><p><code>offlineAccess</code> - <a href="#offline-access">see below</a></p>
</li>
<li><p><code>attributeMapping</code> - <a href="#attribute-mapping">see below</a></p>
</li>
<li><p><code>entitlementMapping</code> - <a href="#entitlement-mapping">see below</a></p>
</li>
</ul>
<h3 id="saml-config">SAML config</h3>
<p><code>samlConfig</code> - similarly to <code>openidConfig</code>, this section contains common SAML
configuration and defaults that will be inherited by all SAML IdPs. 
Please examine this snippet from the <code>/etc/oz_worker/template.auth.config</code>:</p>
<pre><code class="lang-Erlang">    saml<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
        <span class="hljs-comment">% Enable SAML login protocol - if disabled, all SAML IdPs will be hidden</span>
        <span class="hljs-comment">% from the login page and the endpoint serving SAML metadata will be</span>
        <span class="hljs-comment">% disabled.</span>
        enabled =&gt; true,
        <span class="hljs-comment">% Information used to build SAML SP metadata XML, refer to SAML</span>
        <span class="hljs-comment">% documentation for details on below attributes.</span>
        sp<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
            entity<span class="hljs-variable">Id</span> =&gt; <span class="hljs-string">&quot;https://onezone.example.com/sp&quot;</span>,
            cert<span class="hljs-variable">File</span> =&gt; <span class="hljs-string">&quot;/etc/oz_worker/certs/saml_cert.pem&quot;</span>,
            key<span class="hljs-variable">File</span> =&gt; <span class="hljs-string">&quot;/etc/oz_worker/certs/saml_key.pem&quot;</span>,
            organization<span class="hljs-variable">Name</span> =&gt; <span class="hljs-string">&quot;My organization&quot;</span>,
            organization<span class="hljs-variable">DisplayName</span> =&gt; <span class="hljs-string">&quot;My organization&quot;</span>,
            tech<span class="hljs-variable">ContactName</span> =&gt; <span class="hljs-string">&quot;John Doe&quot;</span>,
            tech<span class="hljs-variable">ContactEmail</span> =&gt; <span class="hljs-string">&quot;john.doe@onezone.example.com&quot;</span>,
            <span class="hljs-comment">% Should the metadata be signed with keyFile</span>
            sign<span class="hljs-variable">Metadata</span> =&gt; false,
            <span class="hljs-comment">% Should the Auth Requests be signed with keyFile</span>
            sign<span class="hljs-variable">Requests</span> =&gt; true,
            <span class="hljs-comment">% Should Onezone request signed assertions</span>
            want<span class="hljs-variable">AssertionsSigned</span> =&gt; true
        }</span>,
        <span class="hljs-comment">% Default config for every SAML IdP, can be overridden in IdP config</span>
        default<span class="hljs-variable">ProtocolConfig</span> =&gt; #<span class="hljs-tuple">{
            <span class="hljs-comment">% SSO binding - defines what type of request should be performed</span>
            <span class="hljs-comment">% to redirect the user to the IdP&apos;s login page. Possible values:</span>
            <span class="hljs-comment">% http_redirect (default) or http_post</span>
            preferred<span class="hljs-variable">SsoBinding</span> =&gt; http_redirect,
            <span class="hljs-comment">% Defines how the attributes from SAML user info should be mapped</span>
            <span class="hljs-comment">% to Onedata user attributes. Attributes must correspond to existing</span>
            <span class="hljs-comment">% SAML attributes.</span>
            attribute<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
                subject<span class="hljs-variable">Id</span> =&gt; <span class="hljs-tuple">{required, <span class="hljs-string">&quot;eduPersonTargetedID&quot;</span>}</span>,
                alias =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;eduPersonPrincipalName&quot;</span>}</span>,
                name =&gt; <span class="hljs-tuple">{required, <span class="hljs-tuple">{any, [<span class="hljs-string">&quot;displayName&quot;</span>, <span class="hljs-string">&quot;surName&quot;</span>]}</span>}</span>,
                emails =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;mail&quot;</span>}</span>,
                entitlements =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;eduPersonEntitlement&quot;</span>}</span>,
                custom =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;eduPersonScopedAffiliation&quot;</span>}</span>
            }</span>,
            <span class="hljs-comment">% Rules for mapping entitlements in IdP into entitlements in Onedata.</span>
            entitlement<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
                <span class="hljs-comment">% Enable / disable entitlement mapping for given IdP</span>
                enabled =&gt; true,
                <span class="hljs-comment">% The name of the parent group to which all groups from this IdP</span>
                <span class="hljs-comment">% will belong (reflecting a Virtual Organization)</span>
                vo<span class="hljs-variable">GroupName</span> =&gt; undefined,
                <span class="hljs-comment">% A special group that has admin rights to all groups from this</span>
                <span class="hljs-comment">% IdP.</span>
                admin<span class="hljs-variable">Group</span> =&gt; undefined,
                <span class="hljs-comment">% Erlang module (plugin) that will be used to parse user&apos;s</span>
                <span class="hljs-comment">% entitlements from this IdP</span>
                parser =&gt; nested_entitlement_parser,
                <span class="hljs-comment">% Config specific for the nested_entitlement_parser</span>
                parser<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
                    split<span class="hljs-variable">With</span> =&gt; <span class="hljs-string">&quot;/&quot;</span>,
                    top<span class="hljs-variable">GroupType</span> =&gt; unit,
                    top<span class="hljs-variable">GroupPrivilegesInVo</span> =&gt; member,
                    sub<span class="hljs-variable">GroupsType</span> =&gt; team,
                    sub<span class="hljs-variable">GroupsPrivilegesInParent</span> =&gt; member,
                    user<span class="hljs-variable">Privileges</span> =&gt; member
                }</span>
            }</span>
        }</span>
    }</span>,
</code></pre>
<p>More details:</p>
<ul>
<li><p><code>spConfig</code> - information put here will be used to build the SAML 
Service Provider XML, which will be advertised under 
<code>https://onezone.example.com/saml/sp.xml</code>. Remember that paths provided in 
key / cert field must point to existing files, otherwise the XML will not be 
generated. Refer to SAML documentation for details on certain fields. </p>
</li>
<li><p><code>attributeMapping</code> - <a href="#attribute-mapping">see below</a></p>
</li>
<li><p><code>entitlementMapping</code> - <a href="#entitlement-mapping">see below</a></p>
</li>
</ul>
<h3 id="supported-idps">Supported IdPs</h3>
<p>This section lists all IdPs that will be available to choose from on the login 
page. Button order on the login page corresponds to the entries order. General
structure of this section looks like the following:</p>
<pre><code class="lang-Erlang">    supported<span class="hljs-variable">Idps</span> =&gt; [
        <span class="hljs-comment">% IdP identifier, must be a unique, arbitrary atom</span>
        <span class="hljs-tuple">{my<span class="hljs-variable">IdP</span>, #<span class="hljs-tuple">{
            <span class="hljs-comment">% Configuration of the login page button</span>
            display<span class="hljs-variable">Name</span> =&gt; <span class="hljs-string">&quot;My IdP&quot;</span>,
            <span class="hljs-comment">% Some predefined icons are built-in into the GUI app.</span>
            <span class="hljs-comment">% Their paths start with /assets/images/auth-providers.</span>
            <span class="hljs-comment">% For a custom icon, put it in:</span>
            <span class="hljs-comment">%   /var/www/html/custom/oz_worker/&lt;path&gt;</span>
            <span class="hljs-comment">% And reference it here like this: /custom/&lt;path&gt;</span>
            icon<span class="hljs-variable">Path</span> =&gt; <span class="hljs-string">&quot;/assets/images/auth-providers/default.svg&quot;</span>,
            <span class="hljs-comment">% Background color is useful for icons with transparency. Moreover,</span>
            <span class="hljs-comment">% after selecting an IdP, its icon disappears and a spinner is </span>
            <span class="hljs-comment">% shown - hence background color should be kept the same as icon&apos;s </span>
            <span class="hljs-comment">% background color (if any) for better visual effect.</span>
            icon<span class="hljs-variable">BackgroundColor</span> =&gt; <span class="hljs-string">&quot;#4BD187&quot;</span>,

            <span class="hljs-comment">% Which protocol is used for this IdP</span>
            protocol =&gt; openid,
            <span class="hljs-comment">% Config specific for given protocol</span>
            protocol<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
                ...
            }</span>
        }</span>}</span>,

        <span class="hljs-tuple">{another<span class="hljs-variable">IdP</span>, #<span class="hljs-tuple">{
            ...
        }</span>}</span>,

        ...
    ]
</code></pre>
<p>More details:</p>
<ul>
<li><p><em>IdP identifier</em> (<code>myIdP</code> in this example) - must be unique across the 
<code>auth.config</code> file and be an Erlang atom (basically starting with a lowercase 
letter and containing only letters or underscores; refer to Erlang documentation 
for more). </p>
<blockquote>
<p>Note that the identifier <em>onepanel</em> is reserved for 
<a href="#onepanelauth-example">onepanelAuth</a> and <em>more</em> is reserved for 
internal purposes and cannot be used.</p>
</blockquote>
</li>
<li><p><code>iconPath</code> - path to the static image file that will be used for the IdP icon 
on the login page. Some predefined icons are available under the path
<code>/assets/images/auth-providers/&lt;icon&gt;.svg</code>, to see the full list visit the 
<a href="https://github.com/onedata/onezone-gui/tree/develop/src/public/assets/images/auth-providers" target="_blank">Onezone GUI repo</a>.
To learn how you can add your own icons to the login page, see 
<a href="#custom-icon-guidelines">custom icon guidelines</a>. If not specified, <code>iconPath</code> 
defaults to <code>/assets/images/auth-providers/default.svg</code>.</p>
</li>
<li><p><code>protocol</code> - one of <code>onepanelAuth</code>, <code>saml</code>, <code>openid</code>.</p>
</li>
<li><p><code>protocolConfig</code> - depends on the protocol, see the following sections for 
config examples for each protocol.</p>
</li>
</ul>
<blockquote>
<p>Note that disabling any protocol in <code>onepanelAuthConfig</code>, <code>openidConfig</code> or
<code>samlConfig</code> sections will disable all IdPs using that protocol and hide them 
from the login screen. </p>
</blockquote>
<h4 id="onepanelauth-example">onepanelAuth example</h4>
<pre><code class="lang-Erlang">        <span class="hljs-comment">% onepanel is a special IdP id reserved for onepanel login and the</span>
        <span class="hljs-comment">% only valid config entry using the onepanelAuth protocol.</span>
        <span class="hljs-tuple">{onepanel, #<span class="hljs-tuple">{
            <span class="hljs-comment">% Configuration of the login page button</span>
            display<span class="hljs-variable">Name</span> =&gt; <span class="hljs-string">&quot;Onepanel account&quot;</span>,
            <span class="hljs-comment">% Some predefined icons are built-in into the GUI app.</span>
            <span class="hljs-comment">% Their paths start with /assets/images/auth-providers.</span>
            <span class="hljs-comment">% For a custom icon, put it in:</span>
            <span class="hljs-comment">%   /var/www/html/custom/oz_worker/&lt;path&gt;</span>
            <span class="hljs-comment">% And reference it here like this: /custom/&lt;path&gt;</span>
            icon<span class="hljs-variable">Path</span> =&gt; <span class="hljs-string">&quot;/assets/images/auth-providers/onepanel.svg&quot;</span>,
            <span class="hljs-comment">% Background color is useful for icons with transparency. Moreover,</span>
            <span class="hljs-comment">% after selecting an IdP, its icon disappears and a spinner is</span>
            <span class="hljs-comment">% shown - hence background color should be kept the same as icon&apos;s</span>
            <span class="hljs-comment">% background color (if any).</span>
            icon<span class="hljs-variable">BackgroundColor</span> =&gt; <span class="hljs-string">&quot;#4BD187&quot;</span>,

            <span class="hljs-comment">% Which protocol is used for this IdP - onepanelAuth is the only</span>
            <span class="hljs-comment">% valid one for onepanel IdP.</span>
            protocol =&gt; onepanel<span class="hljs-variable">Auth</span>
        }</span>}</span>,
</code></pre>
<h4 id="openid-example">OpenID example</h4>
<pre><code class="lang-Erlang">        <span class="hljs-tuple">{google, #<span class="hljs-tuple">{
            <span class="hljs-comment">% Configuration of the login page button</span>
            display<span class="hljs-variable">Name</span> =&gt; <span class="hljs-string">&quot;Google&quot;</span>,
            <span class="hljs-comment">% Some predefined icons are built-in into the GUI app.</span>
            <span class="hljs-comment">% Their paths start with /assets/images/auth-providers.</span>
            <span class="hljs-comment">% For a custom icon, put it in:</span>
            <span class="hljs-comment">%   /var/www/html/custom/oz_worker/&lt;path&gt;</span>
            <span class="hljs-comment">% And reference it here like this: /custom/&lt;path&gt;</span>
            icon<span class="hljs-variable">Path</span> =&gt; <span class="hljs-string">&quot;/assets/images/auth-providers/google.svg&quot;</span>,
            <span class="hljs-comment">% Background color is useful for icons with transparency. Moreover,</span>
            <span class="hljs-comment">% after selecting an IdP, its icon disappears and a spinner is</span>
            <span class="hljs-comment">% shown - hence background color should be kept the same as icon&apos;s</span>
            <span class="hljs-comment">% background color (if any).</span>
            icon<span class="hljs-variable">BackgroundColor</span> =&gt; <span class="hljs-string">&quot;#F1514F&quot;</span>,

            <span class="hljs-comment">% Which protocol is used for this IdP</span>
            protocol =&gt; openid,
            <span class="hljs-comment">% Configuration specific for OpenID protocol - overrides the default</span>
            protocol<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
                <span class="hljs-comment">% Internal plugin that will be used for handling the login process -</span>
                <span class="hljs-comment">% if the IdP uses standard OpenID Connect protocol,</span>
                <span class="hljs-comment">% default_oidc_plugin is the way to go. If not, IdP specific plugin</span>
                <span class="hljs-comment">% can be implemented and specified here.</span>
                plugin =&gt; default_oidc_plugin,
                <span class="hljs-comment">% Config specific for default_oidc_plugin</span>
                plugin<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
                    <span class="hljs-comment">% Client Id and secret acquired during registration</span>
                    client<span class="hljs-variable">Id</span> =&gt; <span class="hljs-string">&quot;****************************************************&quot;</span>,
                    client<span class="hljs-variable">Secret</span> =&gt; <span class="hljs-string">&quot;****************************************************&quot;</span>,
                    <span class="hljs-comment">% Defines how to resolve OpenID endpoints</span>
                    endpoints =&gt; #<span class="hljs-tuple">{
                        <span class="hljs-comment">% The XRDS endpoint, will be used if referenced in below endpoints</span>
                        xrds =&gt; <span class="hljs-string">&quot;https://accounts.google.com/.well-known/openid-configuration&quot;</span>,
                        <span class="hljs-comment">% standard OIDC endpoints - literal URLs or tuples {xrds, &quot;key&quot;} -</span>
                        <span class="hljs-comment">% &quot;key&quot; will be extracted from the XRDS JSON.</span>
                        authorize =&gt; <span class="hljs-tuple">{xrds, <span class="hljs-string">&quot;authorization_endpoint&quot;</span>}</span>,
                        access<span class="hljs-variable">Token</span> =&gt; <span class="hljs-tuple">{xrds, <span class="hljs-string">&quot;token_endpoint&quot;</span>}</span>,
                        user<span class="hljs-variable">Info</span> =&gt; <span class="hljs-tuple">{xrds, <span class="hljs-string">&quot;userinfo_endpoint&quot;</span>}</span>
                    }</span>,
                    <span class="hljs-comment">% Scope requested from OpenID Connect IdP</span>
                    scope =&gt; <span class="hljs-string">&quot;openid email profile&quot;</span>,
                    <span class="hljs-comment">% HTTP method used to exchange auth code for an access token: post | get</span>
                    access<span class="hljs-variable">TokenAcquireMethod</span> =&gt; post,
                    <span class="hljs-comment">% How the client secret should be sent to the IdP: urlencoded | inAuthHeader</span>
                    client<span class="hljs-variable">SecretPassMethod</span> =&gt; urlencoded,
                    <span class="hljs-comment">% How user&apos;s access token should be sent to the IdP: urlencoded | inAuthHeader</span>
                    access<span class="hljs-variable">TokenPassMethod</span> =&gt; in<span class="hljs-variable">AuthHeader</span>,
                    <span class="hljs-comment">% Allows to augment requests with additional data</span>
                    custom<span class="hljs-variable">Data</span> =&gt; #<span class="hljs-tuple">{
                        <span class="hljs-comment">% Additional data for access_token endpoint request</span>
                        access<span class="hljs-variable">Token</span> =&gt; #<span class="hljs-tuple">{
                            <span class="hljs-comment">% query string or post body parameters (key-value)</span>
                            parameters =&gt; #<span class="hljs-tuple">{<span class="hljs-string">&quot;param1&quot;</span> =&gt; <span class="hljs-string">&quot;val1&quot;</span>}</span>,
                            <span class="hljs-comment">% headers (key-value)</span>
                            headers =&gt; #<span class="hljs-tuple">{<span class="hljs-string">&quot;header1&quot;</span> =&gt; <span class="hljs-string">&quot;val1&quot;</span>}</span>
                        }</span>,
                        <span class="hljs-comment">% Additional data for userinfo endpoint request</span>
                        user<span class="hljs-variable">Info</span> =&gt; #<span class="hljs-tuple">{
                            parameters =&gt; #<span class="hljs-tuple">{<span class="hljs-string">&quot;param2&quot;</span> =&gt; <span class="hljs-string">&quot;val2&quot;</span>}</span>,
                            headers =&gt; #<span class="hljs-tuple">{<span class="hljs-string">&quot;header2&quot;</span> =&gt; <span class="hljs-string">&quot;val2&quot;</span>}</span>
                        }</span>
                    }</span>
                }</span>,

                <span class="hljs-comment">% Enables/disables authorization using access tokens from the IdP</span>
                <span class="hljs-comment">% Supported only in OpenID protocol</span>
                authority<span class="hljs-variable">Delegation</span> =&gt; #<span class="hljs-tuple">{
                    <span class="hljs-comment">% Enabled for this IdP</span>
                    enabled =&gt; true,
                    <span class="hljs-comment">% The tokenPrefix attribute defines a prefix used to distinguish</span>
                    <span class="hljs-comment">% tokens from given IdP.</span>
                    <span class="hljs-comment">% Exemplary token usage with the below such config:</span>
                    <span class="hljs-comment">% curl -H &quot;X-Auth-Token: google:lkj9s87rf1234SDfh6721hqd7991&quot; ...</span>
                    token<span class="hljs-variable">Prefix</span> =&gt; <span class="hljs-string">&quot;google:&quot;</span>
                }</span>,
                <span class="hljs-comment">% If enabled, Onezone will ask for refresh tokens and store them so</span>
                <span class="hljs-comment">% that it is later possible to acquire user&apos;s access token issued by </span>
                <span class="hljs-comment">% given IdP without him being logged in. Only OIDC IdPs are supported.</span>
                offline<span class="hljs-variable">Access</span> =&gt; true,
                <span class="hljs-comment">% Defines how the attributes from OpenID user info should be mapped</span>
                <span class="hljs-comment">% to Onedata user attributes. Attributes must correspond to existing</span>
                <span class="hljs-comment">% OpenID attributes.</span>
                attribute<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
                    subject<span class="hljs-variable">Id</span> =&gt; <span class="hljs-tuple">{required, <span class="hljs-string">&quot;sub&quot;</span>}</span>,
                    name =&gt; <span class="hljs-tuple">{required, <span class="hljs-tuple">{any, [<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;fullName&quot;</span>]}</span>}</span>,
                    alias =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;username&quot;</span>}</span>,
                    emails =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;email&quot;</span>}</span>,
                    entitlements =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;given_name&quot;</span>}</span>,
                    custom =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;given_name&quot;</span>}</span>
                }</span>,
                <span class="hljs-comment">% Rules for mapping entitlements in the IdP into entitlements in Onedata.</span>
                entitlement<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
                    enabled =&gt; true,
                    <span class="hljs-comment">% The name of the parent group to which all groups from this IdP</span>
                    <span class="hljs-comment">% will belong (reflecting a Virtual Organization)</span>
                    vo<span class="hljs-variable">GroupName</span> =&gt; undefined,
                    <span class="hljs-comment">% A special group that has admin rights to all groups from this</span>
                    <span class="hljs-comment">% IdP.</span>
                    admin<span class="hljs-variable">Group</span> =&gt; undefined,
                    parser =&gt; flat_entitlement_parser,
                    parser<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
                        group<span class="hljs-variable">Type</span> =&gt; team,
                        group<span class="hljs-variable">PrivilegesInVo</span> =&gt; member,
                        user<span class="hljs-variable">Privileges</span> =&gt; member
                    }</span>
                }</span>
            }</span>
        }</span>}</span>,
</code></pre>
<p>This IdP will inherit all configuration from 
<code>openidConfig -&gt; defaultProtocolConfig</code>, apart from the parameters that are
overriden here. </p>
<blockquote>
<p>Note: to nullify a parameter specified in default config, it must be
explicitly set to <code>undefined</code> in IdP config - otherwise it will be inherited.</p>
</blockquote>
<p>More details on <code>pluginConfig</code>:</p>
<ul>
<li><p><code>endpoints</code> - this section defines how to resolve standard OpenID endpoints 
(<code>authorize</code>, <code>accessToken</code>, <code>userInfo</code>). Typical IdPs use an XRDS endpoint to 
serve a JSON containing all required URLs. To use the XRDS, simply specify the 
<code>xrds</code> field and reference certain keys from the JSON like in the above example.
It is also possible to enter the URLs directly, in such case the XRDS endpoint 
is not required. The <code>userInfo</code> endpoint is a special case that allows to 
specify more than one endpoint - information gathered from them will be 
aggregated. Examine the following example using direct URLs and multiple 
userInfo endpoints:</p>
<pre><code class="lang-Erlang">endpoints =&gt; #<span class="hljs-tuple">{
  authorize =&gt; <span class="hljs-string">&quot;https://github.com/login/oauth/authorize&quot;</span>,
  access<span class="hljs-variable">Token</span> =&gt; <span class="hljs-string">&quot;https://github.com/login/oauth/access_token&quot;</span>,
  user<span class="hljs-variable">Info</span> =&gt; [
      <span class="hljs-string">&quot;https://api.github.com/user&quot;</span>,
      <span class="hljs-tuple">{<span class="hljs-string">&quot;emails&quot;</span>, <span class="hljs-string">&quot;https://api.github.com/user/emails&quot;</span>}</span>
  ]
}</span>,
</code></pre>
<p>In the above example, JSON collected from <code>&quot;https://api.github.com/user&quot;</code> will
be appended as-is to user attributes, and the JSON from 
<code>&quot;https://api.github.com/user/emails&quot;</code> will be inserted under the key <code>&quot;emails&quot;</code>.</p>
</li>
<li><p><code>scope</code> - what attributes are requested from the IdP. Defaults to 
<code>&quot;openid email profile&quot;</code>.</p>
</li>
<li><p><code>accessTokenAcquireMethod</code> - <code>get</code> or <code>post</code>, defines the HTTP method used
to exchange auth code for an access token. Defaults to <code>post</code>.</p>
</li>
<li><p><code>clientSecretPassMethod</code> - <code>urlencoded</code> or <code>inAuthHeader</code>, defines how the
Client Id and Secret should be sent to the IdP&apos;s access token endpoint. 
Defaults to <code>urlencoded</code>.</p>
</li>
<li><p><code>accessTokenPassMethod</code> - <code>urlencoded</code> or <code>inAuthHeader</code>, defines how the
Access Token should be sent to the IdP&apos;s userinfo endpoint. 
Defaults to <code>urlencoded</code>.</p>
</li>
<li><p><code>customData</code> - allows to augment requests to the IdP with arbitrary data,
appended to the request data (query string or post body) or headers. Can be
specified for <code>accessToken</code> or <code>userInfo</code> endpoints.</p>
</li>
</ul>
<p>Refer to the IdP&apos;s documentation to find out what should be inserted in the
attributes: <code>endpoints</code>, <code>scope</code>, <code>accessTokenAcquireMethod</code>, 
<code>clientSecretPassMethod</code>, <code>accessTokenPassMethod</code>, <code>customData</code>. 
Note that some of them can be configurable on the IdP side too.</p>
<h4 id="saml-example">SAML example</h4>
<pre><code class="lang-Erlang">        <span class="hljs-tuple">{elixir, #<span class="hljs-tuple">{
            <span class="hljs-comment">% Configuration of the login page button</span>
            display<span class="hljs-variable">Name</span> =&gt; <span class="hljs-string">&quot;Elixir&quot;</span>,
            <span class="hljs-comment">% To use the icon like below, put it in:</span>
            <span class="hljs-comment">%   /var/www/html/custom/oz_worker/images/elixir.svg</span>
            icon<span class="hljs-variable">Path</span> =&gt; <span class="hljs-string">&quot;/custom/images/elixir.svg&quot;</span>,
            <span class="hljs-comment">% Background color is useful for icons with transparency. Moreover,</span>
            <span class="hljs-comment">% after selecting an IdP, its icon disappears and a spinner is</span>
            <span class="hljs-comment">% shown - hence background color should be kept the same as icon&apos;s</span>
            <span class="hljs-comment">% background color (if any).</span>
            icon<span class="hljs-variable">BackgroundColor</span> =&gt; <span class="hljs-string">&quot;#FF7A04&quot;</span>,

            <span class="hljs-comment">% Which protocol is used for this IdP</span>
            protocol =&gt; saml,
            <span class="hljs-comment">% Configuration specific for SAML protocol - overrides the default</span>
            protocol<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
                <span class="hljs-comment">% URL pointing to IdP SAML metadata XML</span>
                metadata<span class="hljs-variable">Url</span> =&gt; <span class="hljs-string">&quot;https://login.elixir-czech.org/proxy/saml2/idp/metadata.php&quot;</span>,
                <span class="hljs-comment">% SSO binding - defines what type of request should be performed</span>
                <span class="hljs-comment">% to redirect the user to the IdP&apos;s login page. Possible values:</span>
                <span class="hljs-comment">% http_redirect (default) or http_post</span>
                preferred<span class="hljs-variable">SsoBinding</span> =&gt; http_redirect,
                <span class="hljs-comment">% Defines how the attributes from SAML user info should be mapped</span>
                <span class="hljs-comment">% to Onedata user attributes. Attributes must correspond to existing</span>
                <span class="hljs-comment">% SAML attributes.</span>
                attribute<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
                    subject<span class="hljs-variable">Id</span> =&gt; <span class="hljs-tuple">{required, <span class="hljs-string">&quot;eduPersonUniqueId&quot;</span>}</span>,
                    alias =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;eduPersonPrincipalName&quot;</span>}</span>,
                    name =&gt; <span class="hljs-tuple">{required, <span class="hljs-string">&quot;displayName&quot;</span>}</span>,
                    emails =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;mail&quot;</span>}</span>,
                    entitlements =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;eduPersonEntitlement&quot;</span>}</span>,
                    custom =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;eduPersonScopedAffiliation&quot;</span>}</span>
                }</span>,
                <span class="hljs-comment">% Rules for mapping entitlements in IdP into entitlements in Onedata.</span>
                entitlement<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
                    <span class="hljs-comment">% Enable / disable entitlement mapping for given IdP</span>
                    enabled =&gt; true,
                    <span class="hljs-comment">% The name of the parent group to which all groups from this IdP</span>
                    <span class="hljs-comment">% will belong (reflecting a Virtual Organization)</span>
                    vo<span class="hljs-variable">GroupName</span> =&gt; <span class="hljs-string">&quot;Elixir&quot;</span>,
                    <span class="hljs-comment">% A special group that has admin rights to all groups from this</span>
                    <span class="hljs-comment">% IdP.</span>
                    admin<span class="hljs-variable">Group</span> =&gt; <span class="hljs-string">&quot;elixir_test:tsi-admin&quot;</span>,
                    <span class="hljs-comment">% Erlang module (plugin) that will be used to parse user&apos;s</span>
                    <span class="hljs-comment">% entitlements from this IdP</span>
                    parser =&gt; nested_entitlement_parser,
                    <span class="hljs-comment">% Config specific for the nested_entitlement_parser</span>
                    parser<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
                        split<span class="hljs-variable">With</span> =&gt; <span class="hljs-string">&quot;:&quot;</span>,
                        top<span class="hljs-variable">GroupType</span> =&gt; unit,
                        top<span class="hljs-variable">GroupPrivilegesInVo</span> =&gt; member,
                        sub<span class="hljs-variable">GroupsType</span> =&gt; team,
                        sub<span class="hljs-variable">GroupsPrivilegesInParent</span> =&gt; member,
                        user<span class="hljs-variable">Privileges</span> =&gt; member
                    }</span>
                }</span>
            }</span>
        }</span>}</span>
    ]
</code></pre>
<p>This IdP will inherit all configuration from 
<code>samlConfig -&gt; defaultProtocolConfig</code>, apart from the parameters that are
overriden here. </p>
<blockquote>
<p>Note: to nullify a parameter specified in default config, it must be
explicitly set to undefined in IdP config - otherwise it will be inherited.</p>
</blockquote>
<p>Unlike <code>openid</code>, SAML IdPs do not have pluginable handlers and hence there is
no <code>plugin</code> or <code>pluginConfig</code> section (all config is expressed on the 
<code>procotolConfig</code> level).</p>
<h4 id="openid--saml-similarities">OpenID &amp; SAML similarities</h4>
<p>Note that the following sections in <code>protocolConfig</code> of <code>openid</code> and <code>saml</code> 
protocols are syntactically and functionally the same:</p>
<ul>
<li><p><code>attributeMapping</code> - <a href="#attribute-mapping">see below</a></p>
</li>
<li><p><code>entitlementMapping</code> - <a href="#entitlement-mapping">see below</a></p>
</li>
</ul>
<p>However, only the <code>openid</code> protocol supports 
<a href="#authority-delegation">authorityDelegation</a> and <a href="#offline-access">offlineAccess</a>.</p>
<h3 id="authority-delegation">Authority Delegation</h3>
<p>Onezone service supports authority delegation using other OpenID connect
providers. When enabled, it allows users to directly use their access tokens
(e.g. from GitHub) to authorize operations in Onezone.</p>
<p>In order to enable this feature for specific IdP, an <code>authorityDelegation</code> 
section has to be added to the IdP&apos;s protocol config, for instance:</p>
<pre><code class="lang-Erlang">authority<span class="hljs-variable">Delegation</span> =&gt; #<span class="hljs-tuple">{
    <span class="hljs-comment">% Enabled for this IdP</span>
    enabled =&gt; true,
    <span class="hljs-comment">% The tokenPrefix attribute defines a prefix used to distinguish</span>
    <span class="hljs-comment">% tokens from given IdP. It defaults to &quot;&lt;idp&gt;:&quot;, where &lt;idp&gt; is</span>
    <span class="hljs-comment">% the IdP identifier used in config.</span>
    token<span class="hljs-variable">Prefix</span> =&gt; <span class="hljs-string">&quot;github/&quot;</span>
}</span>,
</code></pre>
<p>In such case, users can directly access the Onezone API using access tokens
obtained from the IdP by prefixing the access token and placing it in the 
<code>X-Auth-Token</code> or <code>Authorization: Bearer &lt;token&gt;</code> header:</p>
<pre><code>X-Auth-Token: github/e72e16c7e42f292c6912e7710c838347ae178b4a
Authorization: Bearer github/e72e16c7e42f292c6912e7710c838347ae178b4a
</code></pre><p>where <code>e72e16c7e42f292c6912e7710c838347ae178b4a</code> is the actual GitHub access 
token.</p>
<h3 id="offline-access">Offline access</h3>
<p>Onezone service can act as a dispenser for access tokens issued by IdPs that 
users are logging in with. If offline access is enabled in config, Onezone will
ask for refresh tokens and store them so that it is later possible to acquire
user&apos;s access token issued by given IdP without him being logged in. Only OIDC 
IdPs are supported.</p>
<p>Offline access must be supported by given IdP for this to work.</p>
<p>In order to enable this feature for specific IdP, an <code>offlineAccess</code> 
field has to be added to the IdP&apos;s protocol config, for instance:</p>
<pre><code class="lang-Erlang">offline<span class="hljs-variable">Access</span> =&gt; <span class="hljs-literal">true</span>,
</code></pre>
<blockquote>
<p>NOTE: enabling <code>offlineAccess</code> will cause Onezone to add the 
<code>access_type=offline</code> parameter to OIDC authorization request. Some IdPs might
also require adding the <code>offline_access</code> scope, in which case you must add it
manually in the <code>scope</code> field of the plugin config. </p>
<p>NOTE: when combined with enabled authorityDelegation, this
introduces some security considerations. Every provider which is
actively used by a user will be able to acquire his IdP access token and hence 
be able to gain his full authorization using authority delegation.</p>
</blockquote>
<p>IdP access tokens can be acquired using the Onezone 
<a href="https://onedata.org/#/home/api/latest/onezone?anchor=operation/acquire_idp_access_token" target="_blank">REST API</a>.</p>
<h3 id="attribute-mapping">Attribute Mapping</h3>
<p>Onezone collects information about users from SAML / OpenID, including:</p>
<ul>
<li><p><code>subjectId</code> - user&apos;s unique identifier within the IdP, must be persistent
(unchanging in time), mandatory (login will fail if mapping cannot be found)</p>
</li>
<li><p><code>name</code> - user&apos;s displayed name</p>
</li>
<li><p><code>alias</code> - user&apos;s short, unique identifier - used as an alternative to 
identifying users by name, is optional and can be set/unset anytime</p>
</li>
<li><p><code>emails</code> - a list of user&apos;s emails</p>
</li>
<li><p><code>entitlements</code> - a list of user&apos;s entitlements to groups in the IdP, which
can later be mapped to groups in Onedata using 
<a href="#entitlement-mapping">entitlement mapping</a>.</p>
</li>
<li><p><code>custom</code> - arbitrary JSON received from the IdP, can be later useful
during integration with storage systems (<a href="#luma-integration">LUMA</a>).</p>
</li>
</ul>
<p>These attributes constitute a linked account object. It can be expressed in JSON 
format:</p>
<pre><code class="lang-JSON">{
    <span class="hljs-string">&quot;idp&quot;</span>: <span class="hljs-string">&quot;elixir&quot;</span>,
    <span class="hljs-string">&quot;subjectId&quot;</span>: <span class="hljs-string">&quot;1234567890@elixir-europe.org&quot;</span>,
    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;John Doe&quot;</span>,
    <span class="hljs-string">&quot;alias&quot;</span>: <span class="hljs-string">&quot;jodoe&quot;</span>,
    <span class="hljs-string">&quot;emails&quot;</span>: [<span class="hljs-string">&quot;john.doe@google.com&quot;</span>],
    <span class="hljs-string">&quot;entitlements&quot;</span>: [<span class="hljs-string">&quot;group1&quot;</span>, <span class="hljs-string">&quot;group2&quot;</span>],
    <span class="hljs-string">&quot;custom&quot;</span>: {
        <span class="hljs-string">&quot;organization&quot;</span>: <span class="hljs-string">&quot;My Organization&quot;</span>,
        <span class="hljs-string">&quot;roles&quot;</span>: [<span class="hljs-string">&quot;role1&quot;</span>, <span class="hljs-string">&quot;role2&quot;</span>, <span class="hljs-string">&quot;role3&quot;</span>]
    }
}
</code></pre>
<p>Attribute mapping is used to map attributes received from Identity Providers
into linked account objects in Onedata.</p>
<h4 id="merging-linked-accounts-into-onedata-user">Merging linked accounts into Onedata user</h4>
<p>Every user in Onedata can have one or more linked accounts. Upon the first
login, a new Onedata user is created based on information gathered from the IdP
that he logged in with, according to the following formula:</p>
<pre><code>userId: md5(&lt;IdP&gt;:&lt;subjectId&gt;)
name: &lt;name&gt;        % can be undefined
alias: &lt;alias&gt;        % can be undefined
emails: &lt;emails&gt;
linkedAccounts: [&lt;linked-acc-json&gt;]
</code></pre><p>From now on, <code>userId</code> in Onedata will not change (i.e. it is derived from the
<code>subjectId</code> in the first IdP the user has logged in with). <code>name</code> and <code>alias</code> 
will also be unchanged by consecutive log-ins, even if the IdP attributes 
change. <code>emails</code> are always a list of emails aggregated from all linked 
accounts.</p>
<blockquote>
<p>New accounts can be linked after logging in, in user profile menu. It is not
possible to link the same account to two different users.</p>
</blockquote>
<p>Complete user data, after logging in with the above Elixir account, would look 
like the following:</p>
<pre><code class="lang-JSON">{
    <span class="hljs-string">&quot;userId&quot;</span>: <span class="hljs-string">&quot;fa81af19783e3eea7d7e80c1d89f5370&quot;</span>,
    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;John Doe&quot;</span>,
    <span class="hljs-string">&quot;alias&quot;</span>: <span class="hljs-string">&quot;jodoe&quot;</span>,
    <span class="hljs-string">&quot;emails&quot;</span>: [<span class="hljs-string">&quot;john.doe@google.com&quot;</span>],
    <span class="hljs-string">&quot;linkedAccounts&quot;</span>: [{
        <span class="hljs-string">&quot;idp&quot;</span>: <span class="hljs-string">&quot;elixir&quot;</span>,
        <span class="hljs-string">&quot;subjectId&quot;</span>: <span class="hljs-string">&quot;1234567890@elixir-europe.org&quot;</span>,
        <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;John Doe&quot;</span>,
        <span class="hljs-string">&quot;alias&quot;</span>: <span class="hljs-string">&quot;jodoe&quot;</span>,
        <span class="hljs-string">&quot;emails&quot;</span>: [<span class="hljs-string">&quot;john.doe@google.com&quot;</span>],
        <span class="hljs-string">&quot;entitlements&quot;</span>: [<span class="hljs-string">&quot;group1&quot;</span>, <span class="hljs-string">&quot;group2&quot;</span>],
        <span class="hljs-string">&quot;custom&quot;</span>: {
            <span class="hljs-string">&quot;organization&quot;</span>: <span class="hljs-string">&quot;Elixir&quot;</span>,
            <span class="hljs-string">&quot;roles&quot;</span>: [<span class="hljs-string">&quot;role1&quot;</span>, <span class="hljs-string">&quot;role2&quot;</span>, <span class="hljs-string">&quot;role3&quot;</span>]
        }
    }]
}
</code></pre>
<p>Assume that user links another account, e.g. from Indigo, which yield the 
following linked account object:</p>
<pre><code class="lang-JSON">{
    <span class="hljs-string">&quot;idp&quot;</span>: <span class="hljs-string">&quot;indigo&quot;</span>,
    <span class="hljs-string">&quot;subjectId&quot;</span>: <span class="hljs-string">&quot;12345678-1234-1234-1234-12345678&quot;</span>,
    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;John Doe&quot;</span>,
    <span class="hljs-string">&quot;alias&quot;</span>: <span class="hljs-string">&quot;john-doe&quot;</span>,
    <span class="hljs-string">&quot;emails&quot;</span>: [<span class="hljs-string">&quot;john.doe@yahoo.com&quot;</span>],
    <span class="hljs-string">&quot;entitlements&quot;</span>: [<span class="hljs-string">&quot;Users&quot;</span>, <span class="hljs-string">&quot;Developers&quot;</span>],
    <span class="hljs-string">&quot;custom&quot;</span>: {
        <span class="hljs-string">&quot;gender&quot;</span>: <span class="hljs-string">&quot;M&quot;</span>
    }
}
</code></pre>
<p>After that operation, the complete user data would look like the following:</p>
<pre><code class="lang-JSON">{
    <span class="hljs-string">&quot;userId&quot;</span>: <span class="hljs-string">&quot;fa81af19783e3eea7d7e80c1d89f5370&quot;</span>,
    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;John Doe&quot;</span>,
    <span class="hljs-string">&quot;emails&quot;</span>: [<span class="hljs-string">&quot;john.doe@google.com&quot;</span>, <span class="hljs-string">&quot;john.doe@yahoo.com&quot;</span>],
    <span class="hljs-string">&quot;alias&quot;</span>: <span class="hljs-string">&quot;jodoe&quot;</span>,
    <span class="hljs-string">&quot;linkedAccounts&quot;</span>: [{
        <span class="hljs-string">&quot;idp&quot;</span>: <span class="hljs-string">&quot;elixir&quot;</span>,
        <span class="hljs-string">&quot;subjectId&quot;</span>: <span class="hljs-string">&quot;1234567890@elixir-europe.org&quot;</span>,
        <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;John Doe&quot;</span>,
        <span class="hljs-string">&quot;alias&quot;</span>: <span class="hljs-string">&quot;jodoe&quot;</span>,
        <span class="hljs-string">&quot;emails&quot;</span>: [<span class="hljs-string">&quot;john.doe@google.com&quot;</span>],
        <span class="hljs-string">&quot;entitlements&quot;</span>: [<span class="hljs-string">&quot;group1&quot;</span>, <span class="hljs-string">&quot;group2&quot;</span>],
        <span class="hljs-string">&quot;custom&quot;</span>: {
            <span class="hljs-string">&quot;organization&quot;</span>: <span class="hljs-string">&quot;Elixir&quot;</span>,
            <span class="hljs-string">&quot;roles&quot;</span>: [<span class="hljs-string">&quot;role1&quot;</span>, <span class="hljs-string">&quot;role2&quot;</span>, <span class="hljs-string">&quot;role3&quot;</span>]
        }
    },{
        <span class="hljs-string">&quot;idp&quot;</span>: <span class="hljs-string">&quot;indigo&quot;</span>,
        <span class="hljs-string">&quot;subjectId&quot;</span>: <span class="hljs-string">&quot;12345678-1234-1234-1234-12345678&quot;</span>,
        <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;John Doe&quot;</span>,
        <span class="hljs-string">&quot;alias&quot;</span>: <span class="hljs-string">&quot;john-doe&quot;</span>,
        <span class="hljs-string">&quot;emails&quot;</span>: [<span class="hljs-string">&quot;john.doe@yahoo.com&quot;</span>],
        <span class="hljs-string">&quot;entitlements&quot;</span>: [<span class="hljs-string">&quot;Users&quot;</span>, <span class="hljs-string">&quot;Developers&quot;</span>],
        <span class="hljs-string">&quot;custom&quot;</span>: {
            <span class="hljs-string">&quot;gender&quot;</span>: <span class="hljs-string">&quot;M&quot;</span>
          }
    }]
}
</code></pre>
<p>This user data constitutes input in <a href="#luma-integration">Local User Mapping</a> - 
when mapping Onedata users into storage users within Oneprovider.</p>
<blockquote>
<p>User data can also be retrieved using the 
<a href="#/home/api/latest/onezone?anchor=operation/get_current_user">REST API</a>.</p>
</blockquote>
<h4 id="attribute-mapping-rules">Attribute mapping rules</h4>
<p>Attribute mapping is performed based on the IdP configuration in  <code>auth.config</code>. 
The section looks like the following:</p>
<pre><code class="lang-Erlang">attribute<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
  subject<span class="hljs-variable">Id</span> =&gt; <span class="hljs-tuple">{required, &lt;rule&gt;}</span>,
  name =&gt; <span class="hljs-tuple">{optional, &lt;rule&gt;}</span>,
  alias =&gt; undefined,
  emails =&gt; <span class="hljs-tuple">{optional, &lt;rule&gt;}</span>,
  entitlements =&gt; <span class="hljs-tuple">{plugin, my_entitlement_parser}</span>,
  custom =&gt; <span class="hljs-tuple">{required, &lt;rule&gt;}</span>
}</span>
</code></pre>
<p>Allowed mappings are:</p>
<ul>
<li><p><code>undefined</code> - this attribute is not mapped at all, it is equivalent to 
deleting the attribute mapping completely from the config.</p>
</li>
<li><p><code>{required, &lt;rule&gt;}</code> - this attribute will be mapped according to <code>&lt;rule&gt;</code>, if 
it&apos;s not possible to resolve the attribute the login will fail.</p>
</li>
<li><p><code>{optional, &lt;rule&gt;}</code> - this attribute will be mapped according to <code>&lt;rule&gt;</code>, if 
it&apos;s not possible to resolve the attribute the mapped value will be empty 
(undefined).</p>
</li>
<li><p><code>{plugin, Module}</code> - allows to use arbitrary plugin to perform the mapping. 
<code>Module:map_attribute(Attr, IdPAttributes)</code> will be called and should return the 
resolved attribute value as <code>{ok, Value}</code>, or <code>{error, Reason}</code> if it could not 
be found. IdPAttributes is an Erlang map (keys are binaries). Module must be 
placed in the auth plugins directory (/etc/oz_worker/plugins) to be loaded 
during Onezone startup. For more info, refer to 
<a href="#attribute-mapper">attribute mapper</a> Example:</p>
<pre><code class="lang-Erlang">name =&gt; <span class="hljs-tuple">{plugin, my_attr_mapper}</span>
<span class="hljs-comment">% would call my_attr_mapper:map_attribute(name, IdPAttributes)</span>
</code></pre>
</li>
</ul>
<p><code>&lt;rule&gt;</code> can be a complex, nested term built from the following expressions:</p>
<ul>
<li><p><code>&quot;attrName&quot;</code> - name of an attribute. If such key is present in attributes
received from IdP, the rule is expanded to its value. Example:</p>
<pre><code class="lang-Erlang">id =&gt; <span class="hljs-tuple">{required, <span class="hljs-string">&quot;id&quot;</span>}</span>
emails =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;mail&quot;</span>}</span>
</code></pre>
</li>
<li><p><code>{keyValue, &quot;attrName&quot;}</code> - similar to the &quot;attrName&quot; rule, but the result
will contain both the attribute key and value as a JSON object. Example:</p>
<pre><code class="lang-Erlang">custom =&gt; <span class="hljs-tuple">{optional, <span class="hljs-tuple">{key<span class="hljs-variable">Value</span>, <span class="hljs-string">&quot;schacHomeOrganization&quot;</span>}</span>}</span>
<span class="hljs-comment">% would set user&apos;s custom value to</span>
<span class="hljs-tuple">{<span class="hljs-string">&quot;custom&quot;</span>: <span class="hljs-tuple">{<span class="hljs-string">&quot;schacHomeOrganization&quot;</span>: <span class="hljs-string">&quot;orgName&quot;</span>}</span>}</span>
<span class="hljs-comment">% instead of just</span>
<span class="hljs-tuple">{<span class="hljs-string">&quot;custom&quot;</span>: <span class="hljs-string">&quot;orgName&quot;</span>}</span>
</code></pre>
</li>
<li><p><code>{keyValue, &quot;keyName&quot;, &lt;rule&gt;}</code> - similar to the <code>{keyValue, &quot;attrName&quot;}</code>, but
<code>&lt;rule&gt;</code> can expand to any value and the key in result JSON can be specified 
explicitly. Example:</p>
<pre><code class="lang-Erlang">custom =&gt; <span class="hljs-tuple">{optional, <span class="hljs-tuple">{key<span class="hljs-variable">Value</span>, <span class="hljs-string">&quot;organization&quot;</span>, <span class="hljs-string">&quot;schacHomeOrganization&quot;</span>}</span>}</span>
<span class="hljs-comment">% would set user&apos;s custom value to:</span>
<span class="hljs-tuple">{<span class="hljs-string">&quot;custom&quot;</span>: <span class="hljs-tuple">{<span class="hljs-string">&quot;organization&quot;</span>: <span class="hljs-string">&quot;orgName&quot;</span>}</span>}</span>
</code></pre>
</li>
<li><p><code>{str, &quot;literal&quot;}</code> - the rule will be expanded to the literal string. Example:</p>
<pre><code class="lang-Erlang">name =&gt; <span class="hljs-tuple">{required, <span class="hljs-tuple">{str, <span class="hljs-string">&quot;John Doe&quot;</span>}</span>}</span>
<span class="hljs-comment">% would make all users have the same name; `&quot;John Doe&quot;</span>
</code></pre>
</li>
<li><p><code>{str_list, [&quot;str1&quot;, &quot;str2&quot;]}</code> - the rule will be expanded to a list of
literal strings. Example:</p>
<pre><code class="lang-Erlang">entitlements =&gt; {required, {str_list, [&quot;group1&quot;, &quot;group2, &quot;group3&quot;]}}
% would make all users have the same three entitlements
</code></pre>
</li>
<li><p><code>{nested, [&quot;key1&quot;, &quot;key2&quot;, {list, &quot;key3&quot;}]}</code> - the rule will be expanded to a 
value nested in a JSON. Special expression: <code>{list, key}</code> can be used to parse a
list of JSON objects, each of which has certain key. Example:</p>
<pre><code class="lang-Erlang">emails =&gt; <span class="hljs-tuple">{nested, [<span class="hljs-string">&quot;emails&quot;</span>, <span class="hljs-tuple">{list, <span class="hljs-string">&quot;email&quot;</span>}</span>]}</span>
<span class="hljs-comment">% would parse the following JSON:</span>
<span class="hljs-tuple">{<span class="hljs-string">&quot;emails&quot;</span>: [
  <span class="hljs-tuple">{<span class="hljs-string">&quot;email&quot;</span>: <span class="hljs-string">&quot;abc@example.com&quot;</span>, <span class="hljs-string">&quot;verified&quot;</span>: true}</span>,
  <span class="hljs-tuple">{<span class="hljs-string">&quot;email&quot;</span>: <span class="hljs-string">&quot;def@example.com&quot;</span>, <span class="hljs-string">&quot;verified&quot;</span>: false}</span>
]}</span>
<span class="hljs-comment">% into the following list of emails:</span>
[<span class="hljs-string">&quot;abc@example.com&quot;</span>, <span class="hljs-string">&quot;def@example.com&quot;</span>]
</code></pre>
</li>
<li><p><code>{replace, &quot;regex&quot;, &quot;replacement&quot;, &lt;rule&gt;}</code> - replaces matching substring with
given replacement. <code>&lt;rule&gt;</code> can expand to a string or a list of strings (in which 
case the operation will be repeated on every string). Underneath, it uses 
Erlang&apos;s <code>re:replace/4</code> function, which means that regexes and replacements must 
be built according to Erlang&apos;s (slightly different) regex format. Example:</p>
<pre><code class="lang-Erlang">name =&gt; <span class="hljs-tuple">{replace, <span class="hljs-string">&quot;(.*) (.*) (.*)&quot;</span>, <span class="hljs-string">&quot;\\1 \\3&quot;</span>, <span class="hljs-string">&quot;fullName&quot;</span>}</span>
<span class="hljs-comment">% would change all 3-part names to 2-part, leaving out the middle one </span>
<span class="hljs-comment">% (e.g. John II Doe -&gt; John Doe). Unmatched strings are not modified.</span>
</code></pre>
</li>
<li><p><code>{concat, [&lt;ruleA&gt;, &lt;ruleB&gt;, ...]}</code> - concatenates a list of strings into one
string, one by one: <code>((&lt;ruleA&gt; + &lt;ruleB&gt;) + &lt;ruleC&gt;) + &lt;ruleD&gt; ...</code>. 
Every <code>&lt;rule&gt;</code> must expand to a string or a list of strings. If a single string 
is concatenated with a list, it is concatenated with every element of the list. 
If two lists are concatenated, the elements are concatenated in pairs, creating 
a new list. If any of the lists is shorter, it is padded with empty strings. 
Examine possible combinations:</p>
<pre><code class="lang-Erlang"><span class="hljs-tuple">{concat, []}</span> -&gt;
  undefined
<span class="hljs-tuple">{concat, [<span class="hljs-tuple">{str, <span class="hljs-string">&quot;a&quot;</span>}</span>]}</span> -&gt;
  <span class="hljs-string">&quot;a&quot;</span>
<span class="hljs-tuple">{concat, [<span class="hljs-tuple">{str, <span class="hljs-string">&quot;a&quot;</span>}</span>, <span class="hljs-tuple">{str, <span class="hljs-string">&quot;b&quot;</span>}</span>]}</span> -&gt;
  <span class="hljs-string">&quot;ab&quot;</span>
<span class="hljs-tuple">{concat, [<span class="hljs-tuple">{str, <span class="hljs-string">&quot;a&quot;</span>}</span>, <span class="hljs-tuple">{str_list, [<span class="hljs-string">&quot;1&quot;</span>, <span class="hljs-string">&quot;2&quot;</span>, <span class="hljs-string">&quot;3&quot;</span>]}</span>]}</span> -&gt; 
  [<span class="hljs-string">&quot;a1&quot;</span>, <span class="hljs-string">&quot;a2&quot;</span>, <span class="hljs-string">&quot;a3&quot;</span>]
<span class="hljs-tuple">{concat, [<span class="hljs-tuple">{str_list, [<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-string">&quot;c&quot;</span>]}</span>, <span class="hljs-tuple">{str, <span class="hljs-string">&quot;1&quot;</span>}</span>]}</span> -&gt; 
  [<span class="hljs-string">&quot;a1&quot;</span>, <span class="hljs-string">&quot;b1&quot;</span>, <span class="hljs-string">&quot;c1&quot;</span>]
<span class="hljs-tuple">{concat, [<span class="hljs-tuple">{str_list, [<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-string">&quot;c&quot;</span>]}</span>, <span class="hljs-tuple">{str_list, [<span class="hljs-string">&quot;1&quot;</span>, <span class="hljs-string">&quot;2&quot;</span>, <span class="hljs-string">&quot;3&quot;</span>]}</span>]}</span> -&gt; 
  [<span class="hljs-string">&quot;a1&quot;</span>, <span class="hljs-string">&quot;b2&quot;</span>, <span class="hljs-string">&quot;c3&quot;</span>]
<span class="hljs-tuple">{concat, [<span class="hljs-tuple">{str_list, [<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-string">&quot;c&quot;</span>, <span class="hljs-string">&quot;d&quot;</span>]}</span>, <span class="hljs-tuple">{str_list, [<span class="hljs-string">&quot;1&quot;</span>, <span class="hljs-string">&quot;2&quot;</span>]}</span>]}</span> -&gt; 
  [<span class="hljs-string">&quot;a1&quot;</span>, <span class="hljs-string">&quot;b2&quot;</span>, <span class="hljs-string">&quot;c&quot;</span>, <span class="hljs-string">&quot;d&quot;</span>]
</code></pre>
<p>Example:</p>
<pre><code class="lang-Erlang"><span class="hljs-tuple">{entitlements =&gt; <span class="hljs-tuple">{concat, [<span class="hljs-tuple">{str, <span class="hljs-string">&quot;group:&quot;</span>}</span>, <span class="hljs-string">&quot;groups&quot;</span>]}</span>
<span class="hljs-comment">% would prefix every user&apos;s entitlement with &quot;group:&quot;</span>
</span></code></pre>
</li>
<li><p><code>{join, &quot;joinWith&quot;, &lt;rule&gt;}</code> - joins a list of strings with given string.
<code>&lt;rule&gt;</code> must expand to a list of strings, or a single string (in which case 
the join just return the string unchanged). Example:</p>
<pre><code class="lang-Erlang"><span class="hljs-tuple">{join, <span class="hljs-string">&quot; &quot;</span>, <span class="hljs-string">&quot;nameTokens&quot;</span>}</span>
<span class="hljs-comment">% would parse the following JSON:</span>
<span class="hljs-tuple">{<span class="hljs-string">&quot;nameTokens&quot;</span>: [<span class="hljs-string">&quot;John&quot;</span>, <span class="hljs-string">&quot;Doe&quot;</span>, <span class="hljs-string">&quot;Junior&quot;</span>]}</span>
<span class="hljs-comment">% into the following user name:</span>
<span class="hljs-string">&quot;John Doe Junior&quot;</span>
</code></pre>
</li>
<li><p><code>{split, &quot;splitWith&quot;, &lt;rule&gt;}</code> - splits a string into a list of strings on
given &quot;splitWith&quot; string. <code>&lt;rule&gt;</code> must expand to a string, or a list of strings 
in which case the results of splitting every string will be appended in one 
result list. Example:</p>
<pre><code class="lang-Erlang"><span class="hljs-tuple">{entitlements =&gt; <span class="hljs-tuple">{optional, <span class="hljs-tuple">{split, <span class="hljs-string">&quot;,&quot;</span>, <span class="hljs-string">&quot;groups&quot;</span>}</span>}</span>
<span class="hljs-comment">% would parse the following JSON:</span>
<span class="hljs-tuple">{<span class="hljs-string">&quot;groups&quot;</span>: <span class="hljs-string">&quot;group1,team2,role3&quot;</span>}</span>
<span class="hljs-comment">% into the following list of entitlements:</span>
[<span class="hljs-string">&quot;group1&quot;</span>, <span class="hljs-string">&quot;team2&quot;</span>, <span class="hljs-string">&quot;role3&quot;</span>]
<span class="hljs-comment">% or the following JSON:</span>
<span class="hljs-tuple">{<span class="hljs-string">&quot;groups&quot;</span>: [<span class="hljs-string">&quot;group1,group2&quot;</span>, <span class="hljs-string">&quot;team3,team4&quot;</span>]}</span>
<span class="hljs-comment">% into the following list of entitlements:</span>
[<span class="hljs-string">&quot;group1&quot;</span>, <span class="hljs-string">&quot;group2&quot;</span>, <span class="hljs-string">&quot;team3&quot;</span>, <span class="hljs-string">&quot;team4&quot;</span>]
</span></code></pre>
</li>
<li><p><code>{append, [&lt;ruleA&gt;, &lt;ruleB&gt;, ...]}</code> - appends lists or JSON objects together. 
Every <code>&lt;rule&gt;</code> must expand to a string, list or JSON. Examine possible 
combinations:</p>
<pre><code class="lang-Erlang"><span class="hljs-tuple">{append, []}</span> -&gt;
 []
<span class="hljs-tuple">{append, [<span class="hljs-tuple">{str, <span class="hljs-string">&quot;a&quot;</span>}</span>]}</span> -&gt;
 [<span class="hljs-string">&quot;a&quot;</span>]
<span class="hljs-tuple">{append, [<span class="hljs-tuple">{str, <span class="hljs-string">&quot;a&quot;</span>}</span>, <span class="hljs-tuple">{str_list, [<span class="hljs-string">&quot;c&quot;</span>, <span class="hljs-string">&quot;d&quot;</span>]}</span>]}</span> -&gt;
 [<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;c&quot;</span>, <span class="hljs-string">&quot;d&quot;</span>]
<span class="hljs-tuple">{append, [<span class="hljs-tuple">{str_list, [<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>]}</span>, <span class="hljs-tuple">{str_list, [<span class="hljs-string">&quot;c&quot;</span>, <span class="hljs-string">&quot;d&quot;</span>]}</span>]}</span> -&gt;
 [<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-string">&quot;c&quot;</span>, <span class="hljs-string">&quot;d&quot;</span>]
<span class="hljs-tuple">{append, [<span class="hljs-tuple">{key<span class="hljs-variable">Value</span>, <span class="hljs-string">&quot;groups&quot;</span>}</span>, <span class="hljs-tuple">{key<span class="hljs-variable">Value</span>, <span class="hljs-string">&quot;teams&quot;</span>}</span>]}</span> -&gt;
 <span class="hljs-tuple">{<span class="hljs-string">&quot;groups&quot;</span>: [...], <span class="hljs-string">&quot;teams&quot;</span>: [...]}</span>
</code></pre>
<p>Example:</p>
<pre><code class="lang-Erlang"><span class="hljs-tuple">{custom =&gt; <span class="hljs-tuple">{append, [<span class="hljs-tuple">{key<span class="hljs-variable">Value</span>, <span class="hljs-string">&quot;organization&quot;</span>}</span>, <span class="hljs-string">&quot;customAttrs&quot;</span>]}</span>
<span class="hljs-comment">% provided that &quot;customAttrs&quot; is a nested JSON, would give something like:</span>
<span class="hljs-tuple">{<span class="hljs-string">&quot;organization&quot;</span>: <span class="hljs-string">&quot;my-org&quot;</span>, <span class="hljs-string">&quot;cusAttr1&quot;</span>: <span class="hljs-string">&quot;val1&quot;</span>, <span class="hljs-string">&quot;cusAttr2&quot;</span>: <span class="hljs-string">&quot;val2&quot;</span>}</span>
</span></code></pre>
</li>
<li><p><code>{filter, &quot;regex&quot;, &lt;rule&gt;}</code> - filters a list, leaving only the strings that 
match given &quot;regex&quot;. <rule> must expand to a list of strings, or a string 
(in which case it will be treated as a list with one element). Example:</rule></p>
<pre><code class="lang-Erlang"><span class="hljs-tuple">{emails =&gt; <span class="hljs-tuple">{filter, <span class="hljs-string">&quot;.*@gmail.com&quot;</span>, <span class="hljs-string">&quot;emails&quot;</span>}</span>
<span class="hljs-comment">% would leave only the emails from gmail.com</span>
</span></code></pre>
</li>
<li><p><code>{any, [&lt;ruleA&gt;, &lt;ruleB&gt;, ...]}</code> - tries all rules one by one until any of
them gives a valid result. In case all of them fail, returns undefined value. 
Example:</p>
<pre><code class="lang-Erlang"><span class="hljs-tuple">{name =&gt; <span class="hljs-tuple">{optional, <span class="hljs-tuple">{any, [<span class="hljs-tuple">{concat, [<span class="hljs-tuple">{str, <span class="hljs-string">&quot;John &quot;</span>}</span>, <span class="hljs-string">&quot;surName&quot;</span>]}</span>, <span class="hljs-string">&quot;userName&quot;</span>]}</span>}</span>
<span class="hljs-comment">% would set all users&apos; names to:</span>
<span class="hljs-comment">%   a) &quot;John &lt;surName&gt;&quot; if the attribute &quot;surName&quot; was found</span>
<span class="hljs-comment">%   b) &quot;&lt;userName&gt;&quot; if the attribute &quot;userName&quot; was found</span>
<span class="hljs-comment">%   c) undefined (displayed in GUI as &quot;Unnamed User&quot;) if none of the attributes </span>
<span class="hljs-comment">%      was found (if &apos;optional&apos; was changed to &apos;required&apos;, the login would fail).</span>
</span></code></pre>
</li>
</ul>
<p>Example using all the possible rules:</p>
<pre><code class="lang-Erlang">attribute<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
    subject<span class="hljs-variable">Id</span> =&gt; <span class="hljs-tuple">{required, <span class="hljs-tuple">{replace, <span class="hljs-string">&quot;c&quot;</span>, <span class="hljs-string">&quot;x&quot;</span>, <span class="hljs-string">&quot;id&quot;</span>}</span>}</span>,
    name =&gt; <span class="hljs-tuple">{optional, <span class="hljs-tuple">{any, [<span class="hljs-string">&quot;fullName&quot;</span>, <span class="hljs-tuple">{join, <span class="hljs-string">&quot; &quot;</span>, <span class="hljs-string">&quot;nameTokens&quot;</span>}</span>]}</span>}</span>,
    alias =&gt; undefined,
    emails =&gt; <span class="hljs-tuple">{required, <span class="hljs-tuple">{filter, <span class="hljs-string">&quot;.*@my.org&quot;</span>, <span class="hljs-tuple">{split, <span class="hljs-string">&quot;,&quot;</span>, <span class="hljs-string">&quot;emails&quot;</span>}</span>}</span>}</span>,
    entitlements =&gt; <span class="hljs-tuple">{optional, <span class="hljs-tuple">{concat, [
        <span class="hljs-tuple">{str_list, [<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-string">&quot;c&quot;</span>, <span class="hljs-string">&quot;d&quot;</span>]}</span>,
        <span class="hljs-tuple">{str, <span class="hljs-string">&quot;:&quot;</span>}</span>,
        <span class="hljs-string">&quot;groups&quot;</span>,
        <span class="hljs-tuple">{str, <span class="hljs-string">&quot;/&quot;</span>}</span>,
        <span class="hljs-tuple">{str_list, [<span class="hljs-string">&quot;1&quot;</span>, <span class="hljs-string">&quot;2&quot;</span>, <span class="hljs-string">&quot;3&quot;</span>, <span class="hljs-string">&quot;4&quot;</span>]}</span>
    ]}</span>}</span>,
    custom =&gt; <span class="hljs-tuple">{optional, <span class="hljs-tuple">{append, [
        <span class="hljs-string">&quot;customAttrs&quot;</span>,
        <span class="hljs-tuple">{key<span class="hljs-variable">Value</span>, <span class="hljs-string">&quot;organization&quot;</span>}</span>,
        <span class="hljs-tuple">{key<span class="hljs-variable">Value</span>, <span class="hljs-string">&quot;roles&quot;</span>, <span class="hljs-tuple">{nested, [<span class="hljs-string">&quot;roles&quot;</span>, <span class="hljs-tuple">{list, <span class="hljs-string">&quot;role&quot;</span>}</span>, <span class="hljs-string">&quot;displayName&quot;</span>]}</span>}</span>
    ]}</span>}</span>
}</span>
</code></pre>
<p>would parse the following JSON:</p>
<pre><code class="lang-JSON">{
    <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-string">&quot;abcdef1c2c3c4c&quot;</span>,
    <span class="hljs-string">&quot;nameTokens&quot;</span>: [<span class="hljs-string">&quot;John&quot;</span>, <span class="hljs-string">&quot;Doe&quot;</span>, <span class="hljs-string">&quot;Jr&quot;</span>],
    <span class="hljs-string">&quot;alias&quot;</span>: <span class="hljs-string">&quot;jodoe&quot;</span>,
    <span class="hljs-string">&quot;emails&quot;</span>: <span class="hljs-string">&quot;joedoe@example.com,john.doe@my.org&quot;</span>,
    <span class="hljs-string">&quot;groups&quot;</span>: [<span class="hljs-string">&quot;some&quot;</span>, <span class="hljs-string">&quot;entitlement&quot;</span>, <span class="hljs-string">&quot;from&quot;</span>, <span class="hljs-string">&quot;idp&quot;</span>],
    <span class="hljs-string">&quot;roles&quot;</span>: [
        {<span class="hljs-string">&quot;role&quot;</span>: {
            <span class="hljs-string">&quot;displayName&quot;</span>: <span class="hljs-string">&quot;role1&quot;</span>
        }}, 
        {<span class="hljs-string">&quot;role&quot;</span>: {
            <span class="hljs-string">&quot;displayName&quot;</span>: <span class="hljs-string">&quot;role2&quot;</span>
        }}, 
        {<span class="hljs-string">&quot;role&quot;</span>: {
            <span class="hljs-string">&quot;displayName&quot;</span>: <span class="hljs-string">&quot;role3&quot;</span>
        }}],
    <span class="hljs-string">&quot;organization&quot;</span>: <span class="hljs-string">&quot;My Organization&quot;</span>,
    <span class="hljs-string">&quot;customAttrs&quot;</span>: {
        <span class="hljs-string">&quot;thirdAttr&quot;</span>: {
            <span class="hljs-string">&quot;nested&quot;</span>: <span class="hljs-string">&quot;json&quot;</span>
        },
        <span class="hljs-string">&quot;secondAttr&quot;</span>: [<span class="hljs-string">&quot;second&quot;</span>, <span class="hljs-string">&quot;value&quot;</span>],
        <span class="hljs-string">&quot;fourthAttr&quot;</span>: <span class="hljs-number">17</span>,
        <span class="hljs-string">&quot;firstAttr&quot;</span>: <span class="hljs-string">&quot;firstValue&quot;</span>
    }
}
</code></pre>
<p>Into the following Onedata user attributes:</p>
<pre><code class="lang-JSON">{
    <span class="hljs-string">&quot;idp&quot;</span>: <span class="hljs-string">&quot;my-idp&quot;</span>,
    <span class="hljs-string">&quot;subjectId&quot;</span>: <span class="hljs-string">&quot;abxdef1x2x3x4x&quot;</span>,
    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;John Doe Jr&quot;</span>,
    <span class="hljs-string">&quot;alias&quot;</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-string">&quot;emails&quot;</span>: [<span class="hljs-string">&quot;john.doe@my.org&quot;</span>],
    <span class="hljs-string">&quot;entitlements&quot;</span>: [<span class="hljs-string">&quot;a:some/1&quot;</span>, <span class="hljs-string">&quot;b:entitlement/2&quot;</span>, <span class="hljs-string">&quot;c:from/3&quot;</span>, <span class="hljs-string">&quot;d:idp/4&quot;</span>],
    <span class="hljs-string">&quot;custom&quot;</span>: {
        <span class="hljs-string">&quot;firstAttr&quot;</span>: <span class="hljs-string">&quot;firstValue&quot;</span>,
        <span class="hljs-string">&quot;secondAttr&quot;</span>: [<span class="hljs-string">&quot;second&quot;</span>, <span class="hljs-string">&quot;value&quot;</span>],
        <span class="hljs-string">&quot;fourthAttr&quot;</span>: <span class="hljs-number">17</span>,
        <span class="hljs-string">&quot;thirdAttr&quot;</span>: {
            <span class="hljs-string">&quot;nested&quot;</span>: <span class="hljs-string">&quot;json&quot;</span>
        },
        <span class="hljs-string">&quot;organization&quot;</span>: <span class="hljs-string">&quot;My Organization&quot;</span>,
        <span class="hljs-string">&quot;roles&quot;</span>: [<span class="hljs-string">&quot;role1&quot;</span>, <span class="hljs-string">&quot;role2&quot;</span>, <span class="hljs-string">&quot;role3&quot;</span>]
    }
}
</code></pre>
<h4 id="attribute-mapping-inheritance">Attribute mapping inheritance</h4>
<p>If attribute mapping is specified in defaultProtocolConfig, it will be inherited
by all IdPs using that protocol (openid or saml) - just like all other 
attributes. It is possible to override each key in the IdP config. For example, 
having the following config (default and IdP specific):</p>
<pre><code class="lang-Erlang">default<span class="hljs-variable">ProtocolConfig</span> =&gt; #<span class="hljs-tuple">{
    attribute<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
        subject<span class="hljs-variable">Id</span> =&gt; <span class="hljs-tuple">{required, <span class="hljs-string">&quot;eduPersonUniqueID&quot;</span>}</span>,
        name =&gt; <span class="hljs-tuple">{required, [<span class="hljs-string">&quot;displayName&quot;</span>, <span class="hljs-string">&quot;surName&quot;</span>]}</span>,
        alias =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;eduPersonPrincipalName&quot;</span>}</span>,
        emails =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;mail&quot;</span>}</span>
    }</span>
}</span>
...
<span class="hljs-tuple">{my_idp, #<span class="hljs-tuple">{
    protocol<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
        attribute<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
            subject<span class="hljs-variable">Id</span> =&gt; <span class="hljs-tuple">{required, <span class="hljs-string">&quot;eduPersonTargetedID&quot;</span>}</span>,
            <span class="hljs-comment">% if not explicitly set to undefined, alias rules will be</span>
            <span class="hljs-comment">% inherited from defaultProtocolConfig!</span>
            alias =&gt; undefined,
            entitlements =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;groups&quot;</span>}</span>
        }</span>
    }</span>
}</span>
</span></code></pre>
<p>Is the same as having such config for the IdP:</p>
<pre><code class="lang-Erlang"><span class="hljs-tuple">{my_idp, #<span class="hljs-tuple">{
    protocol<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
        attribute<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
            subject<span class="hljs-variable">Id</span> =&gt; <span class="hljs-tuple">{required, <span class="hljs-string">&quot;eduPersonTargetedID&quot;</span>}</span>,
            name =&gt; <span class="hljs-tuple">{required, [<span class="hljs-string">&quot;displayName&quot;</span>, <span class="hljs-string">&quot;surName&quot;</span>]}</span>,
            alias =&gt; undefined,
            emails =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;mail&quot;</span>}</span>,
            entitlements =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;groups&quot;</span>}</span>
        }</span>
    }</span>
}</span>
</span></code></pre>
<h4 id="exemplary-idp-attributes">Exemplary IdP attributes</h4>
<p>Bear in mind that typical attributes received via OpenID and SAML are different.
They differ depending on the IdP - refer to their documentation to correctly
build attribute mapping rules. Nevertheless, there is a certain set of 
universally used attributes. Please examine the following examples that use 
fairly common attributes:</p>
<p>OpenID attributes example (Indigo IAM)</p>
<pre><code class="lang-JSON">{
    <span class="hljs-string">&quot;sub&quot;</span>: <span class="hljs-string">&quot;12345678-1234-1234-1234-12345678&quot;</span>,
    <span class="hljs-string">&quot;preferred_username&quot;</span>: <span class="hljs-string">&quot;johndoe&quot;</span>,
    <span class="hljs-string">&quot;organisation_name&quot;</span>: <span class="hljs-string">&quot;indigo-dc&quot;</span>,
    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;John Doe&quot;</span>,
    <span class="hljs-string">&quot;groups&quot;</span>: [<span class="hljs-string">&quot;Users&quot;</span>, <span class="hljs-string">&quot;Developers&quot;</span>],
    <span class="hljs-string">&quot;given_name&quot;</span>: <span class="hljs-string">&quot;John&quot;</span>,
    <span class="hljs-string">&quot;gender&quot;</span>: <span class="hljs-string">&quot;M&quot;</span>,
    <span class="hljs-string">&quot;family_name&quot;</span>: <span class="hljs-string">&quot;Doe&quot;</span>,
    <span class="hljs-string">&quot;email_verified&quot;</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">&quot;email&quot;</span>: <span class="hljs-string">&quot;john.doe@google.com&quot;</span>,
    <span class="hljs-string">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;Fri Jun 17 13:52:32 CEST 2016&quot;</span>
}
</code></pre>
<p>SAML attributes example (Elixir Europe)</p>
<pre><code class="lang-JSON">{
    <span class="hljs-string">&quot;eduPersonUniqueId&quot;</span>: <span class="hljs-string">&quot;1234567890@elixir-europe.org&quot;</span>,
    <span class="hljs-string">&quot;displayName&quot;</span>: <span class="hljs-string">&quot;John Doe&quot;</span>,
    <span class="hljs-string">&quot;eduPersonPrincipalName&quot;</span>: <span class="hljs-string">&quot;johndoe@elixir-europe.org&quot;</span>,
    <span class="hljs-string">&quot;mail&quot;</span>: <span class="hljs-string">&quot;john.doe@gmail.com&quot;</span>,
    <span class="hljs-string">&quot;eduPersonEntitlement&quot;</span>: [
        <span class="hljs-string">&quot;elixir_test:members&quot;</span>, 
        <span class="hljs-string">&quot;elixir_test:OneData&quot;</span>, 
        <span class="hljs-string">&quot;elixir_test:OneData:subgroup-1&quot;</span>, 
        <span class="hljs-string">&quot;elixir_test:OneData:subgroup-1:subgroup-2&quot;</span>
    ],
    <span class="hljs-string">&quot;https://login.elixir-europe.org/attribute-definition/forwardedScopedAffiliation/v1&quot;</span>: <span class="hljs-string">&quot;affiliate@elixir-europe.org&quot;</span>,
    <span class="hljs-string">&quot;schacHomeOrganization&quot;</span>: <span class="hljs-string">&quot;google.com&quot;</span>
}
</code></pre>
<blockquote>
<p>Although the SAML attributes are received in SAML assertions in the XML
format, they are internally normalized to JSON and treated analogically to 
OpenID attributes during attribute mapping.</p>
</blockquote>
<p>SAML specification defines a certain set of attributes that can be served by 
IdPs. Onezone recognizes the most commonly used ones - see the table below. 
It presents the attribute type identifiers and their human-readable aliases used 
in Onezone. All received attributes with below identifiers will be translated
to corresponding aliases - and you must use the aliases in attribute mapping 
rules. Of course, the IdP might send attributes that are not listed in the
below table, or are completely customary for given organization. Then, in your 
attribute mapping rules, use the literal type identifiers that appear in the 
assertion XML. They might be custom strings, usually starting with <code>urn:oid:</code>,
or URIs (as in above example for Elixir) - refer to the IdP&apos;s documentation to
find out the list of supported attributes.</p>
<table>
<thead>
<tr>
<th>alias</th>
<th>SAML attribute type identifier</th>
</tr>
</thead>
<tbody>
<tr>
<td>&quot;uid&quot;</td>
<td>urn:oid:0.9.2342.19200300.100.1.1</td>
</tr>
<tr>
<td>&quot;displayName&quot;</td>
<td>urn:oid:2.16.840.1.113730.3.1.241</td>
</tr>
<tr>
<td>&quot;givenName&quot;</td>
<td>urn:oid:2.5.4.42</td>
</tr>
<tr>
<td>&quot;commonName&quot;</td>
<td>urn:oid:2.5.4.3</td>
</tr>
<tr>
<td>&quot;surName&quot;</td>
<td>urn:oid:2.5.4.4</td>
</tr>
<tr>
<td>&quot;mail&quot;</td>
<td>urn:oid:0.9.2342.19200300.100.1.3</td>
</tr>
<tr>
<td>&quot;eduPersonTargetedID&quot;</td>
<td>urn:oid:1.3.6.1.4.1.5923.1.1.1.10</td>
</tr>
<tr>
<td>&quot;eduPersonUniqueID&quot;</td>
<td>urn:oid:1.3.6.1.4.1.5923.1.1.1.13</td>
</tr>
<tr>
<td>&quot;eduPersonPrincipalName&quot;</td>
<td>urn:oid:1.3.6.1.4.1.5923.1.1.1.6</td>
</tr>
<tr>
<td>&quot;eduPersonScopedAffiliation&quot;</td>
<td>urn:oid:1.3.6.1.4.1.5923.1.1.1.9</td>
</tr>
<tr>
<td>&quot;eduPersonEntitlement&quot;</td>
<td>urn:oid:1.3.6.1.4.1.5923.1.1.1.7</td>
</tr>
<tr>
<td>&quot;schacHomeOrganization&quot;</td>
<td>urn:oid:1.3.6.1.4.1.25178.1.2.9</td>
</tr>
<tr>
<td>&quot;telephoneNumber&quot;</td>
<td>urn:oid:2.5.4.20</td>
</tr>
<tr>
<td>&quot;organizationName&quot;</td>
<td>urn:oid:2.5.4.10</td>
</tr>
<tr>
<td>&quot;organizationalUnitName&quot;</td>
<td>urn:oid:2.5.4.11</td>
</tr>
<tr>
<td>&quot;employeeNumber&quot;</td>
<td>urn:oid:2.16.840.1.113730.3.1.3</td>
</tr>
<tr>
<td>&quot;employeeType&quot;</td>
<td>urn:oid:2.16.840.1.113730.3.1.4</td>
</tr>
</tbody>
</table>
<p>Exemplary attribute mapping using known and custom SAML attributes:</p>
<pre><code class="lang-Erlang"> attribute<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
    subject<span class="hljs-variable">Id</span> =&gt; <span class="hljs-tuple">{required, <span class="hljs-string">&quot;eduPersonTargetedID&quot;</span>}</span>,
    name =&gt; <span class="hljs-tuple">{optional, <span class="hljs-tuple">{any, [<span class="hljs-string">&quot;displayName&quot;</span>, <span class="hljs-tuple">{concat, [<span class="hljs-string">&quot;givenName&quot;</span>, <span class="hljs-tuple">{str, <span class="hljs-string">&quot; &quot;</span>}</span>, <span class="hljs-string">&quot;surName&quot;</span>]}</span>]}</span>}</span>,
    alias =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;eduPersonPrincipalName&quot;</span>}</span>,
     <span class="hljs-comment">% Custom attribute type as a string</span>
    email =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;idp-custom-attribute&quot;</span>}</span>,
     <span class="hljs-comment">% Custom attribute type in form of urn:oid:xxx</span>
    entitlements =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;urn:oid:9.9.9.9.9&quot;</span>}</span>,
     <span class="hljs-comment">% Custom attribute type in form of an URI</span>
    custom =&gt; <span class="hljs-tuple">{required, <span class="hljs-string">&quot;https://login.elixir-europe.org/attribute-definition/forwardedScopedAffiliation/v1&quot;</span>}</span>
 }</span>
</code></pre>
<h3 id="entitlement-mapping">Entitlement Mapping</h3>
<p>Entitlement mapping is used to automatically map users entitlements in an IdP
to group memberships in Onedata. Entitlements can be understood as the right to
be a member of a group (or, possibly, a group structure) with certain 
privileges. The section in <code>auth.config</code> concerning the Entitlement Mapping has 
the following structure (example):</p>
<pre><code class="lang-Erlang"> entitlement<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
     enabled =&gt; true,
     vo<span class="hljs-variable">GroupName</span> =&gt; <span class="hljs-string">&quot;my-organization&quot;</span>,
     admin<span class="hljs-variable">Group</span> =&gt; <span class="hljs-string">&quot;all_users:admins&quot;</span>,
     parser =&gt; nested_entitlement_parser,
     parser<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
         top<span class="hljs-variable">GroupType</span> =&gt; unit,
         top<span class="hljs-variable">GroupPrivilegesInVo</span> =&gt; member,
         sub<span class="hljs-variable">GroupsType</span> =&gt; team,
         sub<span class="hljs-variable">GroupsPrivilegesInParent</span> =&gt; member,
         user<span class="hljs-variable">Privileges</span> =&gt; member
     }</span>
 }</span>
</code></pre>
<ul>
<li><p><code>enabled</code> - enable / disable entitlement mapping for given IdP.</p>
</li>
<li><p><code>voGroupName</code> - if specified, a special VO group will be created and all 
groups originating from given IdP will be added as members (subgroups) to it.
Note that if an entitlement overlaps with the <code>voGroupName</code>, it will be 
considered the same as the VO group. See the below table for examples how 
different entitlements would be mapped assuming that the <code>voGroupName</code> is set 
to <code>myVO</code>:</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>entitlement</th>
<th>group structure in Onedata</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>members</code></td>
<td><code>myVO/members</code></td>
</tr>
<tr>
<td><code>myVO</code></td>
<td><code>myVO</code></td>
</tr>
<tr>
<td><code>myVO/members</code></td>
<td><code>myVO/members</code></td>
</tr>
<tr>
<td><code>users/admins</code></td>
<td><code>myVO/users/admins</code></td>
</tr>
</tbody>
</table>
<ul>
<li><p><code>adminGroup</code> - (fka Super Group) if specified, defines a Admin Group for given 
IdP. It should be an existing entitlement, in the format that is the same as the 
output of your entitlement mapping rules (see the 
<a href="#entitlement-parsers">example below</a>). The Admin Group will be given admin 
privileges to all groups originating from given IdP. Consequently, all members 
of the Admin Group will inherit admin privileges to all groups from the IdP. For 
example, if there is an <code>&quot;admins&quot;</code> group in an IdP, and its specified here, 
users of the original <code>&quot;admins&quot;</code> group will be mapped to Onedata <code>&quot;admins&quot;</code> 
group and will automatically gain admin privileges in the IdP groups.</p>
</li>
<li><p><code>parser</code> &amp; <code>parserConfig</code> - see below</p>
</li>
</ul>
<h4 id="entitlement-parsers">Entitlement parsers</h4>
<p>Entitlement parsers are used to convert user entitlements from an IdP to group 
memberships in Onedata. There are two predefined parsers that can be used to 
covers most common use cases:</p>
<ul>
<li><p><code>flat_idp_group_parser</code> - converts every entitlement to one group membership 
in Onedata. Each of created groups has configured <a href="#group-types">type</a> 
(<code>groupType</code>) and the user with such entitlement is added to the group with 
given set of <a href="#privileges-in-entitlements">privileges</a> (<code>userPrivileges</code>). The 
name of the group is the same as in the entitlement, but normalized to allowed 
chars. If the IdP has a specified <code>voGroupName</code>, the group will be added as a 
subgroup with given set of <a href="#privileges-in-entitlements">privileges</a>
(<code>groupPrivilegesInVo</code>), otherwise this parameter has no effect. Example - 
having the following entitlementMapping config:</p>
<pre><code class="lang-Erlang">entitlement<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
   enabled =&gt; true,
   vo<span class="hljs-variable">GroupName</span> =&gt; <span class="hljs-string">&quot;my-organization&quot;</span>,
   admin<span class="hljs-variable">Group</span> =&gt; undefined,
   parser =&gt; flat_entitlement_parser,
   parser<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
       group<span class="hljs-variable">Type</span> =&gt; team,
       group<span class="hljs-variable">PrivilegesInVo</span> =&gt; member,
       user<span class="hljs-variable">Privileges</span> =&gt; manager
   }</span>
}</span>
</code></pre>
<p>Consider the following JSON received from the IdP:</p>
<pre><code class="lang-JSON">{
   <span class="hljs-string">&quot;groups&quot;</span>: [<span class="hljs-string">&quot;developers&quot;</span>, <span class="hljs-string">&quot;admins&quot;</span>],
   ...
}
</code></pre>
<p>And the following <a href="#attribute-mapping-rules">attribute mapping rules</a>:</p>
<pre><code class="lang-Erlang">attribute<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
   entitlements =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;groups&quot;</span>}</span>,
   ...
}</span>
</code></pre>
<p>After user&apos;s log-in, the following group structure would be created:</p>
<pre><code>           my-organization [organization]
               u     u
 (member privs&gt;|     |&lt;member privs)
               |     |
[team] developers   admins [team]
              u        u
(manager privs&gt;\      /&lt;manager privs)
                \    /
                &lt;user&gt;
</code></pre></li>
<li><p><code>nested_entitlement_parser</code> - converts every entitlement into a chain of
nested groups in Onedata by splitting the input on splitWith string. The created 
groups have configured <a href="#group-types">type</a> (<code>topGroupType</code>, <code>subGroupsType</code>), 
depending on their position in the structure. The user with such entitlement is
added only to the bottom group with given set of 
<a href="#privileges-in-entitlements">privileges</a> (<code>userPrivileges</code>). The names of the 
groups are the same as the effect of splitting the entitlement, but normalized 
to allowed chars. If the IdP has a specified <code>voGroupName</code>, the top group will
be added as a subgroup to it with given set of 
<a href="#privileges-in-entitlements">privileges</a> (<code>topGroupPrivilegesInVo</code>). All nested 
groups will have the <a href="#group-types">type</a> of <code>subGroupsType</code> and the set of 
<a href="#privileges-in-entitlements">privileges</a> specified in 
<code>subGroupsPrivilegesInParent</code> towards their parent group. Example - having the 
following entitlementMapping config:</p>
<pre><code class="lang-Erlang">entitlement<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
   enabled =&gt; true,
   <span class="hljs-comment">% Don&apos;t create a VO group, unlike in above</span>
   <span class="hljs-comment">% flat_entitlement_parser example, but define adminGroup</span>
   vo<span class="hljs-variable">GroupName</span> =&gt; undefined,
   admin<span class="hljs-variable">Group</span> =&gt; <span class="hljs-string">&quot;all_users:admins&quot;</span>,
   parser =&gt; nested_entitlement_parser,
   parser<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
       split<span class="hljs-variable">With</span> =&gt; <span class="hljs-string">&quot;:&quot;</span>,
       top<span class="hljs-variable">GroupType</span> =&gt; unit,
       top<span class="hljs-variable">GroupPrivilegesInVo</span> =&gt; member,
       sub<span class="hljs-variable">GroupsType</span> =&gt; team,
       sub<span class="hljs-variable">GroupsPrivilegesInParent</span> =&gt; member,
       user<span class="hljs-variable">Privileges</span> =&gt; manager
   }</span>
</span></code></pre>
<p>Consider the following JSON received from the IdP:</p>
<pre><code class="lang-JSON">{
   <span class="hljs-string">&quot;groups&quot;</span>: [
       <span class="hljs-string">&quot;all_users:admins&quot;</span>,
       <span class="hljs-string">&quot;all_users:cloud_users:vm_managers&quot;</span>
   ],
   ...
}
</code></pre>
<p>And the following <a href="#attribute-mapping-rules">attribute mapping rules</a>:</p>
<pre><code class="lang-Erlang">attribute<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
   entitlements =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;groups&quot;</span>}</span>,
   ...
}</span>
</code></pre>
<p>After user&apos;s log-in, the following group structure would be created:</p>
<pre><code>              all_users [unit]
               u     u
  (admin privs&gt;|      \&lt;member privs)
               |       \
     .---------&apos;   cloud_users [team]
    /                u   u
    \  (admin privs&gt;/     \&lt;member privs)
     \             /       \
      \        .--&apos;     vm_managers [team]
       &apos;---.  |               u    u
            \ | (admin privs&gt;/    /&lt;manager privs)
             \|             /    /
        [team] admins------&apos;    /
                    u          /
      (manager privs&gt;\        /
                      \      /
                       &lt;user&gt;
</code></pre></li>
</ul>
<p>Note how the adminGroup (<code>&quot;all_users:admins&quot;</code>) is added to all groups in the IdP 
with admin privileges. The user will inherit all those privileges and will 
effectively be an admin in all those groups.</p>
<h4 id="group-types">Group types</h4>
<p>There are four group types in Onedata. Their purpose is to facilitate reflecting 
existing organizational hierarchies. Apart from the visual representation in GUI 
and intuitive meaning, the group type does not have a functional effect on the 
system usage. Their interpretation is up to the admins and users, but the 
recommended usage of the types is:</p>
<ul>
<li><p><code>organization</code> - represents an organization; institution or virtual
organization (VO), e.g. &quot;Elixir Europe&quot;</p>
</li>
<li><p><code>unit</code> - represents a unit in organization, e.g. &quot;R&amp;D department&quot;</p>
</li>
<li><p><code>team</code> - represents a collaborating team of users that address a
specific issue / topic, e.g. &quot;WP5.1&quot;</p>
</li>
<li><p><code>role_holders</code> - groups people that posses a certain role, e.g. &quot;Admins&quot;
(in Onedata, there is no concept of roles - rather than that, users with the 
same role/privileges should be organized in groups)</p>
</li>
</ul>
<h4 id="privileges-in-entitlements">Privileges in entitlements</h4>
<p>It is possible to specify privileges of the user towards the bottom group of the 
nested structure or privileges of the groups in the nested chain towards their 
parents. These privileges will be set only when creating a new membership - if a 
membership already exists, the privileges are not accounted. It means that any 
changes in privileges introduced by users in an existing structure will never be 
overwritten by the entitlements mapping. There are three possible sets of 
privileges: <code>member</code>, <code>manager</code>, <code>admin</code>. They expand to a certain set of 
Onedata group privileges:</p>
<ul>
<li><p>member -&gt; <code>[group_view]</code></p>
</li>
<li><p>manager -&gt; <code>[group_view,
   group_invite_user, group_remove_user,
   group_add_parent, group_leave_parent,
   group_add_child, group_remove_child]</code></p>
</li>
<li><p>admin -&gt; <code>[group_view,
   group_invite_user, group_remove_user,
   group_add_parent, group_leave_parent,
   group_add_child, group_remove_child,
   group_update, group_delete,
   group_view_privileges, group_set_privileges,
   group_add_space, group_leave_space,
   group_create_handle_service, group_leave_handle_service,
   group_create_handle, group_leave_handle]</code></p>
</li>
</ul>
<h4 id="custom-entitlement-parsers-advanced">Custom entitlement parsers (advanced)</h4>
<p>Entitlement parsers are Erlang modules that implement 
<code>entitlement_parser_behaviour</code>. They are used to convert a raw entitlement 
coming from an IdP into Onedata&apos;s internal, unified format, which looks like 
this:</p>
<pre><code class="lang-Erlang"><span class="hljs-record_name">#idp_entitlement</span>{
     idp = my<span class="hljs-variable">IdP</span>,
     path = [
         <span class="hljs-record_name">#idp_group</span>{type = organization, name = &lt;&lt;<span class="hljs-string">&quot;my-org&quot;</span>&gt;&gt;, privileges = member},
         <span class="hljs-record_name">#idp_group</span>{type = unit, name = &lt;&lt;<span class="hljs-string">&quot;my-unit&quot;</span>&gt;&gt;, privileges = member},
         <span class="hljs-record_name">#idp_group</span>{type = team, name = &lt;&lt;<span class="hljs-string">&quot;my-team&quot;</span>&gt;&gt;, privileges = manager}
     ],
     <span class="hljs-comment">% user privileges in the bottom group</span>
     privileges = admin
}
</code></pre>
<p>Such entitlement expresses that a chain of nested groups should be created, and 
user be added to the bottom one with given set of 
<a href="#privileges-in-entitlements">privileges</a>. Every entry in the path denotes the 
type and name of group in Onedata and the privileges of that group in its 
parent group (if existent). The above entitlement would yield the following 
group structure in Onezone:</p>
<pre><code> my-organization [organization]
     u
     |&lt;member privs)
     |
     my-unit [unit]
         u
         |&lt;manager privs)
         |
         my-team [team]
             u
             |&lt;admin privs)
             |
             &lt;user&gt;
</code></pre><p>If an <code>adminGroup</code> is specified for myIdP, let it be called <code>&quot;admins&quot;</code>, and
the user has the following entitlements (after the mapping):</p>
<pre><code>[
     #idp_entitlement{
         idp = myIdP,
         path = [
             #idp_group{type = organization, name = &lt;&lt;&quot;my-org&quot;&gt;&gt;, privileges = member},
             #idp_group{type = unit, name = &lt;&lt;&quot;my-unit&quot;&gt;&gt;, privileges = member},
             #idp_group{type = team, name = &lt;&lt;&quot;my-team&quot;&gt;&gt;, privileges = manager}
         ],
         % user privileges in the bottom group
         privileges = admin
     },
     #idp_entitlement{
         path = [
             #idp_group{type = organization, name = &lt;&lt;&quot;my-org&quot;&gt;&gt;, privileges = member},
             #idp_group{type = role_holder, name = &lt;&lt;&quot;admins&quot;&gt;&gt;, privileges = &lt;irrelevant&gt;}
         ],
         privileges = manager
     }
]
</code></pre><p>The following group structure would be created:</p>
<pre><code>                         my-organization [organization]
                         u   u
                         |   |&lt;member privs)
               .---------&apos;   |
  (admin privs&gt;|             my-unit [unit]
               |             u   u
               | .-----------&apos;   |&lt;manager privs)
               | |               |
               | |&lt;admin privs)  my-team [team]
               | |                u   u
               | |   (admin privs&gt;|   |&lt;admin privs)
               | |                |   |
 [role_holder] admins-------------&apos;   |
                  u                   |
   (manager privs&gt;|                   |
                  &apos;----------------- &lt;user&gt;
</code></pre><p>Furthermore, if <code>voGroupName</code> is specified as <code>&quot;my-vo-group&quot;</code>, the whole 
structure is added as children to that VO (organization) group. In such case, 
the above entitlements would yield the following group structure:</p>
<pre><code>           my-vo-group [organization]
              u   u
 (admin privs&gt;|   |&lt;member privs)
              |   |
       .------&apos;   &apos;---------------my-organization [organization]
       |                          u   u
       |                          |   |&lt;member privs)
       |                .---------&apos;   |
       |   (admin privs&gt;|             my-unit [unit]
       |                |             u   u
       |                | .-----------&apos;   |&lt;manager privs)
       |                | |               |
       |                | |&lt;admin privs)  my-team [team]
       |                | |                u   u
       &apos;--------------. | |   (admin privs&gt;|   |&lt;admin privs)
                       \| |                |   |
         [role_holder] admins--------------&apos;   |
                           u                   |
            (manager privs&gt;|                   |
                           &apos;----------------- &lt;user&gt;
</code></pre><p>To implement your own entitlement parser, see 
<a href="#entitlement-parser">entitlement parser</a>.</p>
<h2 id="auth-plugins">Auth plugins</h2>
<p>Auth plugins are user-defined Erlang modules that can be injected into the
Onezone service and used to customize OIDC / SAML sing-on procedure. All plugins 
are expected to be found in the directory <code>/etc/oz_worker/plugins</code>, and 
must be Erlang files with <code>&quot;.erl&quot;</code> extension. They will be loaded upon Onezone 
startup. When using a deployment with more than one node, the same plugins must 
be provisioned on all nodes.</p>
<blockquote>
<p>If you wish to implement your own auth plugin, we recommend to contact us 
(e.g. create an issue on <a href="https://github.com/onedata/" target="_blank">GitHub</a>) to make the
process as smooth as possible.</p>
</blockquote>
<p>Plugins must conform to predefined API that is specified in Erlang behaviour
modules. Please refer to the oz-worker source code for the behaviours and
implementation guide.</p>
<p>Each plugin must implement the <code>onezone_plugin_behaviour</code>, which has one
callback - <code>type/0</code>, that returns the type of the plugin:
<code>attribute_mapper | entitlement_parser | openid_plugin</code>.</p>
<blockquote>
<p>See the corresponding behaviours for more info.
<code>entitlement_parser</code> and <code>attribute_mapper</code> support validation examples that
will be evaluated upon startup and the results will be logged in Onezone logs.</p>
</blockquote>
<h3 id="attribute-mapper">Attribute mapper</h3>
<p>This auth plugin maps IdP attributes into Onedata attributes. It must implement
the <code>onezone_plugin_behaviour</code> that returns the <code>attribute_mapper</code> atom from the 
<code>type/0</code> callback, and the <code>attribute_mapper_behaviour</code>. Refer to the
<a href="https://github.com/onedata/oz-worker" target="_blank">oz-worker source code</a> for the
behaviour module and implementation details. An exemplary custom attribute 
mapper can be found in <code>/etc/oz_worker/plugins/custom_attribute_mapper.erl</code>.</p>
<h3 id="entitlement-parser">Entitlement parser</h3>
<p>This auth plugin maps IdP entitlements into Onedata entitlements 
(group memberships). It must implement the <code>onezone_plugin_behaviour</code> that returns 
the <code>entitlement_parser</code> atom from the <code>type/0</code> callback, and the 
<code>entitlement_parser_behaviour</code>. Refer to the
<a href="https://github.com/onedata/oz-worker" target="_blank">oz-worker source code</a> for the
behaviour module and implementation details. An exemplary custom entitlement 
parser that supports EGI group format can be found in 
<code>/etc/oz_worker/plugins/custom_entitlement_parser.erl</code>.</p>
<h3 id="openid-plugin">OpenID plugin</h3>
<p>This auth plugin handles the Open ID login process. It must implement the 
<code>onezone_plugin_behaviour</code> that returns the <code>openid_plugin</code> atom from the <code>type/0</code> 
callback, and the <code>openid_plugin_behaviour</code>. Refer to the
<a href="https://github.com/onedata/oz-worker" target="_blank">oz-worker source code</a> for the
behaviour module and implementation details. </p>
<h2 id="troubleshooting">Troubleshooting</h2>
<p>If any of the features is not working as expected, please go through this 
checklist that might help identify the problem:</p>
<ul>
<li><p>Make sure that you correctly placed/overwritten the <code>auth.config</code> - go to
the Onezone node and examine <code>/etc/oz_worker/auth.config</code>. Especially on 
docker-based deployments, it might happen that the file mounted from your host 
does not get reflected in the container after changes are introduced.</p>
</li>
<li><p>Wait for the <code>auth.config</code> to be reloaded - the config is cached for 60 
seconds, and any changes you introduce might take up to this time to be visible.</p>
</li>
<li><p>If any error occurs during the login process, see what page you are currently
on:</p>
<ul>
<li><p><strong>The IdP page</strong> - either your <code>auth.config</code> has errors (the error on the 
IdP page should indicate the reason), or the problem is on the IdP side. In 
any case, try contacting the administrators, who can examine their logs and
give you hints on the reason.</p>
</li>
<li><p><strong>The Onezone GUI</strong> - see the image below. The error page will contain 
basic information about the error. If that is not enough to identify the 
problem, copy the request state identifier from the error page and check the 
logs - see the next point.</p>
<p><img style="display:block;margin:0 auto;" src="../img/login-page-error.png"></p>
</li>
</ul>
</li>
<li><p>Check <a href="../onezone_tutorial.html#logs">Onezone logs</a> for any hints what might 
have gone wrong:</p>
<ul>
<li><p>Errors in <code>auth.config</code> are logged on the <code>alert</code> loglevel, they should 
give clear information on how to fix the config.</p>
</li>
<li><p>Erroneous requests are logged on different loglevels, depending on the 
error severity. They always include the request state identifier (see the 
image above), so they are easy to look up.</p>
</li>
<li><p>Some of the errors with low severity are logged on the <code>debug</code> loglevel, 
which is disabled by default. If needed, you can 
<a href="../onezone_tutorial.html#enabling-debug-logs">turn on the <code>debug</code> logs</a> 
(keep in mind that they have negative impact on the system performance). 
After doing so, go through the login process again and take the request 
state identifier. You will get detailed logs from the whole login process - 
look them up using the state identifier. Remember to turn off the debug logs 
when you are finished.</p>
</li>
</ul>
</li>
</ul>
<h2 id="luma-integration">LUMA Integration</h2>
<p>The attributes and entitlements collected from IdPs can be very useful for 
mapping storage users to Onedata users - see 
<a href="../luma.html">Local User Mapping (LUMA)</a>. Each time a provider requests LUMA to
resolve storage credentials (uid:gid etc), it sends the attributes collected
from IdPs. They can be used to differentiate and identify the storage users.</p>
<h2 id="custom-icon-guidelines">Custom icon guidelines</h2>
<p>To use your custom icon on the login page, place it on the Onezone host under the 
path <code>/var/www/html/custom/oz_worker/&lt;path&gt;</code> and reference it in the config like 
this: <code>iconPath =&gt; &quot;/custom/&lt;path&gt;&quot;</code>. If you are using docker-compose, simply 
mount your icon by adding a volume, for example: </p>
<pre><code># docker-compose.yaml

    ...
    volumes:
      - &quot;/path/to/your/icon.svg:/var/www/html/custom/oz_worker/my-icon.svg&quot;
    ...

----------------------------------------------
# test.auth.config

    ...
    iconPath =&gt; &quot;/custom/my-icon.svg&quot;,
    ...
</code></pre><blockquote>
<p>NOTE: The path changes to <code>/var/www/html/oz_worker/custom/&lt;path&gt;</code> in Onezone
versions <code>19.02.*</code>.</p>
</blockquote>
<p>Please follow the guidelines below for the best visual effects:</p>
<ul>
<li>The preferred image format is vector graphics in SVG.</li>
<li>Avoid raster (bitmap) graphics embedded in an SVG - some browsers
(e.g. Firefox) do not handle them well.</li>
<li>If you don&apos;t have an SVG version, PNG with transparency is preferred over JPG. </li>
<li>It&apos;s best if your icon is placed on a square canvas (see the image below).</li>
<li>The canvas should be transparent, in such case <code>iconBackground</code> color will be
visible underneath. You can use a custom background, but make sure you fill the
whole canvas with it and make it a perfect square, otherwise the background 
color might show through.</li>
<li>In case of a bitmap image (PNG, JPG), the canvas size should be 50x50 pixels,
or any multiple of it. Consider the size of 200x200 pixels for good quality on 
retina displays.</li>
<li>The icon canvas takes up the whole space on the login button. It means that 
there are no automatic margins - you should introduce the desired margins on 
the canvas (see the image below).</li>
<li>Make sure to center you icon on the image canvas (unless, of course, you want
it to be asymmetric).</li>
</ul>
<p><img style="display:block;margin:0 auto;" src="../img/custom-icon.png"></p>
<h2 id="test-login-page">Test login page</h2>
<p>Since version <code>18.02.1</code>, it is possible to test your <code>auth.config</code> using the 
test login page without interrupting the Onezone service. It also serves as a
way to diagnose problems during integration with IdPs, including attribute or
entitlement mapping. To use the test login page, place your <code>auth.config</code> on the 
Onezone host under the path <code>/etc/oz_worker/test.auth.config</code>. The test config
coexists with the production <code>/etc/oz_worker/auth.config</code> with no interference. 
It is not cached at all, so that you can introduce changes while the Onezone 
service is online and verify the results immediately. To go through the test 
login process, go to <code>https://onezone.example.com/#/test/login</code>. You will see 
the IdPs that are specified in your <code>test.auth.config</code> and an indication that 
this is a test login page (see the first image below). By choosing one of the 
IdPs, you will go through a simulation of the login process and receive a 
summary at the end (see the second image below). While it uses the standard flow 
in the IdP, on the Onezone side no users or groups (resulting from entitlements) 
are created in the process. The summary expresses what information would be 
gathered if it were a production login flow, and includes detailed logs from the 
whole login process. </p>
<blockquote>
<p>The SAML SP metadata XML based on <code>test.auth.config</code> can be viewed under the
following URL: <code>https://onezone.example.com/saml/sp.xml?test=true</code></p>
</blockquote>
<p><img style="display:block;margin:0 auto;" src="../img/test-login-page.png"></p>
<p><img style="display:block;margin:0 auto;" src="../img/test-login-output.png"></p>
<h2 id="complete-example">Complete example</h2>
<p>A complete exemplary <code>auth.config</code> file is presented below. It can also be found
on your Onezone node under <code>/etc/oz_worker/template.auth.config</code>.</p>
<pre><code class="lang-Erlang">#<span class="hljs-tuple">{
    version =&gt; <span class="hljs-number">2</span>,

    <span class="hljs-comment">% Allows to log in to Onezone using the account from Onepanel (user &amp; password).</span>
    onepanel<span class="hljs-variable">AuthConfig</span> =&gt; #<span class="hljs-tuple">{
        enabled =&gt; true
    }</span>,

    openid<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
        <span class="hljs-comment">% Enable OpenID login protocol - if disabled, all OpenID IdPs will be</span>
        <span class="hljs-comment">% hidden from the login page.</span>
        enabled =&gt; true,
        <span class="hljs-comment">% Default config for every OpenID IdP, can be overridden in IdP config</span>
        default<span class="hljs-variable">ProtocolConfig</span> =&gt; #<span class="hljs-tuple">{
            <span class="hljs-comment">% Internal plugin that will be used for handling the login process -</span>
            <span class="hljs-comment">% if the IdP uses standard OpenID Connect protocol,</span>
            <span class="hljs-comment">% default_oidc_plugin is the way to go. If not, IdP specific plugin</span>
            <span class="hljs-comment">% can be implemented and specified here.</span>
            plugin =&gt; default_oidc_plugin,
            <span class="hljs-comment">% Config specific for default_oidc_plugin</span>
            plugin<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
                <span class="hljs-comment">% Scope requested from OpenID Connect IdP</span>
                scope =&gt; <span class="hljs-string">&quot;openid email profile&quot;</span>,
                <span class="hljs-comment">% HTTP method used to exchange auth code for an access token: post | get</span>
                access<span class="hljs-variable">TokenAcquireMethod</span> =&gt; post,
                <span class="hljs-comment">% How the client secret should be sent to the IdP: urlencoded | inAuthHeader</span>
                client<span class="hljs-variable">SecretPassMethod</span> =&gt; urlencoded,
                <span class="hljs-comment">% How user&apos;s access token should be sent to the IdP: urlencoded | inAuthHeader</span>
                access<span class="hljs-variable">TokenPassMethod</span> =&gt; in<span class="hljs-variable">AuthHeader</span>,
                <span class="hljs-comment">% Allows to augment requests with additional data</span>
                custom<span class="hljs-variable">Data</span> =&gt; #<span class="hljs-tuple">{
                    <span class="hljs-comment">% Additional data for access_token endpoint request</span>
                    access<span class="hljs-variable">Token</span> =&gt; #<span class="hljs-tuple">{
                        <span class="hljs-comment">% query string or post body parameters (key-value)</span>
                        parameters =&gt; undefined,
                        <span class="hljs-comment">% headers (key-value)</span>
                        headers =&gt; undefined
                    }</span>,
                    <span class="hljs-comment">% Additional data for userinfo endpoint request</span>
                    user<span class="hljs-variable">Info</span> =&gt; #<span class="hljs-tuple">{
                        parameters =&gt; undefined,
                        headers =&gt; undefined
                    }</span>
                }</span>
            }</span>,
            <span class="hljs-comment">% Enables/disables authorization using access tokens from the IdP</span>
            <span class="hljs-comment">% Supported only in OpenID protocol</span>
            authority<span class="hljs-variable">Delegation</span> =&gt; #<span class="hljs-tuple">{
                <span class="hljs-comment">% Enabled for this IdP</span>
                enabled =&gt; true
                <span class="hljs-comment">% The tokenPrefix attribute defines a prefix used to distinguish</span>
                <span class="hljs-comment">% tokens from given IdP. It defaults to &quot;&lt;idp&gt;:&quot;, where &lt;idp&gt; is</span>
                <span class="hljs-comment">% the identifier used in config. Can be overriden in IdP config,</span>
                <span class="hljs-comment">% like the following:</span>
                <span class="hljs-comment">%       tokenPrefix =&gt; &quot;my-idp/&quot;</span>
                <span class="hljs-comment">% Exemplary token usage with with such config:</span>
                <span class="hljs-comment">% curl -H &quot;X-Auth-Token: my-idp/lkj9s87rf1234SDfh6721hqd7991&quot; ...</span>
            }</span>,
            <span class="hljs-comment">% Defines how the attributes from OpenID user info should be mapped</span>
            <span class="hljs-comment">% to Onedata user attributes. Attributes must correspond to existing</span>
            <span class="hljs-comment">% OpenID attributes.</span>
            attribute<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
                subject<span class="hljs-variable">Id</span> =&gt; <span class="hljs-tuple">{required, <span class="hljs-string">&quot;sub&quot;</span>}</span>,
                alias =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;username&quot;</span>}</span>,
                name =&gt; <span class="hljs-tuple">{required, <span class="hljs-tuple">{any, [<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;fullName&quot;</span>]}</span>}</span>,
                emails =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;email&quot;</span>}</span>,
                entitlements =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;groups&quot;</span>}</span>,
                custom =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;name&quot;</span>}</span>
            }</span>,
            <span class="hljs-comment">% Rules for mapping entitlements in the IdP into entitlements in Onedata.</span>
            entitlement<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
                enabled =&gt; false
            }</span>
        }</span>
    }</span>,

    saml<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
        <span class="hljs-comment">% Enable SAML login protocol - if disabled, all SAML IdPs will be hidden</span>
        <span class="hljs-comment">% from the login page and the endpoint serving SAML metadata will be</span>
        <span class="hljs-comment">% disabled.</span>
        enabled =&gt; true,
        <span class="hljs-comment">% Information used to build SAML SP metadata XML, refer to SAML</span>
        <span class="hljs-comment">% documentation for details on below attributes.</span>
        sp<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
            entity<span class="hljs-variable">Id</span> =&gt; <span class="hljs-string">&quot;https://onezone.example.com/sp&quot;</span>,
            cert<span class="hljs-variable">File</span> =&gt; <span class="hljs-string">&quot;/etc/oz_worker/certs/saml_cert.pem&quot;</span>,
            key<span class="hljs-variable">File</span> =&gt; <span class="hljs-string">&quot;/etc/oz_worker/certs/saml_key.pem&quot;</span>,
            organization<span class="hljs-variable">Name</span> =&gt; <span class="hljs-string">&quot;My organization&quot;</span>,
            organization<span class="hljs-variable">DisplayName</span> =&gt; <span class="hljs-string">&quot;My organization&quot;</span>,
            tech<span class="hljs-variable">ContactName</span> =&gt; <span class="hljs-string">&quot;John Doe&quot;</span>,
            tech<span class="hljs-variable">ContactEmail</span> =&gt; <span class="hljs-string">&quot;john.doe@onezone.example.com&quot;</span>,
            <span class="hljs-comment">% Should the metadata be signed with keyFile</span>
            sign<span class="hljs-variable">Metadata</span> =&gt; false,
            <span class="hljs-comment">% Should the Auth Requests be signed with keyFile</span>
            sign<span class="hljs-variable">Requests</span> =&gt; true,
            <span class="hljs-comment">% Should Onezone request signed assertions</span>
            want<span class="hljs-variable">AssertionsSigned</span> =&gt; true
        }</span>,
        <span class="hljs-comment">% Default config for every SAML IdP, can be overridden in IdP config</span>
        default<span class="hljs-variable">ProtocolConfig</span> =&gt; #<span class="hljs-tuple">{
            <span class="hljs-comment">% SSO binding - defines what type of request should be performed</span>
            <span class="hljs-comment">% to redirect the user to the IdP&apos;s login page. Possible values:</span>
            <span class="hljs-comment">% http_redirect (default) or http_post</span>
            preferred<span class="hljs-variable">SsoBinding</span> =&gt; http_redirect,
            <span class="hljs-comment">% Defines how the attributes from SAML user info should be mapped</span>
            <span class="hljs-comment">% to Onedata user attributes. Attributes must correspond to existing</span>
            <span class="hljs-comment">% SAML attributes.</span>
            attribute<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
                subject<span class="hljs-variable">Id</span> =&gt; <span class="hljs-tuple">{required, <span class="hljs-string">&quot;eduPersonTargetedID&quot;</span>}</span>,
                alias =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;eduPersonPrincipalName&quot;</span>}</span>,
                name =&gt; <span class="hljs-tuple">{required, <span class="hljs-tuple">{any, [<span class="hljs-string">&quot;displayName&quot;</span>, <span class="hljs-string">&quot;surName&quot;</span>]}</span>}</span>,
                emails =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;mail&quot;</span>}</span>,
                entitlements =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;eduPersonEntitlement&quot;</span>}</span>,
                custom =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;eduPersonScopedAffiliation&quot;</span>}</span>
            }</span>,
            <span class="hljs-comment">% Rules for mapping entitlements in IdP into entitlements in Onedata.</span>
            entitlement<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
                <span class="hljs-comment">% Enable / disable entitlement mapping for given IdP</span>
                enabled =&gt; true,
                <span class="hljs-comment">% The name of the parent group to which all groups from this IdP</span>
                <span class="hljs-comment">% will belong (reflecting a Virtual Organization)</span>
                vo<span class="hljs-variable">GroupName</span> =&gt; undefined,
                <span class="hljs-comment">% A special group that has admin rights to all groups from this</span>
                <span class="hljs-comment">% IdP.</span>
                admin<span class="hljs-variable">Group</span> =&gt; undefined,
                <span class="hljs-comment">% Erlang module (plugin) that will be used to parse user&apos;s</span>
                <span class="hljs-comment">% entitlements from this IdP</span>
                parser =&gt; nested_entitlement_parser,
                <span class="hljs-comment">% Config specific for the nested_entitlement_parser</span>
                parser<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
                    split<span class="hljs-variable">With</span> =&gt; <span class="hljs-string">&quot;/&quot;</span>,
                    top<span class="hljs-variable">GroupType</span> =&gt; unit,
                    top<span class="hljs-variable">GroupPrivilegesInVo</span> =&gt; member,
                    sub<span class="hljs-variable">GroupsType</span> =&gt; team,
                    sub<span class="hljs-variable">GroupsPrivilegesInParent</span> =&gt; member,
                    user<span class="hljs-variable">Privileges</span> =&gt; member
                }</span>
            }</span>
        }</span>
    }</span>,

    supported<span class="hljs-variable">Idps</span> =&gt; [

        <span class="hljs-comment">% onepanel is a special IdP id reserved for onepanel login and the</span>
        <span class="hljs-comment">% only valid config entry using the onepanelAuth protocol.</span>
        <span class="hljs-tuple">{onepanel, #<span class="hljs-tuple">{
            <span class="hljs-comment">% Configuration of the login page button</span>
            display<span class="hljs-variable">Name</span> =&gt; <span class="hljs-string">&quot;Onepanel account&quot;</span>,
            <span class="hljs-comment">% Some predefined icons are built-in into the GUI app.</span>
            <span class="hljs-comment">% Their paths start with /assets/images/auth-providers.</span>
            <span class="hljs-comment">% For a custom icon, put it in:</span>
            <span class="hljs-comment">%   /var/www/html/custom/oz_worker/&lt;path&gt;</span>
            <span class="hljs-comment">% And reference it here like this: /custom/&lt;path&gt;</span>
            icon<span class="hljs-variable">Path</span> =&gt; <span class="hljs-string">&quot;/assets/images/auth-providers/onepanel.svg&quot;</span>,
            <span class="hljs-comment">% Background color is useful for icons with transparency. Moreover,</span>
            <span class="hljs-comment">% after selecting an IdP, its icon disappears and a spinner is</span>
            <span class="hljs-comment">% shown - hence background color should be kept the same as icon&apos;s</span>
            <span class="hljs-comment">% background color (if any).</span>
            icon<span class="hljs-variable">BackgroundColor</span> =&gt; <span class="hljs-string">&quot;#4BD187&quot;</span>,

            <span class="hljs-comment">% Which protocol is used for this IdP - onepanelAuth is the only</span>
            <span class="hljs-comment">% valid one for onepanel IdP.</span>
            protocol =&gt; onepanel<span class="hljs-variable">Auth</span>
        }</span>}</span>,

        <span class="hljs-tuple">{google, #<span class="hljs-tuple">{
            <span class="hljs-comment">% Configuration of the login page button</span>
            display<span class="hljs-variable">Name</span> =&gt; <span class="hljs-string">&quot;Google&quot;</span>,
            <span class="hljs-comment">% Some predefined icons are built-in into the GUI app.</span>
            <span class="hljs-comment">% Their paths start with /assets/images/auth-providers.</span>
            <span class="hljs-comment">% For a custom icon, put it in:</span>
            <span class="hljs-comment">%   /var/www/html/custom/oz_worker/&lt;path&gt;</span>
            <span class="hljs-comment">% And reference it here like this: /custom/&lt;path&gt;</span>
            icon<span class="hljs-variable">Path</span> =&gt; <span class="hljs-string">&quot;/assets/images/auth-providers/google.svg&quot;</span>,
            <span class="hljs-comment">% Background color is useful for icons with transparency. Moreover,</span>
            <span class="hljs-comment">% after selecting an IdP, its icon disappears and a spinner is</span>
            <span class="hljs-comment">% shown - hence background color should be kept the same as icon&apos;s</span>
            <span class="hljs-comment">% background color (if any).</span>
            icon<span class="hljs-variable">BackgroundColor</span> =&gt; <span class="hljs-string">&quot;#F1514F&quot;</span>,

            <span class="hljs-comment">% Which protocol is used for this IdP</span>
            protocol =&gt; openid,
            <span class="hljs-comment">% Configuration specific for OpenID protocol - overrides the default</span>
            protocol<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
                <span class="hljs-comment">% Internal plugin that will be used for handling the login process -</span>
                <span class="hljs-comment">% if the IdP uses standard OpenID Connect protocol,</span>
                <span class="hljs-comment">% default_oidc_plugin is the way to go. If not, IdP specific plugin</span>
                <span class="hljs-comment">% can be implemented and specified here.</span>
                plugin =&gt; default_oidc_plugin,
                <span class="hljs-comment">% Config specific for default_oidc_plugin</span>
                plugin<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
                    <span class="hljs-comment">% Client Id and secret acquired during registration</span>
                    client<span class="hljs-variable">Id</span> =&gt; <span class="hljs-string">&quot;****************************************************&quot;</span>,
                    client<span class="hljs-variable">Secret</span> =&gt; <span class="hljs-string">&quot;****************************************************&quot;</span>,
                    <span class="hljs-comment">% Defines how to resolve OpenID endpoints</span>
                    endpoints =&gt; #<span class="hljs-tuple">{
                        <span class="hljs-comment">% The XRDS endpoint, will be used if referenced in below endpoints</span>
                        xrds =&gt; <span class="hljs-string">&quot;https://accounts.google.com/.well-known/openid-configuration&quot;</span>,
                        <span class="hljs-comment">% standard OIDC endpoints - literal URLs or tuples {xrds, &quot;key&quot;} -</span>
                        <span class="hljs-comment">% &quot;key&quot; will be extracted from the XRDS JSON.</span>
                        authorize =&gt; <span class="hljs-tuple">{xrds, <span class="hljs-string">&quot;authorization_endpoint&quot;</span>}</span>,
                        access<span class="hljs-variable">Token</span> =&gt; <span class="hljs-tuple">{xrds, <span class="hljs-string">&quot;token_endpoint&quot;</span>}</span>,
                        user<span class="hljs-variable">Info</span> =&gt; <span class="hljs-tuple">{xrds, <span class="hljs-string">&quot;userinfo_endpoint&quot;</span>}</span>
                    }</span>,
                    <span class="hljs-comment">% Scope requested from OpenID Connect IdP</span>
                    scope =&gt; <span class="hljs-string">&quot;openid email profile&quot;</span>,
                    <span class="hljs-comment">% HTTP method used to exchange auth code for an access token: post | get</span>
                    access<span class="hljs-variable">TokenAcquireMethod</span> =&gt; post,
                    <span class="hljs-comment">% How the client secret should be sent to the IdP: urlencoded | inAuthHeader</span>
                    client<span class="hljs-variable">SecretPassMethod</span> =&gt; urlencoded,
                    <span class="hljs-comment">% How user&apos;s access token should be sent to the IdP: urlencoded | inAuthHeader</span>
                    access<span class="hljs-variable">TokenPassMethod</span> =&gt; in<span class="hljs-variable">AuthHeader</span>,
                    <span class="hljs-comment">% Allows to augment requests with additional data</span>
                    custom<span class="hljs-variable">Data</span> =&gt; #<span class="hljs-tuple">{
                        <span class="hljs-comment">% Additional data for access_token endpoint request</span>
                        access<span class="hljs-variable">Token</span> =&gt; #<span class="hljs-tuple">{
                            <span class="hljs-comment">% query string or post body parameters (key-value)</span>
                            parameters =&gt; #<span class="hljs-tuple">{<span class="hljs-string">&quot;param1&quot;</span> =&gt; <span class="hljs-string">&quot;val1&quot;</span>}</span>,
                            <span class="hljs-comment">% headers (key-value)</span>
                            headers =&gt; #<span class="hljs-tuple">{<span class="hljs-string">&quot;header1&quot;</span> =&gt; <span class="hljs-string">&quot;val1&quot;</span>}</span>
                        }</span>,
                        <span class="hljs-comment">% Additional data for userinfo endpoint request</span>
                        user<span class="hljs-variable">Info</span> =&gt; #<span class="hljs-tuple">{
                            parameters =&gt; #<span class="hljs-tuple">{<span class="hljs-string">&quot;param2&quot;</span> =&gt; <span class="hljs-string">&quot;val2&quot;</span>}</span>,
                            headers =&gt; #<span class="hljs-tuple">{<span class="hljs-string">&quot;header2&quot;</span> =&gt; <span class="hljs-string">&quot;val2&quot;</span>}</span>
                        }</span>
                    }</span>
                }</span>,

                <span class="hljs-comment">% Enables/disables authorization using access tokens from the IdP</span>
                <span class="hljs-comment">% Supported only in OpenID protocol</span>
                authority<span class="hljs-variable">Delegation</span> =&gt; #<span class="hljs-tuple">{
                    <span class="hljs-comment">% Enabled for this IdP</span>
                    enabled =&gt; true,
                    <span class="hljs-comment">% The tokenPrefix attribute defines a prefix used to distinguish</span>
                    <span class="hljs-comment">% tokens from given IdP.</span>
                    <span class="hljs-comment">% Exemplary token usage with the below such config:</span>
                    <span class="hljs-comment">% curl -H &quot;X-Auth-Token: google:lkj9s87rf1234SDfh6721hqd7991&quot; ...</span>
                    token<span class="hljs-variable">Prefix</span> =&gt; <span class="hljs-string">&quot;google:&quot;</span>
                }</span>,
                <span class="hljs-comment">% Defines how the attributes from OpenID user info should be mapped</span>
                <span class="hljs-comment">% to Onedata user attributes. Attributes must correspond to existing</span>
                <span class="hljs-comment">% OpenID attributes.</span>
                attribute<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
                    subject<span class="hljs-variable">Id</span> =&gt; <span class="hljs-tuple">{required, <span class="hljs-string">&quot;sub&quot;</span>}</span>,
                    name =&gt; <span class="hljs-tuple">{required, <span class="hljs-tuple">{any, [<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;fullName&quot;</span>]}</span>}</span>,
                    alias =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;username&quot;</span>}</span>,
                    emails =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;email&quot;</span>}</span>,
                    entitlements =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;given_name&quot;</span>}</span>,
                    custom =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;given_name&quot;</span>}</span>
                }</span>,
                <span class="hljs-comment">% Rules for mapping entitlements in the IdP into entitlements in Onedata.</span>
                entitlement<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
                    enabled =&gt; true,
                    <span class="hljs-comment">% The name of the parent group to which all groups from this IdP</span>
                    <span class="hljs-comment">% will belong (reflecting a Virtual Organization)</span>
                    vo<span class="hljs-variable">GroupName</span> =&gt; undefined,
                    <span class="hljs-comment">% A special group that has admin rights to all groups from this</span>
                    <span class="hljs-comment">% IdP.</span>
                    admin<span class="hljs-variable">Group</span> =&gt; undefined,
                    parser =&gt; flat_entitlement_parser,
                    parser<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
                        group<span class="hljs-variable">Type</span> =&gt; team,
                        group<span class="hljs-variable">PrivilegesInVo</span> =&gt; member,
                        user<span class="hljs-variable">Privileges</span> =&gt; member
                    }</span>
                }</span>
            }</span>
        }</span>}</span>,

        <span class="hljs-tuple">{elixir, #<span class="hljs-tuple">{
            <span class="hljs-comment">% Configuration of the login page button</span>
            display<span class="hljs-variable">Name</span> =&gt; <span class="hljs-string">&quot;Elixir&quot;</span>,
            <span class="hljs-comment">% To use the icon like below, put it in:</span>
            <span class="hljs-comment">%   /var/www/html/custom/oz_worker/images/elixir.svg</span>
            icon<span class="hljs-variable">Path</span> =&gt; <span class="hljs-string">&quot;/custom/images/elixir.svg&quot;</span>,
            <span class="hljs-comment">% Background color is useful for icons with transparency. Moreover,</span>
            <span class="hljs-comment">% after selecting an IdP, its icon disappears and a spinner is</span>
            <span class="hljs-comment">% shown - hence background color should be kept the same as icon&apos;s</span>
            <span class="hljs-comment">% background color (if any).</span>
            icon<span class="hljs-variable">BackgroundColor</span> =&gt; <span class="hljs-string">&quot;#FF7A04&quot;</span>,

            <span class="hljs-comment">% Which protocol is used for this IdP</span>
            protocol =&gt; saml,
            <span class="hljs-comment">% Configuration specific for SAML protocol - overrides the default</span>
            protocol<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
                <span class="hljs-comment">% URL pointing to IdP SAML metadata XML</span>
                metadata<span class="hljs-variable">Url</span> =&gt; <span class="hljs-string">&quot;https://login.elixir-czech.org/proxy/saml2/idp/metadata.php&quot;</span>,
                <span class="hljs-comment">% SSO binding - defines what type of request should be performed</span>
                <span class="hljs-comment">% to redirect the user to the IdP&apos;s login page. Possible values:</span>
                <span class="hljs-comment">% http_redirect (default) or http_post</span>
                preferred<span class="hljs-variable">SsoBinding</span> =&gt; http_redirect,
                <span class="hljs-comment">% Defines how the attributes from SAML user info should be mapped</span>
                <span class="hljs-comment">% to Onedata user attributes. Attributes must correspond to existing</span>
                <span class="hljs-comment">% SAML attributes.</span>
                attribute<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
                    subject<span class="hljs-variable">Id</span> =&gt; <span class="hljs-tuple">{required, <span class="hljs-string">&quot;eduPersonUniqueId&quot;</span>}</span>,
                    alias =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;eduPersonPrincipalName&quot;</span>}</span>,
                    name =&gt; <span class="hljs-tuple">{required, <span class="hljs-string">&quot;displayName&quot;</span>}</span>,
                    emails =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;mail&quot;</span>}</span>,
                    entitlements =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;eduPersonEntitlement&quot;</span>}</span>,
                    custom =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;eduPersonScopedAffiliation&quot;</span>}</span>
                }</span>,
                <span class="hljs-comment">% Rules for mapping entitlements in IdP into entitlements in Onedata.</span>
                entitlement<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
                    <span class="hljs-comment">% Enable / disable entitlement mapping for given IdP</span>
                    enabled =&gt; true,
                    <span class="hljs-comment">% The name of the parent group to which all groups from this IdP</span>
                    <span class="hljs-comment">% will belong (reflecting a Virtual Organization)</span>
                    vo<span class="hljs-variable">GroupName</span> =&gt; <span class="hljs-string">&quot;Elixir&quot;</span>,
                    <span class="hljs-comment">% A special group that has admin rights to all groups from this</span>
                    <span class="hljs-comment">% IdP.</span>
                    admin<span class="hljs-variable">Group</span> =&gt; <span class="hljs-string">&quot;elixir_test:tsi-admin&quot;</span>,
                    <span class="hljs-comment">% Erlang module (plugin) that will be used to parse user&apos;s</span>
                    <span class="hljs-comment">% entitlements from this IdP</span>
                    parser =&gt; nested_entitlement_parser,
                    <span class="hljs-comment">% Config specific for the nested_entitlement_parser</span>
                    parser<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
                        split<span class="hljs-variable">With</span> =&gt; <span class="hljs-string">&quot;:&quot;</span>,
                        top<span class="hljs-variable">GroupType</span> =&gt; unit,
                        top<span class="hljs-variable">GroupPrivilegesInVo</span> =&gt; member,
                        sub<span class="hljs-variable">GroupsType</span> =&gt; team,
                        sub<span class="hljs-variable">GroupsPrivilegesInParent</span> =&gt; member,
                        user<span class="hljs-variable">Privileges</span> =&gt; member
                    }</span>
                }</span>
            }</span>
        }</span>}</span>
    ]
}</span>.
</code></pre>
<h2 id="exemplary-entries-for-selected-idps">Exemplary entries for selected IdPs</h2>
<p>Below are some working config examples that use predefined icons. In case of 
OpenID IdPs, it is required to insert the Client Id and Secret in the config.</p>
<h3 id="onepanel-config-onepanelauth">Onepanel config (onepanelAuth)</h3>
<pre><code class="lang-Erlang"><span class="hljs-tuple">{onepanel, #<span class="hljs-tuple">{
    display<span class="hljs-variable">Name</span> =&gt; <span class="hljs-string">&quot;Onepanel account&quot;</span>,
    icon<span class="hljs-variable">Path</span> =&gt; <span class="hljs-string">&quot;/assets/images/auth-providers/onepanel.svg&quot;</span>,
    icon<span class="hljs-variable">BackgroundColor</span> =&gt; <span class="hljs-string">&quot;#4BD187&quot;</span>,
    protocol =&gt; onepanel<span class="hljs-variable">Auth</span>
}</span>}</span>
</code></pre>
<h3 id="keycloak-config-openid-connect">KeyCloak config (OpenID Connect)</h3>
<pre><code class="lang-Erlang"><span class="hljs-tuple">{keycloak<span class="hljs-variable">IdP</span>, #<span class="hljs-tuple">{
    display<span class="hljs-variable">Name</span> =&gt; <span class="hljs-string">&quot;RHEA KeyCloak&quot;</span>,
    icon<span class="hljs-variable">Path</span> =&gt; <span class="hljs-string">&quot;/assets/images/auth-providers/rhea.svg&quot;</span>,
    icon<span class="hljs-variable">BackgroundColor</span> =&gt; <span class="hljs-string">&quot;#B51017&quot;</span>,
    protocol =&gt; openid,
    protocol<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
        plugin =&gt; default_oidc_plugin,
        plugin<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
            client<span class="hljs-variable">Id</span> =&gt; <span class="hljs-string">&quot;****************************************************&quot;</span>,
            client<span class="hljs-variable">Secret</span> =&gt; <span class="hljs-string">&quot;****************************************************&quot;</span>,
            endpoints =&gt; #<span class="hljs-tuple">{
                xrds =&gt; <span class="hljs-string">&quot;https://fed-id.nuv.la/auth/realms/SixSq/.well-known/openid-configuration&quot;</span>,
                authorize =&gt; <span class="hljs-tuple">{xrds, <span class="hljs-string">&quot;authorization_endpoint&quot;</span>}</span>,
                access<span class="hljs-variable">Token</span> =&gt; <span class="hljs-tuple">{xrds, <span class="hljs-string">&quot;token_endpoint&quot;</span>}</span>,
                user<span class="hljs-variable">Info</span> =&gt; <span class="hljs-tuple">{xrds, <span class="hljs-string">&quot;userinfo_endpoint&quot;</span>}</span>
            }</span>,
            scope =&gt; <span class="hljs-string">&quot;openid email profile&quot;</span>,
            access<span class="hljs-variable">TokenAcquireMethod</span> =&gt; post,
            client<span class="hljs-variable">SecretPassMethod</span> =&gt; urlencoded,
            access<span class="hljs-variable">TokenPassMethod</span> =&gt; in<span class="hljs-variable">AuthHeader</span>,
            custom<span class="hljs-variable">Data</span> =&gt; #<span class="hljs-tuple">{}</span>
        }</span>,

        authority<span class="hljs-variable">Delegation</span> =&gt; #<span class="hljs-tuple">{
            enabled =&gt; true,
            token<span class="hljs-variable">Prefix</span> =&gt; <span class="hljs-string">&quot;keycloakIdP:&quot;</span>
        }</span>,

        attribute<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
            subject<span class="hljs-variable">Id</span> =&gt; <span class="hljs-tuple">{required, <span class="hljs-string">&quot;sub&quot;</span>}</span>,
            name =&gt; <span class="hljs-tuple">{required, <span class="hljs-tuple">{any, [<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;fullName&quot;</span>]}</span>}</span>,
            alias =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;username&quot;</span>}</span>,
            emails =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;email&quot;</span>}</span>,
            entitlements =&gt; <span class="hljs-tuple">{optional, <span class="hljs-tuple">{append, [<span class="hljs-string">&quot;groups&quot;</span>, <span class="hljs-string">&quot;roles&quot;</span>]}</span>}</span>,
            custom =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;given_name&quot;</span>}</span>
        }</span>,

        entitlement<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
            enabled =&gt; true,
            vo<span class="hljs-variable">GroupName</span> =&gt; <span class="hljs-string">&quot;Keycloak IdP&quot;</span>,
            admin<span class="hljs-variable">Group</span> = undefined,
            parser =&gt; nested_entitlement_parser,
            parser<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
                split<span class="hljs-variable">With</span> =&gt; <span class="hljs-string">&quot;/&quot;</span>,
                top<span class="hljs-variable">GroupType</span> =&gt; team,
                top<span class="hljs-variable">GroupPrivilegesInVo</span> =&gt; member,
                sub<span class="hljs-variable">GroupsType</span> =&gt; team,
                sub<span class="hljs-variable">GroupsPrivilegesInParent</span> =&gt; member,
                user<span class="hljs-variable">Privileges</span> =&gt; member
            }</span>
        }</span>
    }</span>
}</span>}</span>
</code></pre>
<h3 id="google-config-openid-connect">Google+ config (OpenID Connect)</h3>
<pre><code class="lang-Erlang"><span class="hljs-tuple">{google, #<span class="hljs-tuple">{
    display<span class="hljs-variable">Name</span> =&gt; <span class="hljs-string">&quot;Google&quot;</span>,
    icon<span class="hljs-variable">Path</span> =&gt; <span class="hljs-string">&quot;/assets/images/auth-providers/google.svg&quot;</span>,
    icon<span class="hljs-variable">BackgroundColor</span> =&gt; <span class="hljs-string">&quot;#F1514F&quot;</span>,
    protocol =&gt; openid,
    protocol<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
        plugin =&gt; default_oidc_plugin,
        plugin<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
            client<span class="hljs-variable">Id</span> =&gt; <span class="hljs-string">&quot;****************************************************&quot;</span>,
            client<span class="hljs-variable">Secret</span> =&gt; <span class="hljs-string">&quot;****************************************************&quot;</span>,
            endpoints =&gt; #<span class="hljs-tuple">{
                xrds =&gt; <span class="hljs-string">&quot;https://accounts.google.com/.well-known/openid-configuration&quot;</span>,
                authorize =&gt; <span class="hljs-tuple">{xrds, <span class="hljs-string">&quot;authorization_endpoint&quot;</span>}</span>,
                access<span class="hljs-variable">Token</span> =&gt; <span class="hljs-tuple">{xrds, <span class="hljs-string">&quot;token_endpoint&quot;</span>}</span>,
                user<span class="hljs-variable">Info</span> =&gt; <span class="hljs-tuple">{xrds, <span class="hljs-string">&quot;userinfo_endpoint&quot;</span>}</span>
            }</span>,
            scope =&gt; <span class="hljs-string">&quot;openid email profile&quot;</span>,
            access<span class="hljs-variable">TokenAcquireMethod</span> =&gt; post,
            client<span class="hljs-variable">SecretPassMethod</span> =&gt; urlencoded,
            access<span class="hljs-variable">TokenPassMethod</span> =&gt; urlencoded,
            custom<span class="hljs-variable">Data</span> =&gt; #<span class="hljs-tuple">{}</span>
        }</span>,

        authority<span class="hljs-variable">Delegation</span> =&gt; #<span class="hljs-tuple">{
            enabled =&gt; true,
            token<span class="hljs-variable">Prefix</span> =&gt; <span class="hljs-string">&quot;google:&quot;</span>
        }</span>,

        attribute<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
            subject<span class="hljs-variable">Id</span> =&gt; <span class="hljs-tuple">{required, <span class="hljs-string">&quot;sub&quot;</span>}</span>,
            name =&gt; <span class="hljs-tuple">{required, <span class="hljs-tuple">{any, [<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;fullName&quot;</span>]}</span>}</span>,
            alias =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;username&quot;</span>}</span>,
            emails =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;email&quot;</span>}</span>,
            entitlements =&gt; undefined,
            custom =&gt; undefined
        }</span>,

        entitlement<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
            enabled =&gt; false
        }</span>
    }</span>
}</span>}</span>
</code></pre>
<h3 id="facebook-config-openid-connect">Facebook config (OpenID Connect)</h3>
<pre><code class="lang-Erlang"><span class="hljs-tuple">{facebook, #<span class="hljs-tuple">{
    display<span class="hljs-variable">Name</span> =&gt; <span class="hljs-string">&quot;Facebook&quot;</span>,
    icon<span class="hljs-variable">Path</span> =&gt; <span class="hljs-string">&quot;/assets/images/auth-providers/facebook.svg&quot;</span>,
    icon<span class="hljs-variable">BackgroundColor</span> =&gt; <span class="hljs-string">&quot;#5B87C5&quot;</span>,
    protocol =&gt; openid,
    protocol<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
        plugin =&gt; default_oidc_plugin,
        plugin<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
            client<span class="hljs-variable">Id</span> =&gt; <span class="hljs-string">&quot;****************************************************&quot;</span>,
            client<span class="hljs-variable">Secret</span> =&gt; <span class="hljs-string">&quot;****************************************************&quot;</span>,
            endpoints =&gt; #<span class="hljs-tuple">{
                authorize =&gt; <span class="hljs-string">&quot;https://www.facebook.com/dialog/oauth&quot;</span>,
                access<span class="hljs-variable">Token</span> =&gt; <span class="hljs-string">&quot;https://graph.facebook.com/oauth/access_token&quot;</span>,
                user<span class="hljs-variable">Info</span> =&gt; <span class="hljs-string">&quot;https://graph.facebook.com/me&quot;</span>
            }</span>,
            scope =&gt; <span class="hljs-string">&quot;email&quot;</span>,
            access<span class="hljs-variable">TokenAcquireMethod</span> =&gt; get,
            client<span class="hljs-variable">SecretPassMethod</span> =&gt; urlencoded,
            access<span class="hljs-variable">TokenPassMethod</span> =&gt; urlencoded,
            custom<span class="hljs-variable">Data</span> =&gt; #<span class="hljs-tuple">{
                user<span class="hljs-variable">Info</span> =&gt; #<span class="hljs-tuple">{
                    parameters =&gt; #<span class="hljs-tuple">{
                        <span class="hljs-string">&quot;fields&quot;</span> =&gt; <span class="hljs-string">&quot;email,name&quot;</span>
                    }</span>
                }</span>
            }</span>
        }</span>,

        authority<span class="hljs-variable">Delegation</span> =&gt; #<span class="hljs-tuple">{
            enabled =&gt; true,
            token<span class="hljs-variable">Prefix</span> =&gt; <span class="hljs-string">&quot;facebook:&quot;</span>
        }</span>,

        attribute<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
            subject<span class="hljs-variable">Id</span> =&gt; <span class="hljs-tuple">{required, <span class="hljs-string">&quot;id&quot;</span>}</span>,
            name =&gt; <span class="hljs-tuple">{required, <span class="hljs-tuple">{any, [<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;fullName&quot;</span>]}</span>}</span>,
            alias =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;username&quot;</span>}</span>,
            emails =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;email&quot;</span>}</span>,
            entitlements =&gt; undefined,
            custom =&gt; undefined
        }</span>,

        entitlement<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
            enabled =&gt; false
        }</span>
}</span>}</span>
</span></code></pre>
<h3 id="github-config-openid-connect">GitHub config (OpenID Connect)</h3>
<pre><code class="lang-Erlang"><span class="hljs-tuple">{github, #<span class="hljs-tuple">{
    display<span class="hljs-variable">Name</span> =&gt; <span class="hljs-string">&quot;Github&quot;</span>,
    icon<span class="hljs-variable">Path</span> =&gt; <span class="hljs-string">&quot;/assets/images/auth-providers/github.svg&quot;</span>,
    icon<span class="hljs-variable">BackgroundColor</span> =&gt; <span class="hljs-string">&quot;#1E2325&quot;</span>,
    protocol =&gt; openid,
    protocol<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
        plugin =&gt; default_oidc_plugin,
        plugin<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
            client<span class="hljs-variable">Id</span> =&gt; <span class="hljs-string">&quot;****************************************************&quot;</span>,
            client<span class="hljs-variable">Secret</span> =&gt; <span class="hljs-string">&quot;****************************************************&quot;</span>,
            endpoints =&gt; #<span class="hljs-tuple">{
                authorize =&gt; <span class="hljs-string">&quot;https://github.com/login/oauth/authorize&quot;</span>,
                access<span class="hljs-variable">Token</span> =&gt; <span class="hljs-string">&quot;https://github.com/login/oauth/access_token&quot;</span>,
                user<span class="hljs-variable">Info</span> =&gt; [
                    <span class="hljs-string">&quot;https://api.github.com/user&quot;</span>,
                    <span class="hljs-tuple">{<span class="hljs-string">&quot;emails&quot;</span>, <span class="hljs-string">&quot;https://api.github.com/user/emails&quot;</span>}</span>
                ]
            }</span>,
            scope =&gt; <span class="hljs-string">&quot;user,user:email&quot;</span>,
            access<span class="hljs-variable">TokenAcquireMethod</span> =&gt; post,
            client<span class="hljs-variable">SecretPassMethod</span> =&gt; urlencoded,
            access<span class="hljs-variable">TokenPassMethod</span> =&gt; urlencoded,
            custom<span class="hljs-variable">Data</span> =&gt; #<span class="hljs-tuple">{
                user<span class="hljs-variable">Info</span> =&gt; #<span class="hljs-tuple">{
                    headers =&gt; #<span class="hljs-tuple">{
                        <span class="hljs-string">&quot;User-Agent&quot;</span> =&gt; <span class="hljs-string">&quot;Onedata&quot;</span>
                    }</span>
                }</span>
            }</span>
        }</span>,

        authority<span class="hljs-variable">Delegation</span> =&gt; #<span class="hljs-tuple">{
            enabled =&gt; true,
            token<span class="hljs-variable">Prefix</span> =&gt; <span class="hljs-string">&quot;github:&quot;</span>
        }</span>,

        attribute<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
            subject<span class="hljs-variable">Id</span> =&gt; <span class="hljs-tuple">{required, <span class="hljs-string">&quot;id&quot;</span>}</span>,
            name =&gt; <span class="hljs-tuple">{required, <span class="hljs-tuple">{any, [<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;fullName&quot;</span>]}</span>}</span>,
            alias =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;username&quot;</span>}</span>,
            emails =&gt; <span class="hljs-tuple">{optional, <span class="hljs-tuple">{nested, [<span class="hljs-string">&quot;emails&quot;</span>, <span class="hljs-tuple">{list, <span class="hljs-string">&quot;email&quot;</span>}</span>]}</span>}</span>,
            entitlements =&gt; undefined,
            custom =&gt; undefined
        }</span>,

        entitlement<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
            enabled =&gt; false
        }</span>
}</span>}</span>
</span></code></pre>
<h3 id="indigo-config-openid-connect">Indigo config (OpenID Connect)</h3>
<pre><code class="lang-Erlang"><span class="hljs-tuple">{indigo, #<span class="hljs-tuple">{
    display<span class="hljs-variable">Name</span> =&gt; <span class="hljs-string">&quot;Indigo&quot;</span>,
    icon<span class="hljs-variable">Path</span> =&gt; <span class="hljs-string">&quot;/assets/images/auth-providers/indigo.svg&quot;</span>,
    icon<span class="hljs-variable">BackgroundColor</span> =&gt; <span class="hljs-string">&quot;#341246&quot;</span>,
    protocol =&gt; openid,
    protocol<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
        plugin =&gt; default_oidc_plugin,
        plugin<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
            client<span class="hljs-variable">Id</span> =&gt; <span class="hljs-string">&quot;****************************************************&quot;</span>,
            client<span class="hljs-variable">Secret</span> =&gt; <span class="hljs-string">&quot;****************************************************&quot;</span>,
            endpoints =&gt; #<span class="hljs-tuple">{
                xrds =&gt; <span class="hljs-string">&quot;https://iam-test.indigo-datacloud.eu/.well-known/openid-configuration&quot;</span>,
                authorize =&gt; <span class="hljs-tuple">{xrds, <span class="hljs-string">&quot;authorization_endpoint&quot;</span>}</span>,
                access<span class="hljs-variable">Token</span> =&gt; <span class="hljs-tuple">{xrds, <span class="hljs-string">&quot;token_endpoint&quot;</span>}</span>,
                user<span class="hljs-variable">Info</span> =&gt; <span class="hljs-tuple">{xrds, <span class="hljs-string">&quot;userinfo_endpoint&quot;</span>}</span>
            }</span>,
            scope =&gt; <span class="hljs-string">&quot;openid email profile&quot;</span>,
            access<span class="hljs-variable">TokenAcquireMethod</span> =&gt; post,
            client<span class="hljs-variable">SecretPassMethod</span> =&gt; in<span class="hljs-variable">AuthHeader</span>,
            access<span class="hljs-variable">TokenPassMethod</span> =&gt; urlencoded,
            custom<span class="hljs-variable">Data</span> =&gt; #<span class="hljs-tuple">{}</span>
        }</span>,

        authority<span class="hljs-variable">Delegation</span> =&gt; #<span class="hljs-tuple">{
            enabled =&gt; true,
            token<span class="hljs-variable">Prefix</span> =&gt; <span class="hljs-string">&quot;indigo:&quot;</span>
        }</span>,

        attribute<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
            subject<span class="hljs-variable">Id</span> =&gt; <span class="hljs-tuple">{required, <span class="hljs-string">&quot;sub&quot;</span>}</span>,
            name =&gt; <span class="hljs-tuple">{required, <span class="hljs-tuple">{any, [<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-tuple">{concat, [<span class="hljs-string">&quot;given_name&quot;</span>, <span class="hljs-tuple">{str, <span class="hljs-string">&quot; &quot;</span>}</span>, <span class="hljs-string">&quot;family_name&quot;</span>]}</span>]}</span>}</span>,
            alias =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;preferred_username&quot;</span>}</span>,
            emails =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;email&quot;</span>}</span>,
            entitlements =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;groups&quot;</span>}</span>,
            custom =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;given_name&quot;</span>}</span>
        }</span>,

        entitlement<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
            enabled =&gt; true,
            vo<span class="hljs-variable">GroupName</span> =&gt; <span class="hljs-string">&quot;Indigo&quot;</span>,
            admin<span class="hljs-variable">Group</span> =&gt; <span class="hljs-string">&quot;Admins&quot;</span>,
            parser =&gt; nested_entitlement_parser,
            parser<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
                split<span class="hljs-variable">With</span> =&gt; <span class="hljs-string">&quot;/&quot;</span>,
                top<span class="hljs-variable">GroupType</span> =&gt; unit,
                top<span class="hljs-variable">GroupPrivilegesInVo</span> =&gt; member,
                sub<span class="hljs-variable">GroupsType</span> =&gt; team,
                sub<span class="hljs-variable">GroupsPrivilegesInParent</span> =&gt; member,
                user<span class="hljs-variable">Privileges</span> =&gt; member
            }</span>
        }</span>
}</span>}</span>
</span></code></pre>
<h3 id="egi-config-openid-connect">EGI config (OpenID Connect)</h3>
<pre><code class="lang-Erlang"><span class="hljs-tuple">{egi, #<span class="hljs-tuple">{
    display<span class="hljs-variable">Name</span> =&gt; <span class="hljs-string">&quot;EGI&quot;</span>,
    icon<span class="hljs-variable">Path</span> =&gt; <span class="hljs-string">&quot;/assets/images/auth-providers/egi.svg&quot;</span>,
    icon<span class="hljs-variable">BackgroundColor</span> =&gt; <span class="hljs-string">&quot;#0455A1&quot;</span>,
    protocol =&gt; openid,
    protocol<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
        plugin =&gt; default_oidc_plugin,
        plugin<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
            client<span class="hljs-variable">Id</span> =&gt; <span class="hljs-string">&quot;****************************************************&quot;</span>,
            client<span class="hljs-variable">Secret</span> =&gt; <span class="hljs-string">&quot;****************************************************&quot;</span>,
            endpoints =&gt; #<span class="hljs-tuple">{
                xrds =&gt; <span class="hljs-string">&quot;https://aai.egi.eu/oidc/.well-known/openid-configuration&quot;</span>,
                authorize =&gt; <span class="hljs-tuple">{xrds, <span class="hljs-string">&quot;authorization_endpoint&quot;</span>}</span>,
                access<span class="hljs-variable">Token</span> =&gt; <span class="hljs-tuple">{xrds, <span class="hljs-string">&quot;token_endpoint&quot;</span>}</span>,
                user<span class="hljs-variable">Info</span> =&gt; <span class="hljs-tuple">{xrds, <span class="hljs-string">&quot;userinfo_endpoint&quot;</span>}</span>
            }</span>,
            scope =&gt; <span class="hljs-string">&quot;openid email profile&quot;</span>,
            access<span class="hljs-variable">TokenAcquireMethod</span> =&gt; post,
            client<span class="hljs-variable">SecretPassMethod</span> =&gt; in<span class="hljs-variable">AuthHeader</span>,
            access<span class="hljs-variable">TokenPassMethod</span> =&gt; urlencoded,
            custom<span class="hljs-variable">Data</span> =&gt; #<span class="hljs-tuple">{}</span>
        }</span>,

        authority<span class="hljs-variable">Delegation</span> =&gt; #<span class="hljs-tuple">{
            enabled =&gt; true,
            token<span class="hljs-variable">Prefix</span> =&gt; <span class="hljs-string">&quot;egi:&quot;</span>
        }</span>,

        attribute<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
            subject<span class="hljs-variable">Id</span> =&gt; <span class="hljs-tuple">{required, <span class="hljs-string">&quot;sub&quot;</span>}</span>,
            name =&gt; <span class="hljs-tuple">{required, <span class="hljs-tuple">{any, [<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-tuple">{concat, [<span class="hljs-string">&quot;given_name&quot;</span>, <span class="hljs-tuple">{str, <span class="hljs-string">&quot; &quot;</span>}</span>, <span class="hljs-string">&quot;family_name&quot;</span>]}</span>]}</span>}</span>,
            alias =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;preferred_username&quot;</span>}</span>,
            emails =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;email&quot;</span>}</span>,
            entitlements =&gt; <span class="hljs-tuple">{optional, <span class="hljs-tuple">{filter, <span class="hljs-string">&quot;.*#.*&quot;</span>, <span class="hljs-string">&quot;edu_person_entitlements&quot;</span>}</span>}</span>,
            custom =&gt; undefined
        }</span>,

        entitlement<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
            enabled =&gt; true,
            vo<span class="hljs-variable">GroupName</span> =&gt; <span class="hljs-string">&quot;EGI&quot;</span>,
            parser =&gt; custom_entitlement_parser
        }</span>
}</span>}</span>
</span></code></pre>
<h3 id="plgrid-config-openid-20">PLGrid config (OpenID 2.0)</h3>
<pre><code class="lang-Erlang"><span class="hljs-tuple">{plgrid, #<span class="hljs-tuple">{
     display<span class="hljs-variable">Name</span> =&gt; <span class="hljs-string">&quot;PLGrid OpenID&quot;</span>,
     icon<span class="hljs-variable">Path</span> =&gt; <span class="hljs-string">&quot;/assets/images/auth-providers/plgrid.svg&quot;</span>,
     icon<span class="hljs-variable">BackgroundColor</span> =&gt; <span class="hljs-string">&quot;#026381&quot;</span>,
     protocol =&gt; openid,
     protocol<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
         plugin =&gt; plgrid_oidc_plugin,
         plugin<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
             xrds_endpoint =&gt; <span class="hljs-string">&quot;https://openid.plgrid.pl/gateway&quot;</span>
         }</span>,

         authority<span class="hljs-variable">Delegation</span> =&gt; #<span class="hljs-tuple">{
             enabled =&gt; false
         }</span>,

         attribute<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
             subject<span class="hljs-variable">Id</span> =&gt; <span class="hljs-tuple">{required, <span class="hljs-string">&quot;openid.sreg.nickname&quot;</span>}</span>,
             name =&gt; <span class="hljs-tuple">{required, <span class="hljs-string">&quot;openid.sreg.fullname&quot;</span>}</span>,
             alias =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;openid.sreg.nickname&quot;</span>}</span>,
             emails =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;openid.sreg.email&quot;</span>}</span>,
             entitlements =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;openid.ext1.value.teams&quot;</span>}</span>,
             custom =&gt; undefined
         }</span>,

         entitlement<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
             enabled =&gt; true,
             parser =&gt; flat_entitlement_parser,
             parser<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
                 group<span class="hljs-variable">Type</span> =&gt; team,
                 group<span class="hljs-variable">PrivilegesInVo</span> =&gt; member,
                 user<span class="hljs-variable">Privileges</span> =&gt; member
             }</span>
         }</span>
     }</span>
}</span>}</span>
</code></pre>
<h3 id="cern-config-saml">CERN config (SAML)</h3>
<pre><code class="lang-Erlang"><span class="hljs-tuple">{cern, #<span class="hljs-tuple">{
    display<span class="hljs-variable">Name</span> =&gt; &lt;&lt;<span class="hljs-string">&quot;CERN (eduGAIN)&quot;</span>&gt;&gt;,
    icon<span class="hljs-variable">BackgroundColor</span> =&gt; &lt;&lt;<span class="hljs-string">&quot;#0053A1&quot;</span>&gt;&gt;,
    icon<span class="hljs-variable">Path</span> =&gt; &lt;&lt;<span class="hljs-string">&quot;/assets/images/auth-providers/cern.svg&quot;</span>&gt;&gt;,
    protocol =&gt; saml,
    protocol<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
        metadata<span class="hljs-variable">Url</span> =&gt; <span class="hljs-string">&quot;https://met.refeds.org/met/entity/https%3A//cern.ch/login/?viewxml=true&amp;federation=incommon-federation&quot;</span>,
        preferred<span class="hljs-variable">SsoBinding</span> =&gt; http_post,
        attribute<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
            subject<span class="hljs-variable">Id</span> =&gt; <span class="hljs-tuple">{required, <span class="hljs-string">&quot;eduPersonUniqueID&quot;</span>}</span>,
            name =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;displayName&quot;</span>}</span>,
            alias =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;eduPersonPrincipalName&quot;</span>}</span>,
            email =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;mail&quot;</span>}</span>,
            entitlements =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;eduPersonAffiliation&quot;</span>}</span>,
            custom =&gt; undefined
        }</span>,
        entitlement<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
            enabled =&gt; false,
            admin<span class="hljs-variable">Group</span> =&gt; undefined,
            vo<span class="hljs-variable">GroupName</span> =&gt; <span class="hljs-string">&quot;cern&quot;</span>,
            parser =&gt; flat_entitlement_parser,
            parser<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
                group<span class="hljs-variable">PrivilegesInVo</span> =&gt; member,
                group<span class="hljs-variable">Type</span> =&gt; team,
                user<span class="hljs-variable">Privileges</span> =&gt; member
            }</span>
        }</span>
    }</span>
}</span>}</span>
</code></pre>
<h3 id="cnrs-config-saml">CNRS config (SAML)</h3>
<pre><code class="lang-Erlang"><span class="hljs-tuple">{cnrs, #<span class="hljs-tuple">{
    display<span class="hljs-variable">Name</span> =&gt; &lt;&lt;<span class="hljs-string">&quot;CNRS (eduGAIN)&quot;</span>&gt;&gt;,
    icon<span class="hljs-variable">BackgroundColor</span> =&gt; &lt;&lt;<span class="hljs-string">&quot;#FFF&quot;</span>&gt;&gt;,
    icon<span class="hljs-variable">Path</span> =&gt; &lt;&lt;<span class="hljs-string">&quot;/assets/images/auth-providers/cnrs.svg&quot;</span>&gt;&gt;,
    protocol =&gt; saml,
    protocol<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
        metadata<span class="hljs-variable">Url</span> =&gt; <span class="hljs-string">&quot;https://met.refeds.org/met/entity/https%3A//janus.cnrs.fr/idp/?viewxml=true&amp;federation=federation-education-recherche&quot;</span>,
        preferred<span class="hljs-variable">SsoBinding</span> =&gt; http_redirect,
        attribute<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
            subject<span class="hljs-variable">Id</span> =&gt; <span class="hljs-tuple">{required, <span class="hljs-string">&quot;eduPersonTargetedID&quot;</span>}</span>,
            name =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;displayName&quot;</span>}</span>,
            alias =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;eduPersonPrincipalName&quot;</span>}</span>,
            email =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;mail&quot;</span>}</span>,
            entitlements =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;eduPersonEntitlement&quot;</span>}</span>,
            custom =&gt; undefined
        }</span>,
        entitlement<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
            enabled =&gt; false,
            admin<span class="hljs-variable">Group</span> =&gt; undefined,
            vo<span class="hljs-variable">GroupName</span> =&gt; <span class="hljs-string">&quot;cnrs&quot;</span>,
            parser =&gt; flat_entitlement_parser,
            parser<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
                group<span class="hljs-variable">PrivilegesInVo</span> =&gt; member,
                group<span class="hljs-variable">Type</span> =&gt; team,
                user<span class="hljs-variable">Privileges</span> =&gt; member
            }</span>
        }</span>
    }</span>
}</span>}</span>
</code></pre>
<h3 id="desy-config-saml">DESY config (SAML)</h3>
<pre><code class="lang-Erlang"><span class="hljs-tuple">{desy, #<span class="hljs-tuple">{
    display<span class="hljs-variable">Name</span> =&gt; &lt;&lt;<span class="hljs-string">&quot;DESY (eduGAIN)&quot;</span>&gt;&gt;,
    icon<span class="hljs-variable">BackgroundColor</span> =&gt; &lt;&lt;<span class="hljs-string">&quot;#FFF&quot;</span>&gt;&gt;,
    icon<span class="hljs-variable">Path</span> =&gt; &lt;&lt;<span class="hljs-string">&quot;/assets/images/auth-providers/desy.svg&quot;</span>&gt;&gt;,
    protocol =&gt; saml,
    protocol<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
        metadata<span class="hljs-variable">Url</span> =&gt; <span class="hljs-string">&quot;https://idp1.desy.de/idp/shibboleth&quot;</span>,
        preferred<span class="hljs-variable">SsoBinding</span> =&gt; http_redirect,
        attribute<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
            subject<span class="hljs-variable">Id</span> =&gt; <span class="hljs-tuple">{required, <span class="hljs-string">&quot;eduPersonPrincipalName&quot;</span>}</span>,
            name =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;displayName&quot;</span>}</span>,
            alias =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;eduPersonPrincipalName&quot;</span>}</span>,
            email =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;mail&quot;</span>}</span>,
            entitlements =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;eduPersonEntitlement&quot;</span>}</span>,
            custom =&gt; undefined
        }</span>,
        entitlement<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
            enabled =&gt; false,
            admin<span class="hljs-variable">Group</span> =&gt; undefined,
            vo<span class="hljs-variable">GroupName</span> =&gt; <span class="hljs-string">&quot;desy&quot;</span>,
            parser =&gt; flat_entitlement_parser,
            parser<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
                group<span class="hljs-variable">PrivilegesInVo</span> =&gt; member,
                group<span class="hljs-variable">Type</span> =&gt; team,
                user<span class="hljs-variable">Privileges</span> =&gt; member
            }</span>
        }</span>
    }</span>
}</span>}</span>
</code></pre>
<h3 id="elixir-config-saml">Elixir config (SAML)</h3>
<pre><code class="lang-Erlang"><span class="hljs-tuple">{elixir, #<span class="hljs-tuple">{
    display<span class="hljs-variable">Name</span> =&gt; &lt;&lt;<span class="hljs-string">&quot;Elixir&quot;</span>&gt;&gt;,
    icon<span class="hljs-variable">BackgroundColor</span> =&gt; &lt;&lt;<span class="hljs-string">&quot;#FF7A04&quot;</span>&gt;&gt;,
    icon<span class="hljs-variable">Path</span> =&gt; &lt;&lt;<span class="hljs-string">&quot;/assets/images/auth-providers/elixir.svg&quot;</span>&gt;&gt;,
    protocol =&gt; saml,
    protocol<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
        metadata<span class="hljs-variable">Url</span> =&gt; <span class="hljs-string">&quot;https://login.elixir-czech.org/proxy/saml2/idp/metadata.php&quot;</span>,
        preferred<span class="hljs-variable">SsoBinding</span> =&gt; http_redirect,
        attribute<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
            subject<span class="hljs-variable">Id</span> =&gt; <span class="hljs-tuple">{required, <span class="hljs-string">&quot;eduPersonUniqueID&quot;</span>}</span>,
            name =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;displayName&quot;</span>}</span>,
            alias =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;eduPersonPrincipalName&quot;</span>}</span>,
            email =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;mail&quot;</span>}</span>,
            entitlements =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;eduPersonEntitlement&quot;</span>}</span>,
            custom =&gt; undefined
        }</span>,
        entitlement<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
            enabled =&gt; true,
            admin<span class="hljs-variable">Group</span> =&gt; <span class="hljs-string">&quot;vo:elixir_test/tm:HNSciCloud/tm:tsi-admin&quot;</span>,
            vo<span class="hljs-variable">GroupName</span> =&gt; <span class="hljs-string">&quot;elixir&quot;</span>,
            parser =&gt; flat_entitlement_parser,
            parser<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
                group<span class="hljs-variable">PrivilegesInVo</span> =&gt; member,
                group<span class="hljs-variable">Type</span> =&gt; team,
                user<span class="hljs-variable">Privileges</span> =&gt; member
            }</span>
        }</span>
    }</span>
}</span>}</span>
</code></pre>
<h3 id="embl-config-saml">EMBL config (SAML)</h3>
<pre><code class="lang-Erlang"><span class="hljs-tuple">{embl, #<span class="hljs-tuple">{
    display<span class="hljs-variable">Name</span> =&gt; &lt;&lt;<span class="hljs-string">&quot;EMBL (eduGAIN)&quot;</span>&gt;&gt;,
    icon<span class="hljs-variable">BackgroundColor</span> =&gt; &lt;&lt;<span class="hljs-string">&quot;#FFF&quot;</span>&gt;&gt;,
    icon<span class="hljs-variable">Path</span> =&gt; &lt;&lt;<span class="hljs-string">&quot;/assets/images/auth-providers/embl.svg&quot;</span>&gt;&gt;,
    protocol =&gt; saml,
    protocol<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
        metadata<span class="hljs-variable">Url</span> =&gt; <span class="hljs-string">&quot;https://idp.ebi.ac.uk/idp/shibboleth&quot;</span>,
        preferred<span class="hljs-variable">SsoBinding</span> =&gt; http_redirect,
        attribute<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
            subject<span class="hljs-variable">Id</span> =&gt; <span class="hljs-tuple">{required, <span class="hljs-string">&quot;eduPersonTargetedID&quot;</span>}</span>,
            name =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;displayName&quot;</span>}</span>,
            alias =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;eduPersonPrincipalName&quot;</span>}</span>,
            email =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;mail&quot;</span>}</span>,
            entitlements =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;eduPersonEntitlement&quot;</span>}</span>,
            custom =&gt; undefined
        }</span>,
        entitlement<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
            enabled =&gt; false,
            admin<span class="hljs-variable">Group</span> =&gt; undefined,
            vo<span class="hljs-variable">GroupName</span> =&gt; <span class="hljs-string">&quot;embl&quot;</span>,
            parser =&gt; flat_entitlement_parser,
            parser<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
                group<span class="hljs-variable">PrivilegesInVo</span> =&gt; member,
                group<span class="hljs-variable">Type</span> =&gt; team,
                user<span class="hljs-variable">Privileges</span> =&gt; member
            }</span>
        }</span>
    }</span>
}</span>}</span>
</code></pre>
<h3 id="esrf-config-saml">ESRF config (SAML)</h3>
<pre><code class="lang-Erlang"><span class="hljs-tuple">{esrf, #<span class="hljs-tuple">{
    display<span class="hljs-variable">Name</span> =&gt; &lt;&lt;<span class="hljs-string">&quot;ESRF (eduGAIN)&quot;</span>&gt;&gt;,
    icon<span class="hljs-variable">BackgroundColor</span> =&gt; &lt;&lt;<span class="hljs-string">&quot;#FFF&quot;</span>&gt;&gt;,
    icon<span class="hljs-variable">Path</span> =&gt; &lt;&lt;<span class="hljs-string">&quot;/assets/images/auth-providers/esrf.svg&quot;</span>&gt;&gt;,
    protocol =&gt; saml,
    protocol<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
        metadata<span class="hljs-variable">Url</span> =&gt; <span class="hljs-string">&quot;https://met.refeds.org/met/entity/https%3A//websso.esrf.fr/auth/realms/ESRF/?viewxml=true&quot;</span>,
        preferred<span class="hljs-variable">SsoBinding</span> =&gt; http_redirect,
        attribute<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
            subject<span class="hljs-variable">Id</span> =&gt; <span class="hljs-tuple">{required, <span class="hljs-string">&quot;eduPersonTargetedID&quot;</span>}</span>,
            name =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;displayName&quot;</span>}</span>,
            alias =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;eduPersonPrincipalName&quot;</span>}</span>,
            email =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;mail&quot;</span>}</span>,
            entitlements =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;eduPersonEntitlement&quot;</span>}</span>,
            custom =&gt; undefined
        }</span>,
        entitlement<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
            enabled =&gt; false,
            admin<span class="hljs-variable">Group</span> =&gt; undefined,
            vo<span class="hljs-variable">GroupName</span> =&gt; <span class="hljs-string">&quot;esrf&quot;</span>,
            parser =&gt; flat_entitlement_parser,
            parser<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
                group<span class="hljs-variable">PrivilegesInVo</span> =&gt; member,
                group<span class="hljs-variable">Type</span> =&gt; team,
                user<span class="hljs-variable">Privileges</span> =&gt; member
            }</span>
        }</span>
    }</span>
}</span>}</span>
</code></pre>
<h3 id="ifae-config-saml">IFAE config (SAML)</h3>
<pre><code class="lang-Erlang"><span class="hljs-tuple">{ifae, #<span class="hljs-tuple">{
    display<span class="hljs-variable">Name</span> =&gt; &lt;&lt;<span class="hljs-string">&quot;IFAE (eduGAIN)&quot;</span>&gt;&gt;,
    icon<span class="hljs-variable">BackgroundColor</span> =&gt; &lt;&lt;<span class="hljs-string">&quot;#FFF&quot;</span>&gt;&gt;,
    icon<span class="hljs-variable">Path</span> =&gt; &lt;&lt;<span class="hljs-string">&quot;/assets/images/auth-providers/ifae.jpg&quot;</span>&gt;&gt;,
    protocol =&gt; saml,
    protocol<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
        metadata<span class="hljs-variable">Url</span> =&gt; <span class="hljs-string">&quot;https://met.refeds.org/met/entity/https%3A//www.rediris.es/sir/ifaeidp/?viewxml=true&quot;</span>,
        preferred<span class="hljs-variable">SsoBinding</span> =&gt; http_redirect,
        attribute<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
            subject<span class="hljs-variable">Id</span> =&gt; <span class="hljs-tuple">{required, <span class="hljs-string">&quot;eduPersonTargetedID&quot;</span>}</span>,
            name =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;displayName&quot;</span>}</span>,
            alias =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;eduPersonPrincipalName&quot;</span>}</span>,
            email =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;mail&quot;</span>}</span>,
            entitlements =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;eduPersonEntitlement&quot;</span>}</span>,
            custom =&gt; undefined
        }</span>,
        entitlement<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
            enabled =&gt; false,
            admin<span class="hljs-variable">Group</span> =&gt; undefined,
            vo<span class="hljs-variable">GroupName</span> =&gt; <span class="hljs-string">&quot;ifae&quot;</span>,
            parser =&gt; flat_entitlement_parser,
            parser<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
                group<span class="hljs-variable">PrivilegesInVo</span> =&gt; member,
                group<span class="hljs-variable">Type</span> =&gt; team,
                user<span class="hljs-variable">Privileges</span> =&gt; member
            }</span>
        }</span>
    }</span>
}</span>}</span>
</code></pre>
<h3 id="infn-config-saml">INFN config (SAML)</h3>
<pre><code class="lang-Erlang"><span class="hljs-tuple">{infn, #<span class="hljs-tuple">{
    display<span class="hljs-variable">Name</span> =&gt; &lt;&lt;<span class="hljs-string">&quot;INFN (eduGAIN)&quot;</span>&gt;&gt;,
    icon<span class="hljs-variable">BackgroundColor</span> =&gt; &lt;&lt;<span class="hljs-string">&quot;#FFF&quot;</span>&gt;&gt;,
    icon<span class="hljs-variable">Path</span> =&gt; &lt;&lt;<span class="hljs-string">&quot;/assets/images/auth-providers/infn.svg&quot;</span>&gt;&gt;,
    protocol =&gt; saml,
    protocol<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
        metadata<span class="hljs-variable">Url</span> =&gt; <span class="hljs-string">&quot;https://idp.infn.it/saml2/idp/metadata.php&quot;</span>,
        preferred<span class="hljs-variable">SsoBinding</span> =&gt; http_redirect,
        attribute<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
            subject<span class="hljs-variable">Id</span> =&gt; <span class="hljs-tuple">{required, <span class="hljs-string">&quot;eduPersonTargetedID&quot;</span>}</span>,
            name =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;displayName&quot;</span>}</span>,
            alias =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;eduPersonPrincipalName&quot;</span>}</span>,
            email =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;mail&quot;</span>}</span>,
            entitlements =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;eduPersonEntitlement&quot;</span>}</span>,
            custom =&gt; undefined
        }</span>,
        entitlement<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
            enabled =&gt; false,
            admin<span class="hljs-variable">Group</span> =&gt; undefined,
            vo<span class="hljs-variable">GroupName</span> =&gt; <span class="hljs-string">&quot;infn&quot;</span>,
            parser =&gt; flat_entitlement_parser,
            parser<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
                group<span class="hljs-variable">PrivilegesInVo</span> =&gt; member,
                group<span class="hljs-variable">Type</span> =&gt; team,
                user<span class="hljs-variable">Privileges</span> =&gt; member
            }</span>
        }</span>
    }</span>
}</span>}</span>
</code></pre>
<h3 id="kit-config-saml">KIT config (SAML)</h3>
<pre><code class="lang-Erlang"><span class="hljs-tuple">{kit, #<span class="hljs-tuple">{
    display<span class="hljs-variable">Name</span> =&gt; &lt;&lt;<span class="hljs-string">&quot;KIT (eduGAIN)&quot;</span>&gt;&gt;,
    icon<span class="hljs-variable">BackgroundColor</span> =&gt; &lt;&lt;<span class="hljs-string">&quot;#FFF&quot;</span>&gt;&gt;,
    icon<span class="hljs-variable">Path</span> =&gt; &lt;&lt;<span class="hljs-string">&quot;/assets/images/auth-providers/kit.svg&quot;</span>&gt;&gt;,
    protocol =&gt; saml,
    protocol<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
        metadata<span class="hljs-variable">Url</span> =&gt; <span class="hljs-string">&quot;https://met.refeds.org/met/entity/https%3A//idp.scc.kit.edu/idp/shibboleth/?viewxml=true&quot;</span>,
        preferred<span class="hljs-variable">SsoBinding</span> =&gt; http_redirect,
        attribute<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
            subject<span class="hljs-variable">Id</span> =&gt; <span class="hljs-tuple">{required, <span class="hljs-string">&quot;eduPersonPrincipalName&quot;</span>}</span>,
            name =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;surName&quot;</span>}</span>,
            alias =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;eduPersonPrincipalName&quot;</span>}</span>,
            email =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;mail&quot;</span>}</span>,
            entitlements =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;eduPersonEntitlement&quot;</span>}</span>,
            custom =&gt; undefined
        }</span>,
        entitlement<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
            enabled =&gt; false,
            admin<span class="hljs-variable">Group</span> =&gt; undefined,
            vo<span class="hljs-variable">GroupName</span> =&gt; <span class="hljs-string">&quot;kit&quot;</span>,
            parser =&gt; flat_entitlement_parser,
            parser<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
                group<span class="hljs-variable">PrivilegesInVo</span> =&gt; member,
                group<span class="hljs-variable">Type</span> =&gt; team,
                user<span class="hljs-variable">Privileges</span> =&gt; member
            }</span>
        }</span>
    }</span>
}</span>}</span>
</code></pre>
<h3 id="stfc-config-saml">STFC config (SAML)</h3>
<pre><code class="lang-Erlang"><span class="hljs-tuple">{stfc, #<span class="hljs-tuple">{
    display<span class="hljs-variable">Name</span> =&gt; &lt;&lt;<span class="hljs-string">&quot;STFC (eduGAIN)&quot;</span>&gt;&gt;,
    icon<span class="hljs-variable">BackgroundColor</span> =&gt; &lt;&lt;<span class="hljs-string">&quot;#1C3764&quot;</span>&gt;&gt;,
    icon<span class="hljs-variable">Path</span> =&gt; &lt;&lt;<span class="hljs-string">&quot;/assets/images/auth-providers/stfc.svg&quot;</span>&gt;&gt;,
    protocol =&gt; saml,
    protocol<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
        metadata<span class="hljs-variable">Url</span> =&gt; <span class="hljs-string">&quot;https://met.refeds.org/met/entity/https%3A//idp02.stfc.ac.uk/shibboleth/?viewxml=true&quot;</span>,
        preferred<span class="hljs-variable">SsoBinding</span> =&gt; http_redirect,
        attribute<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
            subject<span class="hljs-variable">Id</span> =&gt; <span class="hljs-tuple">{required, <span class="hljs-string">&quot;eduPersonTargetedID&quot;</span>}</span>,
            name =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;displayName&quot;</span>}</span>,
            alias =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;eduPersonPrincipalName&quot;</span>}</span>,
            email =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;mail&quot;</span>}</span>,
            entitlements =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;eduPersonEntitlement&quot;</span>}</span>,
            custom =&gt; undefined
        }</span>,
        entitlement<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
            enabled =&gt; false,
            admin<span class="hljs-variable">Group</span> =&gt; undefined,
            vo<span class="hljs-variable">GroupName</span> =&gt; <span class="hljs-string">&quot;stfc&quot;</span>,
            parser =&gt; flat_entitlement_parser,
            parser<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
                group<span class="hljs-variable">PrivilegesInVo</span> =&gt; member,
                group<span class="hljs-variable">Type</span> =&gt; team,
                user<span class="hljs-variable">Privileges</span> =&gt; member
            }</span>
        }</span>
    }</span>
}</span>}</span>
</code></pre>
<h3 id="surfsara-config-saml">SurfSara config (SAML)</h3>
<pre><code class="lang-Erlang"><span class="hljs-tuple">{surfsara, #<span class="hljs-tuple">{
    display<span class="hljs-variable">Name</span> =&gt; &lt;&lt;<span class="hljs-string">&quot;SURFSara (eduGAIN)&quot;</span>&gt;&gt;,
    icon<span class="hljs-variable">BackgroundColor</span> =&gt; &lt;&lt;<span class="hljs-string">&quot;#FFF&quot;</span>&gt;&gt;,
    icon<span class="hljs-variable">Path</span> =&gt; &lt;&lt;<span class="hljs-string">&quot;/assets/images/auth-providers/surfsara.png&quot;</span>&gt;&gt;,
    protocol =&gt; saml,
    protocol<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
        metadata<span class="hljs-variable">Url</span> =&gt; <span class="hljs-string">&quot;https://technical.edugain.org/api.php?action=show_entity&amp;row_id=27218&quot;</span>,
        preferred<span class="hljs-variable">SsoBinding</span> =&gt; http_redirect,
        attribute<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
            subject<span class="hljs-variable">Id</span> =&gt; <span class="hljs-tuple">{required, <span class="hljs-string">&quot;eduPersonTargetedID&quot;</span>}</span>,
            name =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;displayName&quot;</span>}</span>,
            alias =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;eduPersonPrincipalName&quot;</span>}</span>,
            email =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;mail&quot;</span>}</span>,
            entitlements =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;eduPersonEntitlement&quot;</span>}</span>,
            custom =&gt; undefined
        }</span>,
        entitlement<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
            enabled =&gt; false,
            admin<span class="hljs-variable">Group</span> =&gt; undefined,
            vo<span class="hljs-variable">GroupName</span> =&gt; <span class="hljs-string">&quot;surfsara&quot;</span>,
            parser =&gt; flat_entitlement_parser,
            parser<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
                group<span class="hljs-variable">PrivilegesInVo</span> =&gt; member,
                group<span class="hljs-variable">Type</span> =&gt; team,
                user<span class="hljs-variable">Privileges</span> =&gt; member
            }</span>
        }</span>
    }</span>
}</span>}</span>
</code></pre>
<h3 id="unitedid-config-saml">UnitedID config (SAML)</h3>
<pre><code class="lang-Erlang"><span class="hljs-tuple">{unitedid, #<span class="hljs-tuple">{
    display<span class="hljs-variable">Name</span> =&gt; &lt;&lt;<span class="hljs-string">&quot;UnitedID&quot;</span>&gt;&gt;,
    icon<span class="hljs-variable">BackgroundColor</span> =&gt; &lt;&lt;<span class="hljs-string">&quot;#ABDFF1&quot;</span>&gt;&gt;,
    icon<span class="hljs-variable">Path</span> =&gt; &lt;&lt;<span class="hljs-string">&quot;/assets/images/auth-providers/unitedid.png&quot;</span>&gt;&gt;,
    protocol =&gt; saml,
    protocol<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
        metadata<span class="hljs-variable">Url</span> =&gt; <span class="hljs-string">&quot;http://md.unitedid.org/idp.xml&quot;</span>,
        preferred<span class="hljs-variable">SsoBinding</span> =&gt; http_redirect,
        attribute<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
            subject<span class="hljs-variable">Id</span> =&gt; <span class="hljs-tuple">{required, <span class="hljs-string">&quot;eduPersonTargetedID&quot;</span>}</span>,
            name =&gt; <span class="hljs-tuple">{optional, undefined}</span>,
            alias =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;eduPersonPrincipalName&quot;</span>}</span>,
            email =&gt; <span class="hljs-tuple">{optional, <span class="hljs-string">&quot;eduPersonPrincipalName&quot;</span>}</span>,
            entitlements =&gt; <span class="hljs-tuple">{optional, undefined}</span>,
            custom =&gt; undefined
        }</span>,
        entitlement<span class="hljs-variable">Mapping</span> =&gt; #<span class="hljs-tuple">{
            enabled =&gt; false,
            admin<span class="hljs-variable">Group</span> =&gt; undefined,
            vo<span class="hljs-variable">GroupName</span> =&gt; <span class="hljs-string">&quot;unitedid&quot;</span>,
            parser =&gt; flat_entitlement_parser,
            parser<span class="hljs-variable">Config</span> =&gt; #<span class="hljs-tuple">{
                group<span class="hljs-variable">PrivilegesInVo</span> =&gt; member,
                group<span class="hljs-variable">Type</span> =&gt; team,
                user<span class="hljs-variable">Privileges</span> =&gt; member
            }</span>
        }</span>
    }</span>
}</span>}</span>
</code></pre>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../../../doc/administering_onedata/openid_saml_configuration/openid_configuration_legacy.html" class="navigation navigation-prev " aria-label="Previous page: 18.02.0-rc11 or older"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../../../doc/administering_onedata/openid_saml_configuration/openid_saml_configuration_19_02.html" class="navigation navigation-next " aria-label="Next page: 19.02.* or newer"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../../../gitbook/app.js"></script>

    
    <script src="../../../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../../../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../../../gitbook/plugins/gitbook-plugin-onedata-theme/nanoscroller.js"></script>
    

    
    <script src="../../../gitbook/plugins/gitbook-plugin-onedata-theme/onedata.js"></script>
    

    
    <script src="../../../gitbook/plugins/gitbook-plugin-onedata-theme/w3data.js"></script>
    

    
    <script src="../../../gitbook/plugins/gitbook-plugin-toggle-chapters/toggle.js"></script>
    

    
    <script src="../../../gitbook/plugins/gitbook-plugin-responsive-iframes/plugin.js"></script>
    

    
    <script src="../../../gitbook/plugins/gitbook-plugin-ga/plugin.js"></script>
    

    
    <script src="../../../gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="../../../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"image-captions":{"caption":"","variable_name":"_pictures"},"ga":{"token":"UA-63301911-1","configuration":"auto"},"favicon":"doc/img/onedata.ico","search":{"maxIndexSize":1000000},"onedata-theme":{},"youtube":{},"toggle-chapters":{},"toc":{},"include":{},"responsive-iframes":{},"custom-favicon":{},"styles-sass":{},"include-html":{},"highlight":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        <!-- body:end -->
<!-- body:end -->
    </body>
    <!-- End of book Onedata Documentation -->
<!-- End of book Onedata Documentation -->
</html>
