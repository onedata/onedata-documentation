require(["gitbook"], function(gitbook) {
    gitbook.events.bind("page.change", function() {
      // apply nanoscroller on left navigation
      $('nav').addClass('nano');
      $('.summary').addClass('nano-content');

      // apply nanoscroller on conent
      // $('.book-body').addClass('nano');
      // $('.body-inner').addClass('nano-content');

      $('.nano').nanoScroller({alwaysVisible: true});


      /// Change index entry in summary to onedata logo
      // Note: it must exist in a gitbook files
      var headingPath = gitbook.state.bookRoot + '/doc/img/heading.png';
      $('[data-path="index.html"] a').html('<h1><img src="'+headingPath+'" /> documentation</h1>');

      /// Remove all li's from summary which are not chapters (!)
      $('.summary').find('li:not(.chapter)').remove();

      /// Disable anchors in headings (for remove glossaries)
      var unAnchorize = function() {
        $(this).html($(this)[0].innerHTML.replace(/<a.*?>(.*?)<\/a>/g, '$1'));
      };
      for (var i=1; i<=5; ++i) {
        var headers = $('.page-inner h'+i);
        if (headers) {
          headers.each(unAnchorize);
        }
      }

      /// Remove some top-bar buttons
      $('.font-settings').remove();
      $('.pull-right').remove();

      /// Remove heading in top-bar when hovered
      $('.book-header h1').remove();

    });

    gitbook.events.bind("exercise.submit", function() {
        // do something
    });
});
